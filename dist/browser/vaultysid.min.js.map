{"version":3,"file":"vaultysid.min.js","mappings":"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","sources":["webpack://@vaultys/id/webpack/universalModuleDefinition","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/utils.js","webpack://@vaultys/id/./src/Fido2PRFManager.ts","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+post-quantum@0.4.1/node_modules/@noble/post-quantum/_crystals.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/curve.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/constants.js","webpack://@vaultys/id/./node_modules/.pnpm/stream-browserify@3.0.0/node_modules/stream-browserify/index.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/tagged.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/weierstrass.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/cbor.js","webpack://@vaultys/id/./node_modules/.pnpm/util-deprecate@1.0.2/node_modules/util-deprecate/browser.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/p256.js","webpack://@vaultys/id/./node_modules/.pnpm/@vaultys+saltpack@1.0.0-beta/node_modules/@vaultys/saltpack/dist/index.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/vendor/binary-parse-stream/index.js","webpack://@vaultys/id/./src/PQManager.ts","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/nist.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+post-quantum@0.4.1/node_modules/@noble/post-quantum/ml-dsa.js","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/utils/utf8.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/ExtData.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/DecodeError.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/utils/int.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/timestamp.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/ExtensionCodec.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/utils/typedArrays.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/Encoder.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/encode.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/utils/prettyByte.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/Decoder.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/CachedKeyDecoder.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/decode.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/utils/stream.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@msgpack+msgpack@3.1.2/node_modules/@msgpack/msgpack/dist.esm/decodeAsync.mjs","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/hash-to-curve.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://@vaultys/id/./src/MemoryChannel.ts","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/sharedValueEncoder.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/edwards.js","webpack://@vaultys/id/./index.ts","webpack://@vaultys/id/./src/MemoryStorage.ts","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/encoder.js","webpack://@vaultys/id/./src/Challenger.ts","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/hmac.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/_u64.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/sha2.js","webpack://@vaultys/id/./src/pqCrypto.ts","webpack://@vaultys/id/./node_modules/.pnpm/string_decoder@1.3.0/node_modules/string_decoder/lib/string_decoder.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_readable.js","webpack://@vaultys/id/./node_modules/.pnpm/tweetnacl@1.0.3/node_modules/tweetnacl/nacl-fast.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://@vaultys/id/./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_transform.js","webpack://@vaultys/id/./src/VaultysId.ts","webpack://@vaultys/id/./src/KeyManager.ts","webpack://@vaultys/id/./src/Fido2Manager.ts","webpack://@vaultys/id/./node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/sha3.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/_shortw_utils.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_duplex.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/p521.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/objectRecorder.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/map.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/decoder.js","webpack://@vaultys/id/./src/platform/SoftCredentials.ts","webpack://@vaultys/id/./src/platform/webauthn.ts","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/ed25519.js","webpack://@vaultys/id/./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+post-quantum@0.4.1/node_modules/@noble/post-quantum/utils.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/utils.js","webpack://@vaultys/id/./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js","webpack://@vaultys/id/./src/IdManager.ts","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_writable.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/from-browser.js","webpack://@vaultys/id/./node_modules/.pnpm/nofilter@3.1.0/node_modules/nofilter/lib/index.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/p384.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/modular.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/_md.js","webpack://@vaultys/id/./node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/state.js","webpack://@vaultys/id/./src/crypto.ts","webpack://@vaultys/id/./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js","webpack://@vaultys/id/./src/cryptoChannel.ts","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/utils.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/errors-browser.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+curves@1.9.2/node_modules/@noble/curves/abstract/montgomery.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/diagnose.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/simple.js","webpack://@vaultys/id/./src/GameOfLifeIcon.ts","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://@vaultys/id/./node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/crypto.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/_stream_passthrough.js","webpack://@vaultys/id/./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js","webpack://@vaultys/id/./node_modules/.pnpm/readable-stream@3.6.2/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://@vaultys/id/./node_modules/.pnpm/cbor@10.0.3/node_modules/cbor/lib/commented.js","webpack://@vaultys/id/webpack/bootstrap","webpack://@vaultys/id/webpack/runtime/define property getters","webpack://@vaultys/id/webpack/runtime/global","webpack://@vaultys/id/webpack/runtime/hasOwnProperty shorthand","webpack://@vaultys/id/webpack/runtime/make namespace object","webpack://@vaultys/id/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, () => {\nreturn ","\"use strict\";\n/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.Hash = exports.nextTick = exports.swap32IfBE = exports.byteSwapIfBE = exports.swap8IfBE = exports.isLE = void 0;\nexports.isBytes = isBytes;\nexports.anumber = anumber;\nexports.abytes = abytes;\nexports.ahash = ahash;\nexports.aexists = aexists;\nexports.aoutput = aoutput;\nexports.u8 = u8;\nexports.u32 = u32;\nexports.clean = clean;\nexports.createView = createView;\nexports.rotr = rotr;\nexports.rotl = rotl;\nexports.byteSwap = byteSwap;\nexports.byteSwap32 = byteSwap32;\nexports.bytesToHex = bytesToHex;\nexports.hexToBytes = hexToBytes;\nexports.asyncLoop = asyncLoop;\nexports.utf8ToBytes = utf8ToBytes;\nexports.bytesToUtf8 = bytesToUtf8;\nexports.toBytes = toBytes;\nexports.kdfInputToBytes = kdfInputToBytes;\nexports.concatBytes = concatBytes;\nexports.checkOpts = checkOpts;\nexports.createHasher = createHasher;\nexports.createOptHasher = createOptHasher;\nexports.createXOFer = createXOFer;\nexports.randomBytes = randomBytes;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nfunction anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nfunction ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nfunction aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nfunction aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nfunction u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nfunction u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nfunction clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nfunction createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nfunction rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nfunction rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexports.isLE = (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nfunction byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexports.swap8IfBE = exports.isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** @deprecated */\nexports.byteSwapIfBE = exports.swap8IfBE;\n/** In place byte swap for Uint32Array */\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexports.swap32IfBE = exports.isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nfunction bytesToUtf8(bytes) {\n    return new TextDecoder().decode(bytes);\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nfunction kdfInputToBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** Copies several Uint8Arrays into one. */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** For runtime check if class implements interface */\nclass Hash {\n}\nexports.Hash = Hash;\n/** Wraps hash function, creating an interface on top of it */\nfunction createHasher(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nfunction createOptHasher(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nfunction createXOFer(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructor = createHasher;\nexports.wrapConstructorWithOpts = createOptHasher;\nexports.wrapXOFConstructorWithOpts = createXOFer;\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (crypto_1.crypto && typeof crypto_1.crypto.randomBytes === 'function') {\n        return Uint8Array.from(crypto_1.crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"./crypto\");\nconst cbor_1 = __importDefault(require(\"cbor\"));\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst SoftCredentials_1 = __importDefault(require(\"./platform/SoftCredentials\"));\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst Fido2Manager_1 = __importDefault(require(\"./Fido2Manager\"));\nconst buffer_1 = require(\"buffer/\");\nconst pqCrypto_1 = require(\"./pqCrypto\");\nconst lookup = {\n    usb: 1,\n    nfc: 2,\n    ble: 4,\n    internal: 8,\n    hybrid: 16,\n    \"smart-card\": 32,\n};\nconst getTransports = (num) => Object.keys(lookup).filter((i) => num && lookup[i]);\nconst fromTransports = (transports) => transports.reduceRight((memo, i) => memo + (lookup[i] ? lookup[i] : 0), 0);\nconst getAuthTypeFromCkey = (ckey) => {\n    const decoded = cbor_1.default.decode(ckey, { extendedResults: true });\n    const type = decoded.value.get(1);\n    if (type === 1) {\n        return \"Ed25519VerificationKey2020\";\n    }\n    else if (type === 2) {\n        return \"P256VerificationKey2020\";\n    }\n    else\n        return \"Unknown\";\n};\nconst getSignerFromCkey = (ckey) => {\n    const k = cbor_1.default.decode(ckey, { extendedResults: true }).value;\n    //console.log(\"getSignerFromCkey\", k);\n    let publicKey = buffer_1.Buffer.from([]);\n    if (k.get(3) == -7)\n        publicKey = buffer_1.Buffer.concat([buffer_1.Buffer.from(\"04\", \"hex\"), k.get(-2), k.get(-3)]);\n    else if (k.get(3) == -8)\n        publicKey = k.get(-2);\n    else if (k.get(3) == pqCrypto_1.PQ_COSE_ALG.DILITHIUM2)\n        publicKey = k.get(-101);\n    return { publicKey };\n};\nclass Fido2PRFManager extends Fido2Manager_1.default {\n    constructor() {\n        super();\n        this.prfsalt = buffer_1.Buffer.from(\"VaultysID salt\");\n    }\n    static async createFromAttestation(attestation) {\n        const f2m = new Fido2PRFManager();\n        f2m.ckey = SoftCredentials_1.default.getCOSEPublicKey(attestation);\n        //console.log(attestation, f2m.ckey);\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.fid = buffer_1.Buffer.from(attestation.id, \"base64\");\n        // fix for firefox, getTransports not available ! https://developer.mozilla.org/en-US/docs/Web/API/AuthenticatorAttestationResponse/getTransports\n        const response = attestation.response;\n        const transports = response.getTransports ? response.getTransports() : [\"usb\"];\n        f2m._transports = fromTransports(transports);\n        // signing\n        f2m.signer = getSignerFromCkey(f2m.ckey);\n        await f2m.getCypher();\n        delete f2m.cypher.secretKey;\n        return f2m;\n    }\n    getSecret() {\n        return buffer_1.Buffer.from((0, msgpack_1.encode)({\n            v: this.version,\n            f: this.fid,\n            t: this._transports,\n            c: this.ckey,\n            e: this.cypher.publicKey,\n        }));\n    }\n    static fromSecret(secret) {\n        const data = (0, msgpack_1.decode)(secret);\n        const f2m = new Fido2PRFManager();\n        f2m.version = data.v ?? 0;\n        f2m.capability = \"private\";\n        f2m.fid = typeof data.f === \"string\" ? buffer_1.Buffer.from(data.f, \"base64\") : data.f;\n        f2m._transports = data.t ? data.t : 15;\n        f2m.ckey = data.c;\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.signer = getSignerFromCkey(data.c);\n        f2m.cypher = { publicKey: data.e };\n        return f2m;\n    }\n    cleanSecureData() {\n        if (this.cypher?.secretKey) {\n            (0, crypto_1.secureErase)(this.cypher.secretKey);\n            delete this.cypher.secretKey;\n        }\n    }\n    async getCypher() {\n        if (!this.cypher?.secretKey) {\n            const publicKey = {\n                challenge: buffer_1.Buffer.from([]),\n                userVerification: \"preferred\",\n                allowCredentials: [\n                    {\n                        type: \"public-key\",\n                        id: this.fid,\n                        transports: getTransports(this._transports),\n                    },\n                ],\n                extensions: {\n                    prf: {\n                        eval: {\n                            // Input the contextual information\n                            first: this.prfsalt,\n                            // There is a \"second\" optional field too\n                            // Though it is intended for key rotation.\n                        },\n                    },\n                },\n            };\n            const result = await this.webAuthn.get(publicKey);\n            const { prf } = result.getClientExtensionResults();\n            const first = prf?.results?.first;\n            if (!first)\n                throw new Error(\"PRF failed\");\n            const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(new Uint8Array(first));\n            this.cypher = {\n                publicKey: buffer_1.Buffer.from(cypher.publicKey),\n                secretKey: buffer_1.Buffer.from(cypher.secretKey),\n            };\n        }\n        return super.getCypher();\n    }\n    async createRevocationCertificate() {\n        // impossible\n        return null;\n    }\n}\nexports.default = Fido2PRFManager;\n","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.XOF256 = exports.XOF128 = exports.genCrystals = void 0;\n/**\n * Internal methods for lattice-based ML-KEM and ML-DSA.\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nconst sha3_1 = require(\"@noble/hashes/sha3\");\nconst utils_ts_1 = require(\"./utils.js\");\n// TODO: benchmark\nfunction bitReversal(n, bits = 8) {\n    const padded = n.toString(2).padStart(8, '0');\n    const sliced = padded.slice(-bits).padStart(7, '0');\n    const revrsd = sliced.split('').reverse().join('');\n    return Number.parseInt(revrsd, 2);\n}\nconst genCrystals = (opts) => {\n    // isKyber: true means Kyber, false means Dilithium\n    const { newPoly, N, Q, F, ROOT_OF_UNITY, brvBits, isKyber } = opts;\n    const mod = (a, modulo = Q) => {\n        const result = a % modulo | 0;\n        return (result >= 0 ? result | 0 : (modulo + result) | 0) | 0;\n    };\n    // -(Q-1)/2 < a <= (Q-1)/2\n    const smod = (a, modulo = Q) => {\n        const r = mod(a, modulo) | 0;\n        return (r > modulo >> 1 ? (r - modulo) | 0 : r) | 0;\n    };\n    // Generate zettas\n    function getZettas() {\n        const out = newPoly(N);\n        for (let i = 0; i < N; i++) {\n            const b = bitReversal(i, brvBits);\n            const p = BigInt(ROOT_OF_UNITY) ** BigInt(b) % BigInt(Q);\n            out[i] = Number(p) | 0;\n        }\n        return out;\n    }\n    const nttZetas = getZettas();\n    // Number-Theoretic Transform\n    // Explained: https://electricdusk.com/ntt.html\n    // Kyber has slightly different params, since there is no 512th primitive root of unity mod q,\n    // only 256th primitive root of unity mod. Which also complicates MultiplyNTT.\n    // TODO: there should be less ugly way to define this.\n    const LEN1 = isKyber ? 128 : N;\n    const LEN2 = isKyber ? 1 : 0;\n    const NTT = {\n        encode: (r) => {\n            for (let k = 1, len = 128; len > LEN2; len >>= 1) {\n                for (let start = 0; start < N; start += 2 * len) {\n                    const zeta = nttZetas[k++];\n                    for (let j = start; j < start + len; j++) {\n                        const t = mod(zeta * r[j + len]);\n                        r[j + len] = mod(r[j] - t) | 0;\n                        r[j] = mod(r[j] + t) | 0;\n                    }\n                }\n            }\n            return r;\n        },\n        decode: (r) => {\n            for (let k = LEN1 - 1, len = 1 + LEN2; len < LEN1 + LEN2; len <<= 1) {\n                for (let start = 0; start < N; start += 2 * len) {\n                    const zeta = nttZetas[k--];\n                    for (let j = start; j < start + len; j++) {\n                        const t = r[j];\n                        r[j] = mod(t + r[j + len]);\n                        r[j + len] = mod(zeta * (r[j + len] - t));\n                    }\n                }\n            }\n            for (let i = 0; i < r.length; i++)\n                r[i] = mod(F * r[i]);\n            return r;\n        },\n    };\n    // Encode polynominal as bits\n    const bitsCoder = (d, c) => {\n        const mask = (0, utils_ts_1.getMask)(d);\n        const bytesLen = d * (N / 8);\n        return {\n            bytesLen,\n            encode: (poly) => {\n                const r = new Uint8Array(bytesLen);\n                for (let i = 0, buf = 0, bufLen = 0, pos = 0; i < poly.length; i++) {\n                    buf |= (c.encode(poly[i]) & mask) << bufLen;\n                    bufLen += d;\n                    for (; bufLen >= 8; bufLen -= 8, buf >>= 8)\n                        r[pos++] = buf & (0, utils_ts_1.getMask)(bufLen);\n                }\n                return r;\n            },\n            decode: (bytes) => {\n                const r = newPoly(N);\n                for (let i = 0, buf = 0, bufLen = 0, pos = 0; i < bytes.length; i++) {\n                    buf |= bytes[i] << bufLen;\n                    bufLen += 8;\n                    for (; bufLen >= d; bufLen -= d, buf >>= d)\n                        r[pos++] = c.decode(buf & mask);\n                }\n                return r;\n            },\n        };\n    };\n    return { mod, smod, nttZetas, NTT, bitsCoder };\n};\nexports.genCrystals = genCrystals;\nconst createXofShake = (shake) => (seed, blockLen) => {\n    if (!blockLen)\n        blockLen = shake.blockLen;\n    // Optimizations that won't mater:\n    // - cached seed update (two .update(), on start and on the end)\n    // - another cache which cloned into working copy\n    // Faster than multiple updates, since seed less than blockLen\n    const _seed = new Uint8Array(seed.length + 2);\n    _seed.set(seed);\n    const seedLen = seed.length;\n    const buf = new Uint8Array(blockLen); // == shake128.blockLen\n    let h = shake.create({});\n    let calls = 0;\n    let xofs = 0;\n    return {\n        stats: () => ({ calls, xofs }),\n        get: (x, y) => {\n            _seed[seedLen + 0] = x;\n            _seed[seedLen + 1] = y;\n            h.destroy();\n            h = shake.create({}).update(_seed);\n            calls++;\n            return () => {\n                xofs++;\n                return h.xofInto(buf);\n            };\n        },\n        clean: () => {\n            h.destroy();\n            buf.fill(0);\n            _seed.fill(0);\n        },\n    };\n};\nexports.XOF128 = createXofShake(sha3_1.shake128);\nexports.XOF256 = createXofShake(sha3_1.shake256);\n//# sourceMappingURL=_crystals.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.negateCt = negateCt;\nexports.normalizeZ = normalizeZ;\nexports.wNAF = wNAF;\nexports.mulEndoUnsafe = mulEndoUnsafe;\nexports.pippenger = pippenger;\nexports.precomputeMSMUnsafe = precomputeMSMUnsafe;\nexports.validateBasic = validateBasic;\nexports._createCurveFields = _createCurveFields;\n/**\n * Methods for elliptic curve multiplication by scalars.\n * Contains wNAF, pippenger\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_ts_1 = require(\"../utils.js\");\nconst modular_ts_1 = require(\"./modular.js\");\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nfunction negateCt(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\n/**\n * Takes a bunch of Projective Points but executes only one\n * inversion on all of them. Inversion is very slow operation,\n * so this improves performance massively.\n * Optimization: converts a list of projective points to a list of identical points with Z=1.\n */\nfunction normalizeZ(c, property, points) {\n    const getz = property === 'pz' ? (p) => p.pz : (p) => p.ez;\n    const toInv = (0, modular_ts_1.FpInvertBatch)(c.Fp, points.map(getz));\n    // @ts-ignore\n    const affined = points.map((p, i) => p.toAffine(toInv[i]));\n    return affined.map(c.fromAffine);\n}\nfunction validateW(W, bits) {\n    if (!Number.isSafeInteger(W) || W <= 0 || W > bits)\n        throw new Error('invalid window size, expected [1..' + bits + '], got W=' + W);\n}\nfunction calcWOpts(W, scalarBits) {\n    validateW(W, scalarBits);\n    const windows = Math.ceil(scalarBits / W) + 1; // W=8 33. Not 32, because we skip zero\n    const windowSize = 2 ** (W - 1); // W=8 128. Not 256, because we skip zero\n    const maxNumber = 2 ** W; // W=8 256\n    const mask = (0, utils_ts_1.bitMask)(W); // W=8 255 == mask 0b11111111\n    const shiftBy = BigInt(W); // W=8 8\n    return { windows, windowSize, mask, maxNumber, shiftBy };\n}\nfunction calcOffsets(n, window, wOpts) {\n    const { windowSize, mask, maxNumber, shiftBy } = wOpts;\n    let wbits = Number(n & mask); // extract W bits.\n    let nextN = n >> shiftBy; // shift number by W bits.\n    // What actually happens here:\n    // const highestBit = Number(mask ^ (mask >> 1n));\n    // let wbits2 = wbits - 1; // skip zero\n    // if (wbits2 & highestBit) { wbits2 ^= Number(mask); // (~);\n    // split if bits > max: +224 => 256-32\n    if (wbits > windowSize) {\n        // we skip zero, which means instead of `>= size-1`, we do `> size`\n        wbits -= maxNumber; // -32, can be maxNumber - wbits, but then we need to set isNeg here.\n        nextN += _1n; // +256 (carry)\n    }\n    const offsetStart = window * windowSize;\n    const offset = offsetStart + Math.abs(wbits) - 1; // -1 because we skip zero\n    const isZero = wbits === 0; // is current window slice a 0?\n    const isNeg = wbits < 0; // is current window slice negative?\n    const isNegF = window % 2 !== 0; // fake random statement for noise\n    const offsetF = offsetStart; // fake offset for noise\n    return { nextN, offset, isZero, isNeg, isNegF, offsetF };\n}\nfunction validateMSMPoints(points, c) {\n    if (!Array.isArray(points))\n        throw new Error('array expected');\n    points.forEach((p, i) => {\n        if (!(p instanceof c))\n            throw new Error('invalid point at index ' + i);\n    });\n}\nfunction validateMSMScalars(scalars, field) {\n    if (!Array.isArray(scalars))\n        throw new Error('array of scalars expected');\n    scalars.forEach((s, i) => {\n        if (!field.isValid(s))\n            throw new Error('invalid scalar at index ' + i);\n    });\n}\n// Since points in different groups cannot be equal (different object constructor),\n// we can have single place to store precomputes.\n// Allows to make points frozen / immutable.\nconst pointPrecomputes = new WeakMap();\nconst pointWindowSizes = new WeakMap();\nfunction getW(P) {\n    return pointWindowSizes.get(P) || 1;\n}\nfunction assert0(n) {\n    if (n !== _0n)\n        throw new Error('invalid wNAF');\n}\n/**\n * Elliptic curve multiplication of Point by scalar. Fragile.\n * Scalars should always be less than curve order: this should be checked inside of a curve itself.\n * Creates precomputation tables for fast multiplication:\n * - private scalar is split by fixed size windows of W bits\n * - every window point is collected from window's table & added to accumulator\n * - since windows are different, same point inside tables won't be accessed more than once per calc\n * - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n * - +1 window is neccessary for wNAF\n * - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n *\n * @todo Research returning 2d JS array of windows, instead of a single window.\n * This would allow windows to be in different memory locations\n */\nfunction wNAF(c, bits) {\n    return {\n        constTimeNegate: negateCt,\n        hasPrecomputes(elm) {\n            return getW(elm) !== 1;\n        },\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n, p = c.ZERO) {\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(1) * (Math.ceil( / ) + 1), where:\n         * -  is the window size\n         * -  is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @param elm Point instance\n         * @param W window size\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = calcWOpts(W, bits);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // i=1, bc we skip 0\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // Smaller version:\n            // https://github.com/paulmillr/noble-secp256k1/blob/47cb1669b6e506ad66b35fe7d76132ae97465da2/index.ts#L502-L541\n            // TODO: check the scalar is less than group order?\n            // wNAF behavior is undefined otherwise. But have to carefully remove\n            // other checks before wNAF. ORDER == bits here.\n            // Accumulators\n            let p = c.ZERO;\n            let f = c.BASE;\n            // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n            // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n            // there is negate now: it is possible that negated element from low value\n            // would be the same as high element, which will create carry into next window.\n            // It's not obvious how this can fail, but still worth investigating later.\n            const wo = calcWOpts(W, bits);\n            for (let window = 0; window < wo.windows; window++) {\n                // (n === _0n) is handled and not early-exited. isEven and offsetF are used for noise\n                const { nextN, offset, isZero, isNeg, isNegF, offsetF } = calcOffsets(n, window, wo);\n                n = nextN;\n                if (isZero) {\n                    // bits are 0: add garbage to fake point\n                    // Important part for const-time getPublicKey: add random \"noise\" point to f.\n                    f = f.add(negateCt(isNegF, precomputes[offsetF]));\n                }\n                else {\n                    // bits are 1: add to result point\n                    p = p.add(negateCt(isNeg, precomputes[offset]));\n                }\n            }\n            assert0(n);\n            // Return both real and fake points: JIT won't eliminate f.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        /**\n         * Implements ec unsafe (non const-time) multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @param acc accumulator point to add result of multiplication\n         * @returns point\n         */\n        wNAFUnsafe(W, precomputes, n, acc = c.ZERO) {\n            const wo = calcWOpts(W, bits);\n            for (let window = 0; window < wo.windows; window++) {\n                if (n === _0n)\n                    break; // Early-exit, skip 0 value\n                const { nextN, offset, isZero, isNeg } = calcOffsets(n, window, wo);\n                n = nextN;\n                if (isZero) {\n                    // Window bits are 0: skip processing.\n                    // Move to next window.\n                    continue;\n                }\n                else {\n                    const item = precomputes[offset];\n                    acc = acc.add(isNeg ? item.negate() : item); // Re-using acc allows to save adds in MSM\n                }\n            }\n            assert0(n);\n            return acc;\n        },\n        getPrecomputes(W, P, transform) {\n            // Calculate precomputes on a first run, reuse them after\n            let comp = pointPrecomputes.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    // Doing transform outside of if brings 15% perf hit\n                    if (typeof transform === 'function')\n                        comp = transform(comp);\n                    pointPrecomputes.set(P, comp);\n                }\n            }\n            return comp;\n        },\n        wNAFCached(P, n, transform) {\n            const W = getW(P);\n            return this.wNAF(W, this.getPrecomputes(W, P, transform), n);\n        },\n        wNAFCachedUnsafe(P, n, transform, prev) {\n            const W = getW(P);\n            if (W === 1)\n                return this.unsafeLadder(P, n, prev); // For W=1 ladder is ~x2 faster\n            return this.wNAFUnsafe(W, this.getPrecomputes(W, P, transform), n, prev);\n        },\n        // We calculate precomputes for elliptic curve point multiplication\n        // using windowed method. This specifies window size and\n        // stores precomputed values. Usually only base point would be precomputed.\n        setWindowSize(P, W) {\n            validateW(W, bits);\n            pointWindowSizes.set(P, W);\n            pointPrecomputes.delete(P);\n        },\n    };\n}\n/**\n * Endomorphism-specific multiplication for Koblitz curves.\n * Cost: 128 dbl, 0-256 adds.\n */\nfunction mulEndoUnsafe(c, point, k1, k2) {\n    let acc = point;\n    let p1 = c.ZERO;\n    let p2 = c.ZERO;\n    while (k1 > _0n || k2 > _0n) {\n        if (k1 & _1n)\n            p1 = p1.add(acc);\n        if (k2 & _1n)\n            p2 = p2.add(acc);\n        acc = acc.double();\n        k1 >>= _1n;\n        k2 >>= _1n;\n    }\n    return { p1, p2 };\n}\n/**\n * Pippenger algorithm for multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * 30x faster vs naive addition on L=4096, 10x faster than precomputes.\n * For N=254bit, L=1, it does: 1024 ADD + 254 DBL. For L=5: 1536 ADD + 254 DBL.\n * Algorithmically constant-time (for same L), even when 1 point + scalar, or when scalar = 0.\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @param scalars array of L scalars (aka private keys / bigints)\n */\nfunction pippenger(c, fieldN, points, scalars) {\n    // If we split scalars by some window (let's say 8 bits), every chunk will only\n    // take 256 buckets even if there are 4096 scalars, also re-uses double.\n    // TODO:\n    // - https://eprint.iacr.org/2024/750.pdf\n    // - https://tches.iacr.org/index.php/TCHES/article/view/10287\n    // 0 is accepted in scalars\n    validateMSMPoints(points, c);\n    validateMSMScalars(scalars, fieldN);\n    const plength = points.length;\n    const slength = scalars.length;\n    if (plength !== slength)\n        throw new Error('arrays of points and scalars must have equal length');\n    // if (plength === 0) throw new Error('array must be of length >= 2');\n    const zero = c.ZERO;\n    const wbits = (0, utils_ts_1.bitLen)(BigInt(plength));\n    let windowSize = 1; // bits\n    if (wbits > 12)\n        windowSize = wbits - 3;\n    else if (wbits > 4)\n        windowSize = wbits - 2;\n    else if (wbits > 0)\n        windowSize = 2;\n    const MASK = (0, utils_ts_1.bitMask)(windowSize);\n    const buckets = new Array(Number(MASK) + 1).fill(zero); // +1 for zero array\n    const lastBits = Math.floor((fieldN.BITS - 1) / windowSize) * windowSize;\n    let sum = zero;\n    for (let i = lastBits; i >= 0; i -= windowSize) {\n        buckets.fill(zero);\n        for (let j = 0; j < slength; j++) {\n            const scalar = scalars[j];\n            const wbits = Number((scalar >> BigInt(i)) & MASK);\n            buckets[wbits] = buckets[wbits].add(points[j]);\n        }\n        let resI = zero; // not using this will do small speed-up, but will lose ct\n        // Skip first bucket, because it is zero\n        for (let j = buckets.length - 1, sumI = zero; j > 0; j--) {\n            sumI = sumI.add(buckets[j]);\n            resI = resI.add(sumI);\n        }\n        sum = sum.add(resI);\n        if (i !== 0)\n            for (let j = 0; j < windowSize; j++)\n                sum = sum.double();\n    }\n    return sum;\n}\n/**\n * Precomputed multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @returns function which multiplies points with scaars\n */\nfunction precomputeMSMUnsafe(c, fieldN, points, windowSize) {\n    /**\n     * Performance Analysis of Window-based Precomputation\n     *\n     * Base Case (256-bit scalar, 8-bit window):\n     * - Standard precomputation requires:\n     *   - 31 additions per scalar  256 scalars = 7,936 ops\n     *   - Plus 255 summary additions = 8,191 total ops\n     *   Note: Summary additions can be optimized via accumulator\n     *\n     * Chunked Precomputation Analysis:\n     * - Using 32 chunks requires:\n     *   - 255 additions per chunk\n     *   - 256 doublings\n     *   - Total: (255  32) + 256 = 8,416 ops\n     *\n     * Memory Usage Comparison:\n     * Window Size | Standard Points | Chunked Points\n     * ------------|-----------------|---------------\n     *     4-bit   |     520         |      15\n     *     8-bit   |    4,224        |     255\n     *    10-bit   |   13,824        |   1,023\n     *    16-bit   |  557,056        |  65,535\n     *\n     * Key Advantages:\n     * 1. Enables larger window sizes due to reduced memory overhead\n     * 2. More efficient for smaller scalar counts:\n     *    - 16 chunks: (16  255) + 256 = 4,336 ops\n     *    - ~2x faster than standard 8,191 ops\n     *\n     * Limitations:\n     * - Not suitable for plain precomputes (requires 256 constant doublings)\n     * - Performance degrades with larger scalar counts:\n     *   - Optimal for ~256 scalars\n     *   - Less efficient for 4096+ scalars (Pippenger preferred)\n     */\n    validateW(windowSize, fieldN.BITS);\n    validateMSMPoints(points, c);\n    const zero = c.ZERO;\n    const tableSize = 2 ** windowSize - 1; // table size (without zero)\n    const chunks = Math.ceil(fieldN.BITS / windowSize); // chunks of item\n    const MASK = (0, utils_ts_1.bitMask)(windowSize);\n    const tables = points.map((p) => {\n        const res = [];\n        for (let i = 0, acc = p; i < tableSize; i++) {\n            res.push(acc);\n            acc = acc.add(p);\n        }\n        return res;\n    });\n    return (scalars) => {\n        validateMSMScalars(scalars, fieldN);\n        if (scalars.length > points.length)\n            throw new Error('array of scalars must be smaller than array of points');\n        let res = zero;\n        for (let i = 0; i < chunks; i++) {\n            // No need to double if accumulator is still zero.\n            if (res !== zero)\n                for (let j = 0; j < windowSize; j++)\n                    res = res.double();\n            const shiftBy = BigInt(chunks * windowSize - (i + 1) * windowSize);\n            for (let j = 0; j < scalars.length; j++) {\n                const n = scalars[j];\n                const curr = Number((n >> shiftBy) & MASK);\n                if (!curr)\n                    continue; // skip zero scalars chunks\n                res = res.add(tables[j][curr - 1]);\n            }\n        }\n        return res;\n    };\n}\n// TODO: remove\n/** @deprecated */\nfunction validateBasic(curve) {\n    (0, modular_ts_1.validateField)(curve.Fp);\n    (0, utils_ts_1.validateObject)(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...(0, modular_ts_1.nLength)(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\nfunction createField(order, field) {\n    if (field) {\n        if (field.ORDER !== order)\n            throw new Error('Field.ORDER must match order: Fp == p, Fn == n');\n        (0, modular_ts_1.validateField)(field);\n        return field;\n    }\n    else {\n        return (0, modular_ts_1.Field)(order);\n    }\n}\n/** Validates CURVE opts and creates fields */\nfunction _createCurveFields(type, CURVE, curveOpts = {}) {\n    if (!CURVE || typeof CURVE !== 'object')\n        throw new Error(`expected valid ${type} CURVE object`);\n    for (const p of ['p', 'n', 'h']) {\n        const val = CURVE[p];\n        if (!(typeof val === 'bigint' && val > _0n))\n            throw new Error(`CURVE.${p} must be positive bigint`);\n    }\n    const Fp = createField(CURVE.p, curveOpts.Fp);\n    const Fn = createField(CURVE.n, curveOpts.Fn);\n    const _b = type === 'weierstrass' ? 'b' : 'd';\n    const params = ['Gx', 'Gy', 'a', _b];\n    for (const p of params) {\n        // @ts-ignore\n        if (!Fp.isValid(CURVE[p]))\n            throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);\n    }\n    return { Fp, Fn };\n}\n//# sourceMappingURL=curve.js.map","'use strict';\n\n/**\n * @enum {number}\n */\nexports.MT = {\n  POS_INT: 0,\n  NEG_INT: 1,\n  BYTE_STRING: 2,\n  UTF8_STRING: 3,\n  ARRAY: 4,\n  MAP: 5,\n  TAG: 6,\n  SIMPLE_FLOAT: 7,\n};\n\n/**\n * @enum {number}\n */\nexports.TAG = {\n  DATE_STRING: 0,\n  DATE_EPOCH: 1,\n  POS_BIGINT: 2,\n  NEG_BIGINT: 3,\n  DECIMAL_FRAC: 4,\n  BIGFLOAT: 5,\n  BASE64URL_EXPECTED: 21,\n  BASE64_EXPECTED: 22,\n  BASE16_EXPECTED: 23,\n  CBOR: 24,\n  URI: 32,\n  BASE64URL: 33,\n  BASE64: 34,\n  REGEXP: 35,\n  MIME: 36,\n  // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n  SET: 258,\n};\n\n/**\n * @enum {number}\n */\nexports.NUMBYTES = {\n  ZERO: 0,\n  ONE: 24,\n  TWO: 25,\n  FOUR: 26,\n  EIGHT: 27,\n  INDEFINITE: 31,\n};\n\n/**\n * @enum {number}\n */\nexports.SIMPLE = {\n  FALSE: 20,\n  TRUE: 21,\n  NULL: 22,\n  UNDEFINED: 23,\n};\n\nexports.SYMS = {\n  NULL: Symbol.for('github.com/hildjj/node-cbor/null'),\n  UNDEFINED: Symbol.for('github.com/hildjj/node-cbor/undef'),\n  PARENT: Symbol.for('github.com/hildjj/node-cbor/parent'),\n  BREAK: Symbol.for('github.com/hildjj/node-cbor/break'),\n  STREAM: Symbol.for('github.com/hildjj/node-cbor/stream'),\n};\n\nexports.SHIFT32 = 0x100000000;\n\nexports.BI = {\n  MINUS_ONE: BigInt(-1),\n  NEG_MAX: BigInt(-1) - BigInt(Number.MAX_SAFE_INTEGER),\n  MAXINT32: BigInt('0xffffffff'),\n  MAXINT64: BigInt('0xffffffffffffffff'),\n  SHIFT32: BigInt(exports.SHIFT32),\n};\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/lib/_stream_readable.js');\nStream.Writable = require('readable-stream/lib/_stream_writable.js');\nStream.Duplex = require('readable-stream/lib/_stream_duplex.js');\nStream.Transform = require('readable-stream/lib/_stream_transform.js');\nStream.PassThrough = require('readable-stream/lib/_stream_passthrough.js');\nStream.finished = require('readable-stream/lib/internal/streams/end-of-stream.js')\nStream.pipeline = require('readable-stream/lib/internal/streams/pipeline.js')\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","'use strict';\n\nconst constants = require('./constants');\nconst utils = require('./utils');\nconst INTERNAL_JSON = Symbol('INTERNAL_JSON');\n\nfunction setBuffersToJSON(obj, fn) {\n  // The data item tagged can be a byte string or any other data item.  In the\n  // latter case, the tag applies to all of the byte string data items\n  // contained in the data item, except for those contained in a nested data\n  // item tagged with an expected conversion.\n  if (utils.isBufferish(obj)) {\n    obj.toJSON = fn;\n  } else if (Array.isArray(obj)) {\n    for (const v of obj) {\n      setBuffersToJSON(v, fn);\n    }\n  } else if (obj && (typeof obj === 'object')) {\n    // FFS, complexity in the protocol.\n\n    // There's some circular dependency in here.\n    // eslint-disable-next-line no-use-before-define\n    if (!(obj instanceof Tagged) || (obj.tag < 21) || (obj.tag > 23)) {\n      for (const v of Object.values(obj)) {\n        setBuffersToJSON(v, fn);\n      }\n    }\n  }\n}\n\nfunction b64this() {\n  // eslint-disable-next-line no-invalid-this\n  return utils.base64(this);\n}\n\nfunction b64urlThis() {\n  // eslint-disable-next-line no-invalid-this\n  return utils.base64url(this);\n}\n\nfunction hexThis() {\n  // eslint-disable-next-line no-invalid-this\n  return this.toString('hex');\n}\n\nfunction swapEndian(ab, size, byteOffset, byteLength) {\n  const dv = new DataView(ab);\n  const [getter, setter] = {\n    2: [dv.getUint16, dv.setUint16],\n    4: [dv.getUint32, dv.setUint32],\n    8: [dv.getBigUint64, dv.setBigUint64],\n  }[size];\n\n  const end = byteOffset + byteLength;\n  for (let offset = byteOffset; offset < end; offset += size) {\n    setter.call(dv, offset, getter.call(dv, offset, true));\n  }\n}\n\n/**\n * Convert a tagged value to a more interesting JavaScript type.  Errors\n * thrown in this function will be captured into the \"err\" property of the\n * original Tagged instance.\n *\n * @callback TagFunction\n * @param {any} value The value inside the tag.\n * @param {Tagged} tag The enclosing Tagged instance; useful if you want to\n *   modify it and return it.  Also available as \"this\".\n * @returns {any} The transformed value.\n */\n\n/**\n * A mapping from tag number to a tag decoding function.\n *\n * @typedef {Object.<string, TagFunction>} TagMap\n */\n\n/**\n * @type {TagMap}\n * @private\n */\nconst TAGS = {\n  // Standard date/time string; see Section 3.4.1\n  0: v => new Date(v),\n  // Epoch-based date/time; see Section 3.4.2\n  1: v => new Date(v * 1000),\n  // Positive bignum; see Section 3.4.3\n  2: v => utils.bufferToBigInt(v),\n  // Negative bignum; see Section 3.4.3\n  3: v => constants.BI.MINUS_ONE - utils.bufferToBigInt(v),\n  // Expected conversion to base64url encoding; see Section 3.4.5.2\n  21: (v, tag) => {\n    if (utils.isBufferish(v)) {\n      tag[INTERNAL_JSON] = b64urlThis;\n    } else {\n      setBuffersToJSON(v, b64urlThis);\n    }\n    return tag;\n  },\n  // Expected conversion to base64 encoding; see Section 3.4.5.2\n  22: (v, tag) => {\n    if (utils.isBufferish(v)) {\n      tag[INTERNAL_JSON] = b64this;\n    } else {\n      setBuffersToJSON(v, b64this);\n    }\n    return tag;\n  },\n  // Expected conversion to base16 encoding; see Section Section 3.4.5.2\n  23: (v, tag) => {\n    if (utils.isBufferish(v)) {\n      tag[INTERNAL_JSON] = hexThis;\n    } else {\n      setBuffersToJSON(v, hexThis);\n    }\n    return tag;\n  },\n  // URI; see Section 3.4.5.3\n  32: v => new URL(v),\n  // Base64url; see Section 3.4.5.3\n  33: (v, tag) => {\n    // If any of the following apply:\n    // -  the encoded text string contains non-alphabet characters or\n    //    only 1 alphabet character in the last block of 4 (where\n    //    alphabet is defined by Section 5 of [RFC4648] for tag number 33\n    //    and Section 4 of [RFC4648] for tag number 34), or\n    if (!v.match(/^[a-zA-Z0-9_-]+$/)) {\n      throw new Error('Invalid base64url characters');\n    }\n    const last = v.length % 4;\n    if (last === 1) {\n      throw new Error('Invalid base64url length');\n    }\n    // -  the padding bits in a 2- or 3-character block are not 0, or\n    if (last === 2) {\n      // The last 4 bits of the last character need to be zero.\n      if ('AQgw'.indexOf(v[v.length - 1]) === -1) {\n        throw new Error('Invalid base64 padding');\n      }\n    } else if (last === 3) {\n      // The last 2 bits of the last character need to be zero.\n      if ('AEIMQUYcgkosw048'.indexOf(v[v.length - 1]) === -1) {\n        throw new Error('Invalid base64 padding');\n      }\n    }\n\n    //    Or\n    // -  the base64url encoding has padding characters,\n    // (caught above)\n\n    // the string is invalid.\n    return tag;\n  },\n  // Base64; see Section 3.4.5.3\n  34: (v, tag) => {\n    // If any of the following apply:\n    // -  the encoded text string contains non-alphabet characters or\n    //    only 1 alphabet character in the last block of 4 (where\n    //    alphabet is defined by Section 5 of [RFC4648] for tag number 33\n    //    and Section 4 of [RFC4648] for tag number 34), or\n    const m = v.match(/^[a-zA-Z0-9+/]+(?<padding>={0,2})$/);\n    if (!m) {\n      throw new Error('Invalid base64 characters');\n    }\n    if ((v.length % 4) !== 0) {\n      throw new Error('Invalid base64 length');\n    }\n    // -  the padding bits in a 2- or 3-character block are not 0, or\n    if (m.groups.padding === '=') {\n      // The last 4 bits of the last character need to be zero.\n      if ('AQgw'.indexOf(v[v.length - 2]) === -1) {\n        throw new Error('Invalid base64 padding');\n      }\n    } else if (m.groups.padding === '==') {\n      // The last 2 bits of the last character need to be zero.\n      if ('AEIMQUYcgkosw048'.indexOf(v[v.length - 3]) === -1) {\n        throw new Error('Invalid base64 padding');\n      }\n    }\n\n    // -  the base64 encoding has the wrong number of padding characters,\n    // (caught above)\n    // the string is invalid.\n    return tag;\n  },\n  // Regular expression; see Section 2.4.4.3\n  35: v => new RegExp(v),\n  // https://github.com/input-output-hk/cbor-sets-spec/blob/master/CBOR_SETS.md\n  258: v => new Set(v),\n};\n\nconst TYPED_ARRAY_TAGS = {\n  64: Uint8Array,\n  65: Uint16Array,\n  66: Uint32Array,\n  // 67: BigUint64Array,  Safari doesn't implement\n  68: Uint8ClampedArray,\n  69: Uint16Array,\n  70: Uint32Array,\n  // 71: BigUint64Array,  Safari doesn't implement\n  72: Int8Array,\n  73: Int16Array,\n  74: Int32Array,\n  // 75: BigInt64Array,  Safari doesn't implement\n  // 76: reserved\n  77: Int16Array,\n  78: Int32Array,\n  // 79: BigInt64Array,  Safari doesn't implement\n  // 80: not implemented, float16 array\n  81: Float32Array,\n  82: Float64Array,\n  // 83: not implemented, float128 array\n  // 84: not implemented, float16 array\n  85: Float32Array,\n  86: Float64Array,\n  // 87: not implemented, float128 array\n};\n\n// Safari\nif (typeof BigUint64Array !== 'undefined') {\n  TYPED_ARRAY_TAGS[67] = BigUint64Array;\n  TYPED_ARRAY_TAGS[71] = BigUint64Array;\n}\nif (typeof BigInt64Array !== 'undefined') {\n  TYPED_ARRAY_TAGS[75] = BigInt64Array;\n  TYPED_ARRAY_TAGS[79] = BigInt64Array;\n}\n\nfunction toTypedArray(val, tagged) {\n  if (!utils.isBufferish(val)) {\n    throw new TypeError('val not a buffer');\n  }\n  const {tag} = tagged;\n  // See https://tools.ietf.org/html/rfc8746\n  const TypedClass = TYPED_ARRAY_TAGS[tag];\n  if (!TypedClass) {\n    throw new Error(`Invalid typed array tag: ${tag}`);\n  }\n  const little = tag & 0b00000100;\n  const float = (tag & 0b00010000) >> 4;\n  const sz = 2 ** (float + (tag & 0b00000011));\n\n  if ((!little !== utils.isBigEndian()) && (sz > 1)) {\n    swapEndian(val.buffer, sz, val.byteOffset, val.byteLength);\n  }\n\n  const ab = val.buffer.slice(val.byteOffset, val.byteOffset + val.byteLength);\n  return new TypedClass(ab);\n}\n\nfor (const n of Object.keys(TYPED_ARRAY_TAGS)) {\n  TAGS[n] = toTypedArray;\n}\n\n/**\n * @type {TagMap}\n * @private\n */\nlet current_TAGS = {};\n\n/**\n * A CBOR tagged item, where the tag does not have semantics specified at the\n * moment, or those semantics threw an error during parsing. Typically this will\n * be an extension point you're not yet expecting.\n */\nclass Tagged {\n  /**\n   * Creates an instance of Tagged.\n   *\n   * @param {number} tag The number of the tag.\n   * @param {any} value The value inside the tag.\n   * @param {Error} [err] The error that was thrown parsing the tag, or null.\n   */\n  constructor(tag, value, err) {\n    this.tag = tag;\n    this.value = value;\n    this.err = err;\n    if (typeof this.tag !== 'number') {\n      throw new Error(`Invalid tag type (${typeof this.tag})`);\n    }\n    if ((this.tag < 0) || ((this.tag | 0) !== this.tag)) {\n      throw new Error(`Tag must be a positive integer: ${this.tag}`);\n    }\n  }\n\n  toJSON() {\n    if (this[INTERNAL_JSON]) {\n      return this[INTERNAL_JSON].call(this.value);\n    }\n    const ret = {\n      tag: this.tag,\n      value: this.value,\n    };\n    if (this.err) {\n      ret.err = this.err;\n    }\n    return ret;\n  }\n\n  /**\n   * Convert to a String.\n   *\n   * @returns {string} String of the form '1(2)'.\n   */\n  toString() {\n    return `${this.tag}(${JSON.stringify(this.value)})`;\n  }\n\n  /**\n   * Push the simple value onto the CBOR stream.\n   *\n   * @param {object} gen The generator to push onto.\n   * @returns {boolean} True on success.\n   */\n  encodeCBOR(gen) {\n    gen._pushTag(this.tag);\n    return gen.pushAny(this.value);\n  }\n\n  /**\n   * If we have a converter for this type, do the conversion.  Some converters\n   * are built-in.  Additional ones can be passed in.  If you want to remove\n   * a built-in converter, pass a converter in whose value is 'null' instead\n   * of a function.\n   *\n   * @param {object} converters Keys in the object are a tag number, the value\n   *   is a function that takes the decoded CBOR and returns a JavaScript value\n   *   of the appropriate type.  Throw an exception in the function on errors.\n   * @returns {any} The converted item.\n   */\n  convert(converters) {\n    let f = (converters == null) ? undefined : converters[this.tag];\n    if (f === null) { // === is intentional. null has semantic meaning as above\n      return this;\n    }\n    if (typeof f !== 'function') {\n      f = Tagged.TAGS[this.tag];\n      if (typeof f !== 'function') {\n        return this;\n      }\n    }\n    try {\n      return f.call(this, this.value, this);\n    } catch (error) {\n      if (error && error.message && (error.message.length > 0)) {\n        this.err = error.message;\n      } else {\n        this.err = error;\n      }\n      return this;\n    }\n  }\n\n  /**\n   * The current set of supported tags.  May be modified by plugins.\n   *\n   * @type {TagMap}\n   * @static\n   */\n  static get TAGS() {\n    return current_TAGS;\n  }\n\n  static set TAGS(val) {\n    current_TAGS = val;\n  }\n\n  /**\n   * Reset the supported tags to the original set, before any plugins modified\n   * the list.\n   */\n  static reset() {\n    Tagged.TAGS = {...TAGS};\n  }\n}\nTagged.INTERNAL_JSON = INTERNAL_JSON;\nTagged.reset();\nmodule.exports = Tagged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DER = exports.DERErr = void 0;\nexports._legacyHelperEquat = _legacyHelperEquat;\nexports._legacyHelperNormPriv = _legacyHelperNormPriv;\nexports.weierstrassN = weierstrassN;\nexports.weierstrassPoints = weierstrassPoints;\nexports.ecdsa = ecdsa;\nexports.weierstrass = weierstrass;\nexports.SWUFpSqrtRatio = SWUFpSqrtRatio;\nexports.mapToCurveSimpleSWU = mapToCurveSimpleSWU;\n/**\n * Short Weierstrass curve methods. The formula is: y = x + ax + b.\n *\n * ### Design rationale for types\n *\n * * Interaction between classes from different curves should fail:\n *   `k256.Point.BASE.add(p256.Point.BASE)`\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\n * * Different calls of `curve()` would return different classes -\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\n *   it won't affect others\n *\n * TypeScript can't infer types for classes created inside a function. Classes is one instance\n * of nominative types in TypeScript and interfaces only check for shape, so it's hard to create\n * unique type for every function call.\n *\n * We can use generic types via some param, like curve opts, but that would:\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\n *     which is hard to debug.\n *     2. Params can be generic and we can't enforce them to be constant value:\n *     if somebody creates curve from non-constant params,\n *     it would be allowed to interact with other curves with non-constant params\n *\n * @todo https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst hmac_js_1 = require(\"@noble/hashes/hmac.js\");\nconst utils_ts_1 = require(\"../utils.js\");\nconst curve_ts_1 = require(\"./curve.js\");\nconst modular_ts_1 = require(\"./modular.js\");\nfunction validateSigVerOpts(opts) {\n    if (opts.lowS !== undefined)\n        (0, utils_ts_1.abool)('lowS', opts.lowS);\n    if (opts.prehash !== undefined)\n        (0, utils_ts_1.abool)('prehash', opts.prehash);\n}\nclass DERErr extends Error {\n    constructor(m = '') {\n        super(m);\n    }\n}\nexports.DERErr = DERErr;\n/**\n * ASN.1 DER encoding utilities. ASN is very complex & fragile. Format:\n *\n *     [0x30 (SEQUENCE), bytelength, 0x02 (INTEGER), intLength, R, 0x02 (INTEGER), intLength, S]\n *\n * Docs: https://letsencrypt.org/docs/a-warm-welcome-to-asn1-and-der/, https://luca.ntop.org/Teaching/Appunti/asn1.html\n */\nexports.DER = {\n    // asn.1 DER encoding utils\n    Err: DERErr,\n    // Basic building block is TLV (Tag-Length-Value)\n    _tlv: {\n        encode: (tag, data) => {\n            const { Err: E } = exports.DER;\n            if (tag < 0 || tag > 256)\n                throw new E('tlv.encode: wrong tag');\n            if (data.length & 1)\n                throw new E('tlv.encode: unpadded data');\n            const dataLen = data.length / 2;\n            const len = (0, utils_ts_1.numberToHexUnpadded)(dataLen);\n            if ((len.length / 2) & 128)\n                throw new E('tlv.encode: long form length too big');\n            // length of length with long form flag\n            const lenLen = dataLen > 127 ? (0, utils_ts_1.numberToHexUnpadded)((len.length / 2) | 128) : '';\n            const t = (0, utils_ts_1.numberToHexUnpadded)(tag);\n            return t + lenLen + len + data;\n        },\n        // v - value, l - left bytes (unparsed)\n        decode(tag, data) {\n            const { Err: E } = exports.DER;\n            let pos = 0;\n            if (tag < 0 || tag > 256)\n                throw new E('tlv.encode: wrong tag');\n            if (data.length < 2 || data[pos++] !== tag)\n                throw new E('tlv.decode: wrong tlv');\n            const first = data[pos++];\n            const isLong = !!(first & 128); // First bit of first length byte is flag for short/long form\n            let length = 0;\n            if (!isLong)\n                length = first;\n            else {\n                // Long form: [longFlag(1bit), lengthLength(7bit), length (BE)]\n                const lenLen = first & 127;\n                if (!lenLen)\n                    throw new E('tlv.decode(long): indefinite length not supported');\n                if (lenLen > 4)\n                    throw new E('tlv.decode(long): byte length is too big'); // this will overflow u32 in js\n                const lengthBytes = data.subarray(pos, pos + lenLen);\n                if (lengthBytes.length !== lenLen)\n                    throw new E('tlv.decode: length bytes not complete');\n                if (lengthBytes[0] === 0)\n                    throw new E('tlv.decode(long): zero leftmost byte');\n                for (const b of lengthBytes)\n                    length = (length << 8) | b;\n                pos += lenLen;\n                if (length < 128)\n                    throw new E('tlv.decode(long): not minimal encoding');\n            }\n            const v = data.subarray(pos, pos + length);\n            if (v.length !== length)\n                throw new E('tlv.decode: wrong value length');\n            return { v, l: data.subarray(pos + length) };\n        },\n    },\n    // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n    // since we always use positive integers here. It must always be empty:\n    // - add zero byte if exists\n    // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n    _int: {\n        encode(num) {\n            const { Err: E } = exports.DER;\n            if (num < _0n)\n                throw new E('integer: negative integers are not allowed');\n            let hex = (0, utils_ts_1.numberToHexUnpadded)(num);\n            // Pad with zero byte if negative flag is present\n            if (Number.parseInt(hex[0], 16) & 0b1000)\n                hex = '00' + hex;\n            if (hex.length & 1)\n                throw new E('unexpected DER parsing assertion: unpadded hex');\n            return hex;\n        },\n        decode(data) {\n            const { Err: E } = exports.DER;\n            if (data[0] & 128)\n                throw new E('invalid signature integer: negative');\n            if (data[0] === 0x00 && !(data[1] & 128))\n                throw new E('invalid signature integer: unnecessary leading zero');\n            return (0, utils_ts_1.bytesToNumberBE)(data);\n        },\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E, _int: int, _tlv: tlv } = exports.DER;\n        const data = (0, utils_ts_1.ensureBytes)('signature', hex);\n        const { v: seqBytes, l: seqLeftBytes } = tlv.decode(0x30, data);\n        if (seqLeftBytes.length)\n            throw new E('invalid signature: left bytes after parsing');\n        const { v: rBytes, l: rLeftBytes } = tlv.decode(0x02, seqBytes);\n        const { v: sBytes, l: sLeftBytes } = tlv.decode(0x02, rLeftBytes);\n        if (sLeftBytes.length)\n            throw new E('invalid signature: left bytes after parsing');\n        return { r: int.decode(rBytes), s: int.decode(sBytes) };\n    },\n    hexFromSig(sig) {\n        const { _tlv: tlv, _int: int } = exports.DER;\n        const rs = tlv.encode(0x02, int.encode(sig.r));\n        const ss = tlv.encode(0x02, int.encode(sig.s));\n        const seq = rs + ss;\n        return tlv.encode(0x30, seq);\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\n// TODO: remove\nfunction _legacyHelperEquat(Fp, a, b) {\n    /**\n     * y = x + ax + b: Short weierstrass curve formula. Takes x, returns y.\n     * @returns y\n     */\n    function weierstrassEquation(x) {\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x + a * x + b\n    }\n    return weierstrassEquation;\n}\nfunction _legacyHelperNormPriv(Fn, allowedPrivateKeyLengths, wrapPrivateKey) {\n    const { BYTES: expected } = Fn;\n    // Validates if priv key is valid and converts it to bigint.\n    function normPrivateKeyToScalar(key) {\n        let num;\n        if (typeof key === 'bigint') {\n            num = key;\n        }\n        else {\n            let bytes = (0, utils_ts_1.ensureBytes)('private key', key);\n            if (allowedPrivateKeyLengths) {\n                if (!allowedPrivateKeyLengths.includes(bytes.length * 2))\n                    throw new Error('invalid private key');\n                const padded = new Uint8Array(expected);\n                padded.set(bytes, padded.length - bytes.length);\n                bytes = padded;\n            }\n            try {\n                num = Fn.fromBytes(bytes);\n            }\n            catch (error) {\n                throw new Error(`invalid private key: expected ui8a of size ${expected}, got ${typeof key}`);\n            }\n        }\n        if (wrapPrivateKey)\n            num = Fn.create(num); // disabled by default, enabled for BLS\n        if (!Fn.isValidNot0(num))\n            throw new Error('invalid private key: out of range [1..N-1]');\n        return num;\n    }\n    return normPrivateKeyToScalar;\n}\nfunction weierstrassN(CURVE, curveOpts = {}) {\n    const { Fp, Fn } = (0, curve_ts_1._createCurveFields)('weierstrass', CURVE, curveOpts);\n    const { h: cofactor, n: CURVE_ORDER } = CURVE;\n    (0, utils_ts_1._validateObject)(curveOpts, {}, {\n        allowInfinityPoint: 'boolean',\n        clearCofactor: 'function',\n        isTorsionFree: 'function',\n        fromBytes: 'function',\n        toBytes: 'function',\n        endo: 'object',\n        wrapPrivateKey: 'boolean',\n    });\n    const { endo } = curveOpts;\n    if (endo) {\n        // validateObject(endo, { beta: 'bigint', splitScalar: 'function' });\n        if (!Fp.is0(CURVE.a) ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('invalid endo: expected \"beta\": bigint and \"splitScalar\": function');\n        }\n    }\n    function assertCompressionIsSupported() {\n        if (!Fp.isOdd)\n            throw new Error('compression is not supported: Field does not have .isOdd()');\n    }\n    // Implements IEEE P1363 point encoding\n    function pointToBytes(_c, point, isCompressed) {\n        const { x, y } = point.toAffine();\n        const bx = Fp.toBytes(x);\n        (0, utils_ts_1.abool)('isCompressed', isCompressed);\n        if (isCompressed) {\n            assertCompressionIsSupported();\n            const hasEvenY = !Fp.isOdd(y);\n            return (0, utils_ts_1.concatBytes)(pprefix(hasEvenY), bx);\n        }\n        else {\n            return (0, utils_ts_1.concatBytes)(Uint8Array.of(0x04), bx, Fp.toBytes(y));\n        }\n    }\n    function pointFromBytes(bytes) {\n        (0, utils_ts_1.abytes)(bytes);\n        const L = Fp.BYTES;\n        const LC = L + 1; // length compressed, e.g. 33 for 32-byte field\n        const LU = 2 * L + 1; // length uncompressed, e.g. 65 for 32-byte field\n        const length = bytes.length;\n        const head = bytes[0];\n        const tail = bytes.subarray(1);\n        // No actual validation is done here: use .assertValidity()\n        if (length === LC && (head === 0x02 || head === 0x03)) {\n            const x = Fp.fromBytes(tail);\n            if (!Fp.isValid(x))\n                throw new Error('bad point: is not on curve, wrong x');\n            const y2 = weierstrassEquation(x); // y = x + ax + b\n            let y;\n            try {\n                y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n            }\n            catch (sqrtError) {\n                const err = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\n                throw new Error('bad point: is not on curve, sqrt error' + err);\n            }\n            assertCompressionIsSupported();\n            const isYOdd = Fp.isOdd(y); // (y & _1n) === _1n;\n            const isHeadOdd = (head & 1) === 1; // ECDSA-specific\n            if (isHeadOdd !== isYOdd)\n                y = Fp.neg(y);\n            return { x, y };\n        }\n        else if (length === LU && head === 0x04) {\n            // TODO: more checks\n            const x = Fp.fromBytes(tail.subarray(L * 0, L * 1));\n            const y = Fp.fromBytes(tail.subarray(L * 1, L * 2));\n            if (!isValidXY(x, y))\n                throw new Error('bad point: is not on curve');\n            return { x, y };\n        }\n        else {\n            throw new Error(`bad point: got length ${length}, expected compressed=${LC} or uncompressed=${LU}`);\n        }\n    }\n    const toBytes = curveOpts.toBytes || pointToBytes;\n    const fromBytes = curveOpts.fromBytes || pointFromBytes;\n    const weierstrassEquation = _legacyHelperEquat(Fp, CURVE.a, CURVE.b);\n    // TODO: move top-level\n    /** Checks whether equation holds for given x, y: y == x + ax + b */\n    function isValidXY(x, y) {\n        const left = Fp.sqr(y); // y\n        const right = weierstrassEquation(x); // x + ax + b\n        return Fp.eql(left, right);\n    }\n    // Validate whether the passed curve params are valid.\n    // Test 1: equation y = x + ax + b should work for generator point.\n    if (!isValidXY(CURVE.Gx, CURVE.Gy))\n        throw new Error('bad curve params: generator point');\n    // Test 2: discriminant  part should be non-zero: 4a + 27b != 0.\n    // Guarantees curve is genus-1, smooth (non-singular).\n    const _4a3 = Fp.mul(Fp.pow(CURVE.a, _3n), _4n);\n    const _27b2 = Fp.mul(Fp.sqr(CURVE.b), BigInt(27));\n    if (Fp.is0(Fp.add(_4a3, _27b2)))\n        throw new Error('bad curve params: a or b');\n    /** Asserts coordinate is valid: 0 <= n < Fp.ORDER. */\n    function acoord(title, n, banZero = false) {\n        if (!Fp.isValid(n) || (banZero && Fp.is0(n)))\n            throw new Error(`bad point coordinate ${title}`);\n        return n;\n    }\n    function aprjpoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    // Memoized toAffine / validity check. They are heavy. Points are immutable.\n    // Converts Projective point to affine (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    // (X, Y, Z)  (x=X/Z, y=Y/Z)\n    const toAffineMemo = (0, utils_ts_1.memoized)((p, iz) => {\n        const { px: x, py: y, pz: z } = p;\n        // Fast-path for normalized points\n        if (Fp.eql(z, Fp.ONE))\n            return { x, y };\n        const is0 = p.is0();\n        // If invZ was 0, we return zero point. However we still want to execute\n        // all operations, so we replace invZ with a random number, 1.\n        if (iz == null)\n            iz = is0 ? Fp.ONE : Fp.inv(z);\n        const ax = Fp.mul(x, iz);\n        const ay = Fp.mul(y, iz);\n        const zz = Fp.mul(z, iz);\n        if (is0)\n            return { x: Fp.ZERO, y: Fp.ZERO };\n        if (!Fp.eql(zz, Fp.ONE))\n            throw new Error('invZ was invalid');\n        return { x: ax, y: ay };\n    });\n    // NOTE: on exception this will crash 'cached' and no value will be set.\n    // Otherwise true will be return\n    const assertValidMemo = (0, utils_ts_1.memoized)((p) => {\n        if (p.is0()) {\n            // (0, 1, 0) aka ZERO is invalid in most contexts.\n            // In BLS, ZERO can be serialized, so we allow it.\n            // (0, 0, 0) is invalid representation of ZERO.\n            if (curveOpts.allowInfinityPoint && !Fp.is0(p.py))\n                return;\n            throw new Error('bad point: ZERO');\n        }\n        // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n        const { x, y } = p.toAffine();\n        if (!Fp.isValid(x) || !Fp.isValid(y))\n            throw new Error('bad point: x or y not field elements');\n        if (!isValidXY(x, y))\n            throw new Error('bad point: equation left != right');\n        if (!p.isTorsionFree())\n            throw new Error('bad point: not in prime-order subgroup');\n        return true;\n    });\n    function finishEndo(endoBeta, k1p, k2p, k1neg, k2neg) {\n        k2p = new Point(Fp.mul(k2p.px, endoBeta), k2p.py, k2p.pz);\n        k1p = (0, curve_ts_1.negateCt)(k1neg, k1p);\n        k2p = (0, curve_ts_1.negateCt)(k2neg, k2p);\n        return k1p.add(k2p);\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates:(X, Y, Z)  (x=X/Z, y=Y/Z).\n     * Default Point works in 2d / affine coordinates: (x, y).\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n        constructor(px, py, pz) {\n            this.px = acoord('x', px);\n            this.py = acoord('y', py, true);\n            this.pz = acoord('z', pz);\n            Object.freeze(this);\n        }\n        /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            // (0, 0) would've produced (0, 0, 1) - instead, we need (0, 1, 0)\n            if (Fp.is0(x) && Fp.is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        static normalizeZ(points) {\n            return (0, curve_ts_1.normalizeZ)(Point, 'pz', points);\n        }\n        static fromBytes(bytes) {\n            (0, utils_ts_1.abytes)(bytes);\n            return Point.fromHex(bytes);\n        }\n        /** Converts hash string or Uint8Array to Point. */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes((0, utils_ts_1.ensureBytes)('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        /** Multiplies generator point by privateKey. */\n        static fromPrivateKey(privateKey) {\n            const normPrivateKeyToScalar = _legacyHelperNormPriv(Fn, curveOpts.allowedPrivateKeyLengths, curveOpts.wrapPrivateKey);\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        /** Multiscalar Multiplication */\n        static msm(points, scalars) {\n            return (0, curve_ts_1.pippenger)(Point, Fn, points, scalars);\n        }\n        /**\n         *\n         * @param windowSize\n         * @param isLazy true will defer table computation until the first multiplication\n         * @returns\n         */\n        precompute(windowSize = 8, isLazy = true) {\n            wnaf.setWindowSize(this, windowSize);\n            if (!isLazy)\n                this.multiply(_3n); // random number\n            return this;\n        }\n        /** \"Private method\", don't use it directly */\n        _setWindowSize(windowSize) {\n            this.precompute(windowSize);\n        }\n        // TODO: return `this`\n        /** A point on curve is valid if it conforms to equation. */\n        assertValidity() {\n            assertValidMemo(this);\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (!Fp.isOdd)\n                throw new Error(\"Field doesn't support isOdd\");\n            return !Fp.isOdd(y);\n        }\n        /** Compare one point to another. */\n        equals(other) {\n            aprjpoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /** Flips point to one corresponding to (x, -y) in Affine coordinates. */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            aprjpoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            const { endo } = curveOpts;\n            if (!Fn.isValidNot0(scalar))\n                throw new Error('invalid scalar: out of range'); // 0 is invalid\n            let point, fake; // Fake point is used to const-time mult\n            const mul = (n) => wnaf.wNAFCached(this, n, Point.normalizeZ);\n            /** See docs for {@link EndomorphismOpts} */\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(scalar);\n                const { p: k1p, f: k1f } = mul(k1);\n                const { p: k2p, f: k2f } = mul(k2);\n                fake = k1f.add(k2f);\n                point = finishEndo(endo.beta, k1p, k2p, k1neg, k2neg);\n            }\n            else {\n                const { p, f } = mul(scalar);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(sc) {\n            const { endo } = curveOpts;\n            const p = this;\n            if (!Fn.isValid(sc))\n                throw new Error('invalid scalar: out of range'); // 0 is valid\n            if (sc === _0n || p.is0())\n                return Point.ZERO;\n            if (sc === _1n)\n                return p; // fast-path\n            if (wnaf.hasPrecomputes(this))\n                return this.multiply(sc);\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(sc);\n                // `wNAFCachedUnsafe` is 30% slower\n                const { p1, p2 } = (0, curve_ts_1.mulEndoUnsafe)(Point, p, k1, k2);\n                return finishEndo(endo.beta, p1, p2, k1neg, k2neg);\n            }\n            else {\n                return wnaf.wNAFCachedUnsafe(p, sc);\n            }\n        }\n        multiplyAndAddUnsafe(Q, a, b) {\n            const sum = this.multiplyUnsafe(a).add(Q.multiplyUnsafe(b));\n            return sum.is0() ? undefined : sum;\n        }\n        /**\n         * Converts Projective point to affine (x, y) coordinates.\n         * @param invertedZ Z^-1 (inverted zero) - optional, precomputation is useful for invertBatch\n         */\n        toAffine(invertedZ) {\n            return toAffineMemo(this, invertedZ);\n        }\n        /**\n         * Checks whether Point is free of torsion elements (is in prime subgroup).\n         * Always torsion-free for cofactor=1 curves.\n         */\n        isTorsionFree() {\n            const { isTorsionFree } = curveOpts;\n            if (cofactor === _1n)\n                return true;\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            return wnaf.wNAFCachedUnsafe(this, CURVE_ORDER).is0();\n        }\n        clearCofactor() {\n            const { clearCofactor } = curveOpts;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(cofactor);\n        }\n        toBytes(isCompressed = true) {\n            (0, utils_ts_1.abool)('isCompressed', isCompressed);\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        /** @deprecated use `toBytes` */\n        toRawBytes(isCompressed = true) {\n            return this.toBytes(isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return (0, utils_ts_1.bytesToHex)(this.toBytes(isCompressed));\n        }\n        toString() {\n            return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\n        }\n    }\n    // base / generator point\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    // zero / infinity / identity point\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO); // 0, 1, 0\n    // fields\n    Point.Fp = Fp;\n    Point.Fn = Fn;\n    const bits = Fn.BITS;\n    const wnaf = (0, curve_ts_1.wNAF)(Point, curveOpts.endo ? Math.ceil(bits / 2) : bits);\n    return Point;\n}\n// _legacyWeierstrass\n/** @deprecated use `weierstrassN` */\nfunction weierstrassPoints(c) {\n    const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n    const Point = weierstrassN(CURVE, curveOpts);\n    return _weierstrass_new_output_to_legacy(c, Point);\n}\n// Points start with byte 0x02 when y is even; otherwise 0x03\nfunction pprefix(hasEvenY) {\n    return Uint8Array.of(hasEvenY ? 0x02 : 0x03);\n}\nfunction ecdsa(Point, ecdsaOpts, curveOpts = {}) {\n    (0, utils_ts_1._validateObject)(ecdsaOpts, { hash: 'function' }, {\n        hmac: 'function',\n        lowS: 'boolean',\n        randomBytes: 'function',\n        bits2int: 'function',\n        bits2int_modN: 'function',\n    });\n    const randomBytes_ = ecdsaOpts.randomBytes || utils_ts_1.randomBytes;\n    const hmac_ = ecdsaOpts.hmac ||\n        ((key, ...msgs) => (0, hmac_js_1.hmac)(ecdsaOpts.hash, key, (0, utils_ts_1.concatBytes)(...msgs)));\n    const { Fp, Fn } = Point;\n    const { ORDER: CURVE_ORDER, BITS: fnBits } = Fn;\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? Fn.neg(s) : s;\n    }\n    function aValidRS(title, num) {\n        if (!Fn.isValidNot0(num))\n            throw new Error(`invalid signature ${title}: out of range 1..CURVE.n`);\n    }\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            aValidRS('r', r); // r in [1..N-1]\n            aValidRS('s', s); // s in [1..N-1]\n            this.r = r;\n            this.s = s;\n            if (recovery != null)\n                this.recovery = recovery;\n            Object.freeze(this);\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const L = Fn.BYTES;\n            const b = (0, utils_ts_1.ensureBytes)('compactSignature', hex, L * 2);\n            return new Signature(Fn.fromBytes(b.subarray(0, L)), Fn.fromBytes(b.subarray(L, L * 2)));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = exports.DER.toSig((0, utils_ts_1.ensureBytes)('DER', hex));\n            return new Signature(r, s);\n        }\n        /**\n         * @todo remove\n         * @deprecated\n         */\n        assertValidity() { }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        // ProjPointType<bigint>\n        recoverPublicKey(msgHash) {\n            const FIELD_ORDER = Fp.ORDER;\n            const { r, s, recovery: rec } = this;\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            // ECDSA recovery is hard for cofactor > 1 curves.\n            // In sign, `r = q.x mod n`, and here we recover q.x from r.\n            // While recovering q.x >= n, we need to add r+n for cofactor=1 curves.\n            // However, for cofactor>1, r+n may not get q.x:\n            // r+n*i would need to be done instead where i is unknown.\n            // To easily get i, we either need to:\n            // a. increase amount of valid recid values (4, 5...); OR\n            // b. prohibit non-prime-order signatures (recid > 1).\n            const hasCofactor = CURVE_ORDER * _2n < FIELD_ORDER;\n            if (hasCofactor && rec > 1)\n                throw new Error('recovery id is ambiguous for h>1 curve');\n            const radj = rec === 2 || rec === 3 ? r + CURVE_ORDER : r;\n            if (!Fp.isValid(radj))\n                throw new Error('recovery id 2 or 3 invalid');\n            const x = Fp.toBytes(radj);\n            const R = Point.fromHex((0, utils_ts_1.concatBytes)(pprefix((rec & 1) === 0), x));\n            const ir = Fn.inv(radj); // r^-1\n            const h = bits2int_modN((0, utils_ts_1.ensureBytes)('msgHash', msgHash)); // Truncate hash\n            const u1 = Fn.create(-h * ir); // -hr^-1\n            const u2 = Fn.create(s * ir); // sr^-1\n            // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1). unsafe is fine: there is no private data.\n            const Q = Point.BASE.multiplyUnsafe(u1).add(R.multiplyUnsafe(u2));\n            if (Q.is0())\n                throw new Error('point at infinify');\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, Fn.neg(this.s), this.recovery) : this;\n        }\n        toBytes(format) {\n            if (format === 'compact')\n                return (0, utils_ts_1.concatBytes)(Fn.toBytes(this.r), Fn.toBytes(this.s));\n            if (format === 'der')\n                return (0, utils_ts_1.hexToBytes)(exports.DER.hexFromSig(this));\n            throw new Error('invalid format');\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return this.toBytes('der');\n        }\n        toDERHex() {\n            return (0, utils_ts_1.bytesToHex)(this.toBytes('der'));\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return this.toBytes('compact');\n        }\n        toCompactHex() {\n            return (0, utils_ts_1.bytesToHex)(this.toBytes('compact'));\n        }\n    }\n    const normPrivateKeyToScalar = _legacyHelperNormPriv(Fn, curveOpts.allowedPrivateKeyLengths, curveOpts.wrapPrivateKey);\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size\n         * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n         */\n        randomPrivateKey: () => {\n            const n = CURVE_ORDER;\n            return (0, modular_ts_1.mapHashToField)(randomBytes_((0, modular_ts_1.getMinHashLength)(n)), n);\n        },\n        precompute(windowSize = 8, point = Point.BASE) {\n            return point.precompute(windowSize, false);\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        if (typeof item === 'bigint')\n            return false;\n        if (item instanceof Point)\n            return true;\n        const arr = (0, utils_ts_1.ensureBytes)('key', item);\n        const length = arr.length;\n        const L = Fp.BYTES;\n        const LC = L + 1; // e.g. 33 for 32\n        const LU = 2 * L + 1; // e.g. 65 for 32\n        if (curveOpts.allowedPrivateKeyLengths || Fn.BYTES === LC) {\n            return undefined;\n        }\n        else {\n            return length === LC || length === LU;\n        }\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA) === true)\n            throw new Error('first arg must be private key');\n        if (isProbPub(publicB) === false)\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = ecdsaOpts.bits2int ||\n        function (bytes) {\n            // Our custom check \"just in case\", for protection against DoS\n            if (bytes.length > 8192)\n                throw new Error('input is too large');\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = (0, utils_ts_1.bytesToNumberBE)(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - fnBits; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = ecdsaOpts.bits2int_modN ||\n        function (bytes) {\n            return Fn.create(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = (0, utils_ts_1.bitMask)(fnBits);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        // IMPORTANT: the check ensures working for case `Fn.BYTES != Fn.BITS * 8`\n        (0, utils_ts_1.aInRange)('num < 2^' + fnBits, num, _0n, ORDER_MASK);\n        return Fn.toBytes(num);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order,\n    // this will be invalid at least for P521. Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash } = ecdsaOpts;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = (0, utils_ts_1.ensureBytes)('msgHash', msgHash);\n        validateSigVerOpts(opts);\n        if (prehash)\n            msgHash = (0, utils_ts_1.ensureBytes)('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with fnBits % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null && ent !== false) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes_(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push((0, utils_ts_1.ensureBytes)('extraEntropy', e)); // check for being bytes\n        }\n        const seed = (0, utils_ts_1.concatBytes)(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n        // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n        // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            // Important: all mod() calls here must be done over N\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!Fn.isValidNot0(k))\n                return; // Valid scalars (including k) must be in 1..N-1\n            const ik = Fn.inv(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = Fn.create(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            const s = Fn.create(ik * Fn.create(m + r * d)); // Not using blinding here, see comment above\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: ecdsaOpts.lowS, prehash: false };\n    const defaultVerOpts = { lowS: ecdsaOpts.lowS, prehash: false };\n    /**\n     * Signs message hash with a private key.\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G  k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n     * @param privKey private key\n     * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n     * @returns signature with recovery param\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const drbg = (0, utils_ts_1.createHmacDrbg)(ecdsaOpts.hash.outputLen, Fn.BYTES, hmac_);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE.precompute(8);\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1G - U2P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = (0, utils_ts_1.ensureBytes)('msgHash', msgHash);\n        publicKey = (0, utils_ts_1.ensureBytes)('publicKey', publicKey);\n        // Verify opts\n        validateSigVerOpts(opts);\n        const { lowS, prehash, format } = opts;\n        // TODO: remove\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        if (format !== undefined && !['compact', 'der', 'js'].includes(format))\n            throw new Error('format must be \"compact\", \"der\" or \"js\"');\n        const isHex = typeof sg === 'string' || (0, utils_ts_1.isBytes)(sg);\n        const isObj = !isHex &&\n            !format &&\n            typeof sg === 'object' &&\n            sg !== null &&\n            typeof sg.r === 'bigint' &&\n            typeof sg.s === 'bigint';\n        if (!isHex && !isObj)\n            throw new Error('invalid signature, expected Uint8Array, hex string or Signature instance');\n        let _sig = undefined;\n        let P;\n        // deduce signature format\n        try {\n            // if (format === 'js') {\n            //   if (sg != null && !isBytes(sg)) _sig = new Signature(sg.r, sg.s);\n            // } else if (format === 'compact') {\n            //   _sig = Signature.fromCompact(sg);\n            // } else if (format === 'der') {\n            //   _sig = Signature.fromDER(sg);\n            // } else {\n            //   throw new Error('invalid format');\n            // }\n            if (isObj) {\n                if (format === undefined || format === 'js') {\n                    _sig = new Signature(sg.r, sg.s);\n                }\n                else {\n                    throw new Error('invalid format');\n                }\n            }\n            if (isHex) {\n                // TODO: remove this malleable check\n                // Signature can be represented in 2 ways: compact (2*Fn.BYTES) & DER (variable-length).\n                // Since DER can also be 2*Fn.BYTES bytes, we check for it first.\n                try {\n                    if (format !== 'compact')\n                        _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof exports.DER.Err))\n                        throw derError;\n                }\n                if (!_sig && format !== 'der')\n                    _sig = Signature.fromCompact(sg);\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            return false;\n        }\n        if (!_sig)\n            return false;\n        if (lowS && _sig.hasHighS())\n            return false;\n        // todo: optional.hash => hash\n        if (prehash)\n            msgHash = ecdsaOpts.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = Fn.inv(s); // s^-1\n        const u1 = Fn.create(h * is); // u1 = hs^-1 mod n\n        const u2 = Fn.create(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyUnsafe(u1).add(P.multiplyUnsafe(u2));\n        if (R.is0())\n            return false;\n        const v = Fn.create(R.x); // v = r.x mod n\n        return v === r;\n    }\n    // TODO: clarify API for cloning .clone({hash: sha512}) ? .createWith({hash: sha512})?\n    // const clone = (hash: CHash): ECDSA => ecdsa(Point, { ...ecdsaOpts, ...getHash(hash) }, curveOpts);\n    return Object.freeze({\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        utils,\n        Point,\n        Signature,\n    });\n}\nfunction _weierstrass_legacy_opts_to_new(c) {\n    const CURVE = {\n        a: c.a,\n        b: c.b,\n        p: c.Fp.ORDER,\n        n: c.n,\n        h: c.h,\n        Gx: c.Gx,\n        Gy: c.Gy,\n    };\n    const Fp = c.Fp;\n    const Fn = (0, modular_ts_1.Field)(CURVE.n, c.nBitLength);\n    const curveOpts = {\n        Fp,\n        Fn,\n        allowedPrivateKeyLengths: c.allowedPrivateKeyLengths,\n        allowInfinityPoint: c.allowInfinityPoint,\n        endo: c.endo,\n        wrapPrivateKey: c.wrapPrivateKey,\n        isTorsionFree: c.isTorsionFree,\n        clearCofactor: c.clearCofactor,\n        fromBytes: c.fromBytes,\n        toBytes: c.toBytes,\n    };\n    return { CURVE, curveOpts };\n}\nfunction _ecdsa_legacy_opts_to_new(c) {\n    const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n    const ecdsaOpts = {\n        hash: c.hash,\n        hmac: c.hmac,\n        randomBytes: c.randomBytes,\n        lowS: c.lowS,\n        bits2int: c.bits2int,\n        bits2int_modN: c.bits2int_modN,\n    };\n    return { CURVE, curveOpts, ecdsaOpts };\n}\nfunction _weierstrass_new_output_to_legacy(c, Point) {\n    const { Fp, Fn } = Point;\n    // TODO: remove\n    function isWithinCurveOrder(num) {\n        return (0, utils_ts_1.inRange)(num, _1n, Fn.ORDER);\n    }\n    const weierstrassEquation = _legacyHelperEquat(Fp, c.a, c.b);\n    const normPrivateKeyToScalar = _legacyHelperNormPriv(Fn, c.allowedPrivateKeyLengths, c.wrapPrivateKey);\n    return Object.assign({}, {\n        CURVE: c,\n        Point: Point,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    });\n}\nfunction _ecdsa_new_output_to_legacy(c, ecdsa) {\n    return Object.assign({}, ecdsa, {\n        ProjectivePoint: ecdsa.Point,\n        CURVE: c,\n    });\n}\n// _ecdsa_legacy\nfunction weierstrass(c) {\n    const { CURVE, curveOpts, ecdsaOpts } = _ecdsa_legacy_opts_to_new(c);\n    const Point = weierstrassN(CURVE, curveOpts);\n    const signs = ecdsa(Point, ecdsaOpts, curveOpts);\n    return _ecdsa_new_output_to_legacy(c, signs);\n}\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nfunction SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n    // 2n ** c1 == 2n << (c1-1)\n    const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n    const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n    const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = i - _2n; // 18.    tv5 = i - 2\n            tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nfunction mapToCurveSimpleSWU(Fp, opts) {\n    (0, modular_ts_1.validateField)(Fp);\n    const { A, B, Z } = opts;\n    if (!Fp.isValid(A) || !Fp.isValid(B) || !Fp.isValid(Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, Z);\n    if (!Fp.isOdd)\n        throw new Error('Field does not have .isOdd()');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        const tv4_inv = (0, modular_ts_1.FpInvertBatch)(Fp, [tv4], true)[0];\n        x = Fp.mul(x, tv4_inv); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","'use strict';\n\nconst Commented = require('./commented');\nconst Diagnose = require('./diagnose');\nconst Decoder = require('./decoder');\nconst Encoder = require('./encoder');\nconst Simple = require('./simple');\nconst Tagged = require('./tagged');\nconst Map = require('./map');\nconst SharedValueEncoder = require('./sharedValueEncoder');\n\nmodule.exports = {\n  Commented,\n  Diagnose,\n  Decoder,\n  Encoder,\n  Simple,\n  Tagged,\n  Map,\n  SharedValueEncoder,\n\n  /**\n   * Convenience name for {@linkcode Commented.comment}.\n   */\n  comment: Commented.comment,\n\n  /**\n   * Convenience name for {@linkcode Decoder.decodeAll}.\n   */\n  decodeAll: Decoder.decodeAll,\n\n  /**\n   * Convenience name for {@linkcode Decoder.decodeFirst}.\n   */\n  decodeFirst: Decoder.decodeFirst,\n\n  /**\n   * Convenience name for {@linkcode Decoder.decodeAllSync}.\n   */\n  decodeAllSync: Decoder.decodeAllSync,\n\n  /**\n   * Convenience name for {@linkcode Decoder.decodeFirstSync}.\n   */\n  decodeFirstSync: Decoder.decodeFirstSync,\n\n  /**\n   * Convenience name for {@linkcode Diagnose.diagnose}.\n   */\n  diagnose: Diagnose.diagnose,\n\n  /**\n   * Convenience name for {@linkcode Encoder.encode}.\n   */\n  encode: Encoder.encode,\n\n  /**\n   * Convenience name for {@linkcode Encoder.encodeCanonical}.\n   */\n  encodeCanonical: Encoder.encodeCanonical,\n\n  /**\n   * Convenience name for {@linkcode Encoder.encodeOne}.\n   */\n  encodeOne: Encoder.encodeOne,\n\n  /**\n   * Convenience name for {@linkcode Encoder.encodeAsync}.\n   */\n  encodeAsync: Encoder.encodeAsync,\n\n  /**\n   * Convenience name for {@linkcode Decoder.decodeFirstSync}.\n   */\n  decode: Decoder.decodeFirstSync,\n\n  /**\n   * The codec information for\n   * {@link https://github.com/Level/encoding-down encoding-down}, which is a\n   * codec framework for leveldb.  CBOR is a particularly convenient format for\n   * both keys and values, as it can deal with a lot of types that JSON can't\n   * handle without losing type information.\n   *\n   * @example\n   * const level = require('level')\n   * const cbor = require('cbor')\n   *\n   * async function putget() {\n   *   const db = level('./db', {\n   *     keyEncoding: cbor.leveldb,\n   *     valueEncoding: cbor.leveldb,\n   *   })\n   *\n   *   await db.put({a: 1}, 9857298342094820394820394820398234092834n)\n   *   const val = await db.get({a: 1})\n   * }\n   */\n  leveldb: {\n    decode: Decoder.decodeFirstSync,\n    encode: Encoder.encode,\n    buffer: true,\n    name: 'cbor',\n  },\n\n  /**\n   * Reset everything that we can predict a plugin might have altered in good\n   * faith.  For now that includes the default set of tags that decoding and\n   * encoding will use.\n   */\n  reset() {\n    Encoder.reset();\n    Tagged.reset();\n  },\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeToCurve = exports.hashToCurve = exports.secp256r1 = exports.p256 = void 0;\nconst nist_ts_1 = require(\"./nist.js\");\nexports.p256 = nist_ts_1.p256;\nexports.secp256r1 = nist_ts_1.p256;\nexports.hashToCurve = (() => nist_ts_1.p256_hasher.hashToCurve)();\nexports.encodeToCurve = (() => nist_ts_1.p256_hasher.encodeToCurve)();\n//# sourceMappingURL=p256.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DearmorAndDesigncryptStream = exports.SigncryptAndArmorStream = exports.dearmorAndDesigncrypt = exports.signcryptAndArmor = exports.verifyDetachedArmored = exports.signDetachedAndArmor = exports.DearmorAndVerifyStream = exports.SignAndArmorStream = exports.verifyArmored = exports.signAndArmor = exports.DearmorAndDecryptStream = exports.EncryptAndArmorStream = exports.dearmorAndDecrypt = exports.encryptAndArmor = exports.SymmetricKeyRecipient = exports.DesigncryptStream = exports.designcrypt = exports.SigncryptStream = exports.signcrypt = exports.verifyDetached = exports.signDetached = exports.VerifyStream = exports.verify = exports.SignStream = exports.sign = exports.DecryptStream = exports.decrypt = exports.EncryptStream = exports.encrypt = exports.MessageType = exports.DearmorStream = exports.dearmor = exports.ArmorStream = exports.armor = void 0;\nvar armor_1 = require(\"./armor\");\nObject.defineProperty(exports, \"armor\", { enumerable: true, get: function () { return armor_1.armor; } });\nObject.defineProperty(exports, \"ArmorStream\", { enumerable: true, get: function () { return armor_1.ArmorStream; } });\nObject.defineProperty(exports, \"dearmor\", { enumerable: true, get: function () { return armor_1.dearmor; } });\nObject.defineProperty(exports, \"DearmorStream\", { enumerable: true, get: function () { return armor_1.DearmorStream; } });\nvar message_header_1 = require(\"./message-header\");\nObject.defineProperty(exports, \"MessageType\", { enumerable: true, get: function () { return message_header_1.MessageType; } });\nvar encryption_1 = require(\"./encryption\");\nObject.defineProperty(exports, \"encrypt\", { enumerable: true, get: function () { return encryption_1.encrypt; } });\nObject.defineProperty(exports, \"EncryptStream\", { enumerable: true, get: function () { return encryption_1.EncryptStream; } });\nObject.defineProperty(exports, \"decrypt\", { enumerable: true, get: function () { return encryption_1.decrypt; } });\nObject.defineProperty(exports, \"DecryptStream\", { enumerable: true, get: function () { return encryption_1.DecryptStream; } });\nvar signing_1 = require(\"./signing\");\nObject.defineProperty(exports, \"sign\", { enumerable: true, get: function () { return signing_1.sign; } });\nObject.defineProperty(exports, \"SignStream\", { enumerable: true, get: function () { return signing_1.SignStream; } });\nObject.defineProperty(exports, \"verify\", { enumerable: true, get: function () { return signing_1.verify; } });\nObject.defineProperty(exports, \"VerifyStream\", { enumerable: true, get: function () { return signing_1.VerifyStream; } });\nObject.defineProperty(exports, \"signDetached\", { enumerable: true, get: function () { return signing_1.signDetached; } });\nObject.defineProperty(exports, \"verifyDetached\", { enumerable: true, get: function () { return signing_1.verifyDetached; } });\nvar signcryption_1 = require(\"./signcryption\");\nObject.defineProperty(exports, \"signcrypt\", { enumerable: true, get: function () { return signcryption_1.signcrypt; } });\nObject.defineProperty(exports, \"SigncryptStream\", { enumerable: true, get: function () { return signcryption_1.SigncryptStream; } });\nObject.defineProperty(exports, \"designcrypt\", { enumerable: true, get: function () { return signcryption_1.designcrypt; } });\nObject.defineProperty(exports, \"DesigncryptStream\", { enumerable: true, get: function () { return signcryption_1.DesigncryptStream; } });\nvar recipient_1 = require(\"./signcryption/recipient\");\nObject.defineProperty(exports, \"SymmetricKeyRecipient\", { enumerable: true, get: function () { return recipient_1.SymmetricKeyRecipient; } });\nvar with_armor_1 = require(\"./with-armor\");\nObject.defineProperty(exports, \"encryptAndArmor\", { enumerable: true, get: function () { return with_armor_1.encryptAndArmor; } });\nObject.defineProperty(exports, \"dearmorAndDecrypt\", { enumerable: true, get: function () { return with_armor_1.dearmorAndDecrypt; } });\nObject.defineProperty(exports, \"EncryptAndArmorStream\", { enumerable: true, get: function () { return with_armor_1.EncryptAndArmorStream; } });\nObject.defineProperty(exports, \"DearmorAndDecryptStream\", { enumerable: true, get: function () { return with_armor_1.DearmorAndDecryptStream; } });\nObject.defineProperty(exports, \"signAndArmor\", { enumerable: true, get: function () { return with_armor_1.signAndArmor; } });\nObject.defineProperty(exports, \"verifyArmored\", { enumerable: true, get: function () { return with_armor_1.verifyArmored; } });\nObject.defineProperty(exports, \"SignAndArmorStream\", { enumerable: true, get: function () { return with_armor_1.SignAndArmorStream; } });\nObject.defineProperty(exports, \"DearmorAndVerifyStream\", { enumerable: true, get: function () { return with_armor_1.DearmorAndVerifyStream; } });\nObject.defineProperty(exports, \"signDetachedAndArmor\", { enumerable: true, get: function () { return with_armor_1.signDetachedAndArmor; } });\nObject.defineProperty(exports, \"verifyDetachedArmored\", { enumerable: true, get: function () { return with_armor_1.verifyDetachedArmored; } });\nObject.defineProperty(exports, \"signcryptAndArmor\", { enumerable: true, get: function () { return with_armor_1.signcryptAndArmor; } });\nObject.defineProperty(exports, \"dearmorAndDesigncrypt\", { enumerable: true, get: function () { return with_armor_1.dearmorAndDesigncrypt; } });\nObject.defineProperty(exports, \"SigncryptAndArmorStream\", { enumerable: true, get: function () { return with_armor_1.SigncryptAndArmorStream; } });\nObject.defineProperty(exports, \"DearmorAndDesigncryptStream\", { enumerable: true, get: function () { return with_armor_1.DearmorAndDesigncryptStream; } });\n//# sourceMappingURL=index.js.map","// Tweaked version of nathan7's binary-parse-stream\n// (see https://github.com/nathan7/binary-parse-stream)\n// Uses NoFilter instead of the readable in the original.  Removes\n// the ability to read -1, which was odd and un-needed.\n// License for binary-parse-stream: MIT\n\n// binary-parse-stream is now unmaintained, so I have rewritten it as\n// more modern JS so I can get tsc to help check types.\n\n'use strict';\n// eslint-disable-next-line n/prefer-node-protocol\nconst stream = require('stream');\nconst NoFilter = require('nofilter');\n\n/**\n * BinaryParseStream is a TransformStream that consumes buffers and outputs\n * objects on the other end.  It expects your subclass to implement a `_parse`\n * method that is a generator.  When your generator yields a number, it'll be\n * fed a buffer of that length from the input.  When your generator returns,\n * the return value will be pushed to the output side.\n *\n * @extends stream.Transform\n */\nclass BinaryParseStream extends stream.Transform {\n  /**\n   * Creates an instance of BinaryParseStream.\n   *\n   * @memberof BinaryParseStream\n   * @param {stream.TransformOptions} options Stream options.\n   */\n  constructor(options) {\n    super(options);\n    // Doesn't work to pass these in as opts, for some reason\n    // also, work around typescript not knowing TransformStream internals\n    // eslint-disable-next-line dot-notation\n    this['_writableState'].objectMode = false;\n    // eslint-disable-next-line dot-notation\n    this['_readableState'].objectMode = true;\n\n    this.bs = new NoFilter();\n    this.__restart();\n  }\n\n  /**\n   * Transforming.\n   *\n   * @param {any} fresh Buffer to transcode.\n   * @param {BufferEncoding} _encoding Name of encoding.\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _transform(fresh, _encoding, cb) {\n    this.bs.write(fresh);\n\n    while (this.bs.length >= this.__needed) {\n      let ret = null;\n      const chunk = (this.__needed === null) ?\n        undefined :\n        this.bs.read(this.__needed);\n\n      try {\n        ret = this.__parser.next(chunk);\n      } catch (e) {\n        return cb(e);\n      }\n\n      if (this.__needed) {\n        this.__fresh = false;\n      }\n\n      if (ret.done) {\n        this.push(ret.value);\n        this.__restart();\n      } else {\n        this.__needed = ret.value || Infinity;\n      }\n    }\n\n    return cb();\n  }\n\n  /**\n   * Subclasses must override this to set their parsing behavior.  Yield a\n   * number to receive a Buffer of that many bytes.\n   *\n   * @abstract\n   * @returns {Generator<number, any, Buffer>}\n   */\n  /* istanbul ignore next */\n  *_parse() { // eslint-disable-line class-methods-use-this, require-yield\n    throw new Error('Must be implemented in subclass');\n  }\n\n  __restart() {\n    this.__needed = null;\n    this.__parser = this._parse();\n    this.__fresh = true;\n  }\n\n  /**\n   * Flushing.\n   *\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _flush(cb) {\n    cb(this.__fresh ? null : new Error('unexpected end of input'));\n  }\n}\n\nmodule.exports = BinaryParseStream;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"./crypto\");\nconst buffer_1 = require(\"buffer/\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst pqCrypto_1 = require(\"./pqCrypto\");\nconst KeyManager_1 = __importDefault(require(\"./KeyManager\"));\nconst LEVEL_ROOT = 1;\nconst LEVEL_DERIVED = 2;\nconst sha512 = (data) => (0, crypto_1.hash)(\"sha512\", data);\nconst sha256 = (data) => (0, crypto_1.hash)(\"sha256\", data);\nclass PQManager extends KeyManager_1.default {\n    constructor() {\n        super();\n        this.authType = \"DilithiumVerificationKey2025\";\n    }\n    static async create_PQ_fromEntropy(entropy, swapIndex = 0) {\n        const km = new PQManager();\n        km.entropy = entropy;\n        km.level = LEVEL_ROOT;\n        km.capability = \"private\";\n        km.seed = sha512(entropy);\n        km.swapIndex = swapIndex;\n        km.proof = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.from([]));\n        km.signer = (0, pqCrypto_1.generateDilithiumKeyPair)(km.seed.slice(0, 32));\n        const seed2 = sha256(km.seed.slice(32, 64));\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(seed2);\n        km.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        return km;\n    }\n    static generate_PQ() {\n        return PQManager.create_PQ_fromEntropy((0, crypto_1.randomBytes)(32));\n    }\n    getSecret() {\n        return buffer_1.Buffer.from((0, msgpack_1.encode)({\n            v: this.version,\n            p: this.proof,\n            s: this.seed,\n        }));\n    }\n    static fromSecret(secret) {\n        const data = (0, msgpack_1.decode)(secret);\n        const km = new PQManager();\n        km.version = data.v ?? 0;\n        km.level = LEVEL_DERIVED;\n        km.capability = \"private\";\n        km.proof = data.p;\n        km.seed = buffer_1.Buffer.from(data.s);\n        km.signer = (0, pqCrypto_1.generateDilithiumKeyPair)(km.seed.slice(0, 32));\n        const seed2 = sha256(km.seed.slice(32, 64));\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(seed2);\n        km.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        return km;\n    }\n    static instantiate(obj) {\n        const km = new PQManager();\n        km.version = obj.version ?? 0;\n        km.level = obj.level;\n        km.proof = obj.proof.data ? buffer_1.Buffer.from(obj.proof.data) : buffer_1.Buffer.from(obj.proof);\n        km.signer = {\n            publicKey: obj.signer.publicKey.data ? buffer_1.Buffer.from(obj.signer.publicKey.data) : buffer_1.Buffer.from(obj.signer.publicKey),\n        };\n        km.cypher = {\n            publicKey: obj.cypher.publicKey.data ? buffer_1.Buffer.from(obj.cypher.publicKey.data) : buffer_1.Buffer.from(obj.cypher.publicKey),\n        };\n        return km;\n    }\n    static fromId(id) {\n        const data = (0, msgpack_1.decode)(id);\n        const km = new PQManager();\n        km.version = data.v ?? 0;\n        km.level = LEVEL_DERIVED;\n        km.capability = \"public\";\n        km.proof = data.p;\n        km.signer = {\n            publicKey: data.x,\n        };\n        km.cypher = {\n            publicKey: data.e,\n        };\n        // console.log(km)\n        return km;\n    }\n    async sign(data) {\n        if (this.capability == \"public\")\n            return null;\n        return (0, pqCrypto_1.signDilithium)(data, this.signer.secretKey);\n    }\n    verify(data, signature, userVerificationIgnored) {\n        return (0, pqCrypto_1.verifyDilithium)(data, signature, this.signer.publicKey);\n    }\n}\nexports.default = PQManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.p521_hasher = exports.secp521r1 = exports.p521 = exports.p384_hasher = exports.secp384r1 = exports.p384 = exports.p256_hasher = exports.secp256r1 = exports.p256 = void 0;\n/**\n * Internal module for NIST P256, P384, P521 curves.\n * Do not use for now.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst sha2_js_1 = require(\"@noble/hashes/sha2.js\");\nconst _shortw_utils_ts_1 = require(\"./_shortw_utils.js\");\nconst hash_to_curve_ts_1 = require(\"./abstract/hash-to-curve.js\");\nconst modular_ts_1 = require(\"./abstract/modular.js\");\nconst weierstrass_ts_1 = require(\"./abstract/weierstrass.js\");\n// p = 2n**224n * (2n**32n-1n) + 2n**192n + 2n**96n - 1n\n// a = Fp256.create(BigInt('-3'));\nconst p256_CURVE = {\n    p: BigInt('0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff'),\n    n: BigInt('0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551'),\n    h: BigInt(1),\n    a: BigInt('0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc'),\n    b: BigInt('0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b'),\n    Gx: BigInt('0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296'),\n    Gy: BigInt('0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5'),\n};\n// p = 2n**384n - 2n**128n - 2n**96n + 2n**32n - 1n\nconst p384_CURVE = {\n    p: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff'),\n    n: BigInt('0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973'),\n    h: BigInt(1),\n    a: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc'),\n    b: BigInt('0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef'),\n    Gx: BigInt('0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7'),\n    Gy: BigInt('0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f'),\n};\n// p = 2n**521n - 1n\nconst p521_CURVE = {\n    p: BigInt('0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'),\n    n: BigInt('0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409'),\n    h: BigInt(1),\n    a: BigInt('0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc'),\n    b: BigInt('0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00'),\n    Gx: BigInt('0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66'),\n    Gy: BigInt('0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650'),\n};\nconst Fp256 = (0, modular_ts_1.Field)(p256_CURVE.p);\nconst Fp384 = (0, modular_ts_1.Field)(p384_CURVE.p);\nconst Fp521 = (0, modular_ts_1.Field)(p521_CURVE.p);\nfunction createSWU(field, opts) {\n    const map = (0, weierstrass_ts_1.mapToCurveSimpleSWU)(field, opts);\n    return (scalars) => map(scalars[0]);\n}\n/** NIST P256 (aka secp256r1, prime256v1) curve, ECDSA and ECDH methods. */\nexports.p256 = (0, _shortw_utils_ts_1.createCurve)({ ...p256_CURVE, Fp: Fp256, lowS: false }, sha2_js_1.sha256);\n/** Alias to p256. */\nexports.secp256r1 = exports.p256;\n/** Hashing / encoding to p256 points / field. RFC 9380 methods. */\nexports.p256_hasher = (() => {\n    return (0, hash_to_curve_ts_1.createHasher)(exports.p256.Point, createSWU(Fp256, {\n        A: p256_CURVE.a,\n        B: p256_CURVE.b,\n        Z: Fp256.create(BigInt('-10')),\n    }), {\n        DST: 'P256_XMD:SHA-256_SSWU_RO_',\n        encodeDST: 'P256_XMD:SHA-256_SSWU_NU_',\n        p: p256_CURVE.p,\n        m: 1,\n        k: 128,\n        expand: 'xmd',\n        hash: sha2_js_1.sha256,\n    });\n})();\n/** NIST P384 (aka secp384r1) curve, ECDSA and ECDH methods. */\nexports.p384 = (0, _shortw_utils_ts_1.createCurve)({ ...p384_CURVE, Fp: Fp384, lowS: false }, sha2_js_1.sha384);\n/** Alias to p384. */\nexports.secp384r1 = exports.p384;\n/** Hashing / encoding to p384 points / field. RFC 9380 methods. */\nexports.p384_hasher = (() => {\n    return (0, hash_to_curve_ts_1.createHasher)(exports.p384.Point, createSWU(Fp384, {\n        A: p384_CURVE.a,\n        B: p384_CURVE.b,\n        Z: Fp384.create(BigInt('-12')),\n    }), {\n        DST: 'P384_XMD:SHA-384_SSWU_RO_',\n        encodeDST: 'P384_XMD:SHA-384_SSWU_NU_',\n        p: p384_CURVE.p,\n        m: 1,\n        k: 192,\n        expand: 'xmd',\n        hash: sha2_js_1.sha384,\n    });\n})();\n/** NIST P521 (aka secp521r1) curve, ECDSA and ECDH methods. */\nexports.p521 = (0, _shortw_utils_ts_1.createCurve)({ ...p521_CURVE, Fp: Fp521, lowS: false, allowedPrivateKeyLengths: [130, 131, 132] }, sha2_js_1.sha512);\n/** Alias to p521. */\nexports.secp521r1 = exports.p521;\n/** Hashing / encoding to p521 points / field. RFC 9380 methods. */\nexports.p521_hasher = (() => {\n    return (0, hash_to_curve_ts_1.createHasher)(exports.p521.Point, createSWU(Fp521, {\n        A: p521_CURVE.a,\n        B: p521_CURVE.b,\n        Z: Fp521.create(BigInt('-4')),\n    }), {\n        DST: 'P521_XMD:SHA-512_SSWU_RO_',\n        encodeDST: 'P521_XMD:SHA-512_SSWU_NU_',\n        p: p521_CURVE.p,\n        m: 1,\n        k: 256,\n        expand: 'xmd',\n        hash: sha2_js_1.sha512,\n    });\n})();\n//# sourceMappingURL=nist.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ml_dsa87 = exports.ml_dsa65 = exports.ml_dsa44 = exports.PARAMS = void 0;\n/**\n * ML-DSA: Module Lattice-based Digital Signature Algorithm from\n * [FIPS-204](https://csrc.nist.gov/pubs/fips/204/ipd). A.k.a. CRYSTALS-Dilithium.\n *\n * Has similar internals to ML-KEM, but their keys and params are different.\n * Check out [official site](https://www.pq-crystals.org/dilithium/index.shtml),\n * [repo](https://github.com/pq-crystals/dilithium).\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nconst sha3_1 = require(\"@noble/hashes/sha3\");\nconst _crystals_ts_1 = require(\"./_crystals.js\");\nconst utils_ts_1 = require(\"./utils.js\");\n// Constants\nconst N = 256;\n// 2**23  2**13 + 1, 23 bits: multiply will be 46. We have enough precision in JS to avoid bigints\nconst Q = 8380417;\nconst ROOT_OF_UNITY = 1753;\n// f = 256**1 mod q, pow(256, -1, q) = 8347681 (python3)\nconst F = 8347681;\nconst D = 13;\n// Dilithium is kinda parametrized over GAMMA2, but everything will break with any other value.\nconst GAMMA2_1 = Math.floor((Q - 1) / 88) | 0;\nconst GAMMA2_2 = Math.floor((Q - 1) / 32) | 0;\n/** Internal params for different versions of ML-DSA  */\n// prettier-ignore\nexports.PARAMS = {\n    2: { K: 4, L: 4, D, GAMMA1: 2 ** 17, GAMMA2: GAMMA2_1, TAU: 39, ETA: 2, OMEGA: 80 },\n    3: { K: 6, L: 5, D, GAMMA1: 2 ** 19, GAMMA2: GAMMA2_2, TAU: 49, ETA: 4, OMEGA: 55 },\n    5: { K: 8, L: 7, D, GAMMA1: 2 ** 19, GAMMA2: GAMMA2_2, TAU: 60, ETA: 2, OMEGA: 75 },\n};\nconst newPoly = (n) => new Int32Array(n);\nconst { mod, smod, NTT, bitsCoder } = (0, _crystals_ts_1.genCrystals)({\n    N,\n    Q,\n    F,\n    ROOT_OF_UNITY,\n    newPoly,\n    isKyber: false,\n    brvBits: 8,\n});\nconst id = (n) => n;\nconst polyCoder = (d, compress = id, verify = id) => bitsCoder(d, {\n    encode: (i) => compress(verify(i)),\n    decode: (i) => verify(compress(i)),\n});\nconst polyAdd = (a, b) => {\n    for (let i = 0; i < a.length; i++)\n        a[i] = mod(a[i] + b[i]);\n    return a;\n};\nconst polySub = (a, b) => {\n    for (let i = 0; i < a.length; i++)\n        a[i] = mod(a[i] - b[i]);\n    return a;\n};\nconst polyShiftl = (p) => {\n    for (let i = 0; i < N; i++)\n        p[i] <<= D;\n    return p;\n};\nconst polyChknorm = (p, B) => {\n    // Not very sure about this, but FIPS204 doesn't provide any function for that :(\n    for (let i = 0; i < N; i++)\n        if (Math.abs(smod(p[i])) >= B)\n            return true;\n    return false;\n};\nconst MultiplyNTTs = (a, b) => {\n    // NOTE: we don't use montgomery reduction in code, since it requires 64 bit ints,\n    // which is not available in JS. mod(a[i] * b[i]) is ok, since Q is 23 bit,\n    // which means a[i] * b[i] is 46 bit, which is safe to use in JS. (number is 53 bits).\n    // Barrett reduction is slower than mod :(\n    const c = newPoly(N);\n    for (let i = 0; i < a.length; i++)\n        c[i] = mod(a[i] * b[i]);\n    return c;\n};\n// Return poly in NTT representation\nfunction RejNTTPoly(xof) {\n    // Samples a polynomial  Tq.\n    const r = newPoly(N);\n    // NOTE: we can represent 3xu24 as 4xu32, but it doesn't improve perf :(\n    for (let j = 0; j < N;) {\n        const b = xof();\n        if (b.length % 3)\n            throw new Error('RejNTTPoly: unaligned block');\n        for (let i = 0; j < N && i <= b.length - 3; i += 3) {\n            const t = (b[i + 0] | (b[i + 1] << 8) | (b[i + 2] << 16)) & 0x7fffff; // 3 bytes\n            if (t < Q)\n                r[j++] = t;\n        }\n    }\n    return r;\n}\nfunction getDilithium(opts) {\n    const { K, L, GAMMA1, GAMMA2, TAU, ETA, OMEGA } = opts;\n    const { CRH_BYTES, TR_BYTES, C_TILDE_BYTES, XOF128, XOF256 } = opts;\n    if (![2, 4].includes(ETA))\n        throw new Error('Wrong ETA');\n    if (![1 << 17, 1 << 19].includes(GAMMA1))\n        throw new Error('Wrong GAMMA1');\n    if (![GAMMA2_1, GAMMA2_2].includes(GAMMA2))\n        throw new Error('Wrong GAMMA2');\n    const BETA = TAU * ETA;\n    const decompose = (r) => {\n        // Decomposes r into (r1, r0) such that r  r1(22) + r0 mod q.\n        const rPlus = mod(r);\n        const r0 = smod(rPlus, 2 * GAMMA2) | 0;\n        if (rPlus - r0 === Q - 1)\n            return { r1: 0 | 0, r0: (r0 - 1) | 0 };\n        const r1 = Math.floor((rPlus - r0) / (2 * GAMMA2)) | 0;\n        return { r1, r0 }; // r1 = HighBits, r0 = LowBits\n    };\n    const HighBits = (r) => decompose(r).r1;\n    const LowBits = (r) => decompose(r).r0;\n    const MakeHint = (z, r) => {\n        // Compute hint bit indicating whether adding z to r alters the high bits of r.\n        // From dilithium code\n        const res0 = z <= GAMMA2 || z > Q - GAMMA2 || (z === Q - GAMMA2 && r === 0) ? 0 : 1;\n        // from FIPS204:\n        // // const r1 = HighBits(r);\n        // // const v1 = HighBits(r + z);\n        // // const res1 = +(r1 !== v1);\n        // But they return different results! However, decompose is same.\n        // So, either there is a bug in Dilithium ref implementation or in FIPS204.\n        // For now, lets use dilithium one, so test vectors can be passed.\n        // See\n        // https://github.com/GiacomoPope/dilithium-py?tab=readme-ov-file#optimising-decomposition-and-making-hints\n        return res0;\n    };\n    const UseHint = (h, r) => {\n        // Returns the high bits of r adjusted according to hint h\n        const m = Math.floor((Q - 1) / (2 * GAMMA2));\n        const { r1, r0 } = decompose(r);\n        // 3: if h = 1 and r0 > 0 return (r1 + 1) mod m\n        // 4: if h = 1 and r0  0 return (r1  1) mod m\n        if (h === 1)\n            return r0 > 0 ? mod(r1 + 1, m) | 0 : mod(r1 - 1, m) | 0;\n        return r1 | 0;\n    };\n    const Power2Round = (r) => {\n        // Decomposes r into (r1, r0) such that r  r1*(2**d) + r0 mod q.\n        const rPlus = mod(r);\n        const r0 = smod(rPlus, 2 ** D) | 0;\n        return { r1: Math.floor((rPlus - r0) / 2 ** D) | 0, r0 };\n    };\n    const hintCoder = {\n        bytesLen: OMEGA + K,\n        encode: (h) => {\n            if (h === false)\n                throw new Error('hint.encode: hint is false'); // should never happen\n            const res = new Uint8Array(OMEGA + K);\n            for (let i = 0, k = 0; i < K; i++) {\n                for (let j = 0; j < N; j++)\n                    if (h[i][j] !== 0)\n                        res[k++] = j;\n                res[OMEGA + i] = k;\n            }\n            return res;\n        },\n        decode: (buf) => {\n            const h = [];\n            let k = 0;\n            for (let i = 0; i < K; i++) {\n                const hi = newPoly(N);\n                if (buf[OMEGA + i] < k || buf[OMEGA + i] > OMEGA)\n                    return false;\n                for (let j = k; j < buf[OMEGA + i]; j++) {\n                    if (j > k && buf[j] <= buf[j - 1])\n                        return false;\n                    hi[buf[j]] = 1;\n                }\n                k = buf[OMEGA + i];\n                h.push(hi);\n            }\n            for (let j = k; j < OMEGA; j++)\n                if (buf[j] !== 0)\n                    return false;\n            return h;\n        },\n    };\n    const ETACoder = polyCoder(ETA === 2 ? 3 : 4, (i) => ETA - i, (i) => {\n        if (!(-ETA <= i && i <= ETA))\n            throw new Error(`malformed key s1/s3 ${i} outside of ETA range [${-ETA}, ${ETA}]`);\n        return i;\n    });\n    const T0Coder = polyCoder(13, (i) => (1 << (D - 1)) - i);\n    const T1Coder = polyCoder(10);\n    // Requires smod. Need to fix!\n    const ZCoder = polyCoder(GAMMA1 === 1 << 17 ? 18 : 20, (i) => smod(GAMMA1 - i));\n    const W1Coder = polyCoder(GAMMA2 === GAMMA2_1 ? 6 : 4);\n    const W1Vec = (0, utils_ts_1.vecCoder)(W1Coder, K);\n    // Main structures\n    const publicCoder = (0, utils_ts_1.splitCoder)(32, (0, utils_ts_1.vecCoder)(T1Coder, K));\n    const secretCoder = (0, utils_ts_1.splitCoder)(32, 32, TR_BYTES, (0, utils_ts_1.vecCoder)(ETACoder, L), (0, utils_ts_1.vecCoder)(ETACoder, K), (0, utils_ts_1.vecCoder)(T0Coder, K));\n    const sigCoder = (0, utils_ts_1.splitCoder)(C_TILDE_BYTES, (0, utils_ts_1.vecCoder)(ZCoder, L), hintCoder);\n    const CoefFromHalfByte = ETA === 2\n        ? (n) => (n < 15 ? 2 - (n % 5) : false)\n        : (n) => (n < 9 ? 4 - n : false);\n    // Return poly in NTT representation\n    function RejBoundedPoly(xof) {\n        // Samples an element a  Rq with coeffcients in [, ] computed via rejection sampling from .\n        const r = newPoly(N);\n        for (let j = 0; j < N;) {\n            const b = xof();\n            for (let i = 0; j < N && i < b.length; i += 1) {\n                // half byte. Should be superfast with vector instructions. But very slow with js :(\n                const d1 = CoefFromHalfByte(b[i] & 0x0f);\n                const d2 = CoefFromHalfByte((b[i] >> 4) & 0x0f);\n                if (d1 !== false)\n                    r[j++] = d1;\n                if (j < N && d2 !== false)\n                    r[j++] = d2;\n            }\n        }\n        return r;\n    }\n    const SampleInBall = (seed) => {\n        // Samples a polynomial c  Rq with coeffcients from {1, 0, 1} and Hamming weight \n        const pre = newPoly(N);\n        const s = sha3_1.shake256.create({}).update(seed);\n        const buf = new Uint8Array(sha3_1.shake256.blockLen);\n        s.xofInto(buf);\n        const masks = buf.slice(0, 8);\n        for (let i = N - TAU, pos = 8, maskPos = 0, maskBit = 0; i < N; i++) {\n            let b = i + 1;\n            for (; b > i;) {\n                b = buf[pos++];\n                if (pos < sha3_1.shake256.blockLen)\n                    continue;\n                s.xofInto(buf);\n                pos = 0;\n            }\n            pre[i] = pre[b];\n            pre[b] = 1 - (((masks[maskPos] >> maskBit++) & 1) << 1);\n            if (maskBit >= 8) {\n                maskPos++;\n                maskBit = 0;\n            }\n        }\n        return pre;\n    };\n    const polyPowerRound = (p) => {\n        const res0 = newPoly(N);\n        const res1 = newPoly(N);\n        for (let i = 0; i < p.length; i++) {\n            const { r0, r1 } = Power2Round(p[i]);\n            res0[i] = r0;\n            res1[i] = r1;\n        }\n        return { r0: res0, r1: res1 };\n    };\n    const polyUseHint = (u, h) => {\n        for (let i = 0; i < N; i++)\n            u[i] = UseHint(h[i], u[i]);\n        return u;\n    };\n    const polyMakeHint = (a, b) => {\n        const v = newPoly(N);\n        let cnt = 0;\n        for (let i = 0; i < N; i++) {\n            const h = MakeHint(a[i], b[i]);\n            v[i] = h;\n            cnt += h;\n        }\n        return { v, cnt };\n    };\n    const signRandBytes = 32;\n    const seedCoder = (0, utils_ts_1.splitCoder)(32, 64, 32);\n    // API & argument positions are exactly as in FIPS204.\n    const internal = {\n        signRandBytes,\n        keygen: (seed) => {\n            // H(||IntegerToBytes(, 1)||IntegerToBytes(, 1), 128) 2:  expand seed\n            const seedDst = new Uint8Array(32 + 2);\n            const randSeed = seed === undefined;\n            if (randSeed)\n                seed = (0, utils_ts_1.randomBytes)(32);\n            (0, utils_ts_1.ensureBytes)(seed, 32);\n            seedDst.set(seed);\n            if (randSeed)\n                seed.fill(0);\n            seedDst[32] = K;\n            seedDst[33] = L;\n            const [rho, rhoPrime, K_] = seedCoder.decode((0, sha3_1.shake256)(seedDst, { dkLen: seedCoder.bytesLen }));\n            const xofPrime = XOF256(rhoPrime);\n            const s1 = [];\n            for (let i = 0; i < L; i++)\n                s1.push(RejBoundedPoly(xofPrime.get(i & 0xff, (i >> 8) & 0xff)));\n            const s2 = [];\n            for (let i = L; i < L + K; i++)\n                s2.push(RejBoundedPoly(xofPrime.get(i & 0xff, (i >> 8) & 0xff)));\n            const s1Hat = s1.map((i) => NTT.encode(i.slice()));\n            const t0 = [];\n            const t1 = [];\n            const xof = XOF128(rho);\n            const t = newPoly(N);\n            for (let i = 0; i < K; i++) {\n                // t  NTT1(A*NTT(s1)) + s2\n                t.fill(0); // don't-reallocate\n                for (let j = 0; j < L; j++) {\n                    const aij = RejNTTPoly(xof.get(j, i)); // super slow!\n                    polyAdd(t, MultiplyNTTs(aij, s1Hat[j]));\n                }\n                NTT.decode(t);\n                const { r0, r1 } = polyPowerRound(polyAdd(t, s2[i])); // (t1, t0)  Power2Round(t, d)\n                t0.push(r0);\n                t1.push(r1);\n            }\n            const publicKey = publicCoder.encode([rho, t1]); // pk  pkEncode(, t1)\n            const tr = (0, sha3_1.shake256)(publicKey, { dkLen: TR_BYTES }); // tr  H(BytesToBits(pk), 512)\n            const secretKey = secretCoder.encode([rho, K_, tr, s1, s2, t0]); // sk  skEncode(, K,tr, s1, s2, t0)\n            xof.clean();\n            xofPrime.clean();\n            // STATS\n            // Kyber512:  { calls: 4, xofs: 12 }, Kyber768: { calls: 9, xofs: 27 }, Kyber1024: { calls: 16, xofs: 48 }\n            // DSA44:    { calls: 24, xofs: 24 }, DSA65:    { calls: 41, xofs: 41 }, DSA87:    { calls: 71, xofs: 71 }\n            (0, utils_ts_1.cleanBytes)(rho, rhoPrime, K_, s1, s2, s1Hat, t, t0, t1, tr, seedDst);\n            return { publicKey, secretKey };\n        },\n        // NOTE: random is optional.\n        sign: (secretKey, msg, random, externalMu = false) => {\n            // This part can be pre-cached per secretKey, but there is only minor performance improvement,\n            // since we re-use a lot of variables to computation.\n            const [rho, _K, tr, s1, s2, t0] = secretCoder.decode(secretKey); // (, K,tr, s1, s2, t0)  skDecode(sk)\n            // Cache matrix to avoid re-compute later\n            const A = []; // A  ExpandA()\n            const xof = XOF128(rho);\n            for (let i = 0; i < K; i++) {\n                const pv = [];\n                for (let j = 0; j < L; j++)\n                    pv.push(RejNTTPoly(xof.get(j, i)));\n                A.push(pv);\n            }\n            xof.clean();\n            for (let i = 0; i < L; i++)\n                NTT.encode(s1[i]); // s1  NTT(s1)\n            for (let i = 0; i < K; i++) {\n                NTT.encode(s2[i]); // s2  NTT(s2)\n                NTT.encode(t0[i]); // t0  NTT(t0)\n            }\n            // This part is per msg\n            const mu = externalMu\n                ? msg\n                : sha3_1.shake256.create({ dkLen: CRH_BYTES }).update(tr).update(msg).digest(); // 6:   H(tr||M, 512)  Compute message representative \n            // Compute private random seed\n            const rnd = random ? random : new Uint8Array(32);\n            (0, utils_ts_1.ensureBytes)(rnd);\n            const rhoprime = sha3_1.shake256\n                .create({ dkLen: CRH_BYTES })\n                .update(_K)\n                .update(rnd)\n                .update(mu)\n                .digest(); //  H(K||rnd||, 512)\n            (0, utils_ts_1.ensureBytes)(rhoprime, CRH_BYTES);\n            const x256 = XOF256(rhoprime, ZCoder.bytesLen);\n            //  Rejection sampling loop\n            main_loop: for (let kappa = 0;;) {\n                const y = [];\n                // y  ExpandMask( , )\n                for (let i = 0; i < L; i++, kappa++)\n                    y.push(ZCoder.decode(x256.get(kappa & 0xff, kappa >> 8)()));\n                const z = y.map((i) => NTT.encode(i.slice()));\n                const w = [];\n                for (let i = 0; i < K; i++) {\n                    // w  NTT1(A  NTT(y))\n                    const wi = newPoly(N);\n                    for (let j = 0; j < L; j++)\n                        polyAdd(wi, MultiplyNTTs(A[i][j], z[j]));\n                    NTT.decode(wi);\n                    w.push(wi);\n                }\n                const w1 = w.map((j) => j.map(HighBits)); // w1  HighBits(w)\n                // Commitment hash: c {0, 1 2 }  H(||w1Encode(w1), 2)\n                const cTilde = sha3_1.shake256\n                    .create({ dkLen: C_TILDE_BYTES })\n                    .update(mu)\n                    .update(W1Vec.encode(w1))\n                    .digest();\n                // Verifers challenge\n                const cHat = NTT.encode(SampleInBall(cTilde)); // c  SampleInBall(c1); c  NTT(c)\n                // cs1  NTT1(c s1)\n                const cs1 = s1.map((i) => MultiplyNTTs(i, cHat));\n                for (let i = 0; i < L; i++) {\n                    polyAdd(NTT.decode(cs1[i]), y[i]); // z  y + cs1\n                    if (polyChknorm(cs1[i], GAMMA1 - BETA))\n                        continue main_loop; // ||z||  1  \n                }\n                // cs1 is now z ( Signers response)\n                let cnt = 0;\n                const h = [];\n                for (let i = 0; i < K; i++) {\n                    const cs2 = NTT.decode(MultiplyNTTs(s2[i], cHat)); // cs2  NTT1(c s2)\n                    const r0 = polySub(w[i], cs2).map(LowBits); // r0  LowBits(w  cs2)\n                    if (polyChknorm(r0, GAMMA2 - BETA))\n                        continue main_loop; // ||r0||  2  \n                    const ct0 = NTT.decode(MultiplyNTTs(t0[i], cHat)); // ct0  NTT1(c t0)\n                    if (polyChknorm(ct0, GAMMA2))\n                        continue main_loop;\n                    polyAdd(r0, ct0);\n                    //  Signers hint\n                    const hint = polyMakeHint(r0, w1[i]); // h  MakeHint(ct0, w cs2 + ct0)\n                    h.push(hint.v);\n                    cnt += hint.cnt;\n                }\n                if (cnt > OMEGA)\n                    continue; // the number of 1s in h is greater than \n                x256.clean();\n                const res = sigCoder.encode([cTilde, cs1, h]); //   sigEncode(c, z modq, h)\n                // rho, _K, tr is subarray of secretKey, cannot clean.\n                (0, utils_ts_1.cleanBytes)(cTilde, cs1, h, cHat, w1, w, z, y, rhoprime, mu, s1, s2, t0, ...A);\n                return res;\n            }\n            // @ts-ignore\n            throw new Error('Unreachable code path reached, report this error');\n        },\n        verify: (publicKey, msg, sig, externalMu = false) => {\n            // ML-DSA.Verify(pk, M, ): Verifes a signature  for a message M.\n            const [rho, t1] = publicCoder.decode(publicKey); // (, t1)  pkDecode(pk)\n            const tr = (0, sha3_1.shake256)(publicKey, { dkLen: TR_BYTES }); // 6: tr  H(BytesToBits(pk), 512)\n            if (sig.length !== sigCoder.bytesLen)\n                return false; // return false instead of exception\n            const [cTilde, z, h] = sigCoder.decode(sig); // (c, z, h)  sigDecode(),  Signers commitment hash c , response z and hint\n            if (h === false)\n                return false; // if h =  then return false\n            for (let i = 0; i < L; i++)\n                if (polyChknorm(z[i], GAMMA1 - BETA))\n                    return false;\n            const mu = externalMu\n                ? msg\n                : sha3_1.shake256.create({ dkLen: CRH_BYTES }).update(tr).update(msg).digest(); // 7:   H(tr||M, 512)\n            // Compute verifers challenge from c\n            const c = NTT.encode(SampleInBall(cTilde)); // c  SampleInBall(c1)\n            const zNtt = z.map((i) => i.slice()); // zNtt = NTT(z)\n            for (let i = 0; i < L; i++)\n                NTT.encode(zNtt[i]);\n            const wTick1 = [];\n            const xof = XOF128(rho);\n            for (let i = 0; i < K; i++) {\n                const ct12d = MultiplyNTTs(NTT.encode(polyShiftl(t1[i])), c); //c * t1 * (2**d)\n                const Az = newPoly(N); // // A * z\n                for (let j = 0; j < L; j++) {\n                    const aij = RejNTTPoly(xof.get(j, i)); // A[i][j] inplace\n                    polyAdd(Az, MultiplyNTTs(aij, zNtt[j]));\n                }\n                // wApprox = A*z - c*t1 * (2**d)\n                const wApprox = NTT.decode(polySub(Az, ct12d));\n                // Reconstruction of signers commitment\n                wTick1.push(polyUseHint(wApprox, h[i])); // w   UseHint(h, w'approx )\n            }\n            xof.clean();\n            // c H (||w1Encode(w1), 2),  Hash it; this should match c\n            const c2 = sha3_1.shake256\n                .create({ dkLen: C_TILDE_BYTES })\n                .update(mu)\n                .update(W1Vec.encode(wTick1))\n                .digest();\n            // Additional checks in FIPS-204:\n            // [[ ||z|| < 1   ]] and [[c  = c]] and [[number of 1s in h is  ]]\n            for (const t of h) {\n                const sum = t.reduce((acc, i) => acc + i, 0);\n                if (!(sum <= OMEGA))\n                    return false;\n            }\n            for (const t of z)\n                if (polyChknorm(t, GAMMA1 - BETA))\n                    return false;\n            return (0, utils_ts_1.equalBytes)(cTilde, c2);\n        },\n    };\n    return {\n        internal,\n        keygen: internal.keygen,\n        signRandBytes: internal.signRandBytes,\n        sign: (secretKey, msg, ctx = utils_ts_1.EMPTY, random) => {\n            const M = (0, utils_ts_1.getMessage)(msg, ctx);\n            const res = internal.sign(secretKey, M, random);\n            M.fill(0);\n            return res;\n        },\n        verify: (publicKey, msg, sig, ctx = utils_ts_1.EMPTY) => {\n            return internal.verify(publicKey, (0, utils_ts_1.getMessage)(msg, ctx), sig);\n        },\n        prehash: (hashName) => ({\n            sign: (secretKey, msg, ctx = utils_ts_1.EMPTY, random) => {\n                const M = (0, utils_ts_1.getMessagePrehash)(hashName, msg, ctx);\n                const res = internal.sign(secretKey, M, random);\n                M.fill(0);\n                return res;\n            },\n            verify: (publicKey, msg, sig, ctx = utils_ts_1.EMPTY) => {\n                return internal.verify(publicKey, (0, utils_ts_1.getMessagePrehash)(hashName, msg, ctx), sig);\n            },\n        }),\n    };\n}\n/** ML-DSA-44 for 128-bit security level. Not recommended after 2030, as per ASD. */\nexports.ml_dsa44 = getDilithium({\n    ...exports.PARAMS[2],\n    CRH_BYTES: 64,\n    TR_BYTES: 64,\n    C_TILDE_BYTES: 32,\n    XOF128: _crystals_ts_1.XOF128,\n    XOF256: _crystals_ts_1.XOF256,\n});\n/** ML-DSA-65 for 192-bit security level. Not recommended after 2030, as per ASD. */\nexports.ml_dsa65 = getDilithium({\n    ...exports.PARAMS[3],\n    CRH_BYTES: 64,\n    TR_BYTES: 64,\n    C_TILDE_BYTES: 48,\n    XOF128: _crystals_ts_1.XOF128,\n    XOF256: _crystals_ts_1.XOF256,\n});\n/** ML-DSA-87 for 256-bit security level. OK after 2030, as per ASD. */\nexports.ml_dsa87 = getDilithium({\n    ...exports.PARAMS[5],\n    CRH_BYTES: 64,\n    TR_BYTES: 64,\n    C_TILDE_BYTES: 64,\n    XOF128: _crystals_ts_1.XOF128,\n    XOF256: _crystals_ts_1.XOF256,\n});\n//# sourceMappingURL=ml-dsa.js.map","export function utf8Count(str) {\n    const strLength = str.length;\n    let byteLength = 0;\n    let pos = 0;\n    while (pos < strLength) {\n        let value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            byteLength++;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            byteLength += 2;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    const extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                byteLength += 3;\n            }\n            else {\n                // 4-byte\n                byteLength += 4;\n            }\n        }\n    }\n    return byteLength;\n}\nexport function utf8EncodeJs(str, output, outputOffset) {\n    const strLength = str.length;\n    let offset = outputOffset;\n    let pos = 0;\n    while (pos < strLength) {\n        let value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            output[offset++] = value;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            output[offset++] = ((value >> 6) & 0x1f) | 0xc0;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    const extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                output[offset++] = ((value >> 12) & 0x0f) | 0xe0;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n            else {\n                // 4-byte\n                output[offset++] = ((value >> 18) & 0x07) | 0xf0;\n                output[offset++] = ((value >> 12) & 0x3f) | 0x80;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n        }\n        output[offset++] = (value & 0x3f) | 0x80;\n    }\n}\n// TextEncoder and TextDecoder are standardized in whatwg encoding:\n// https://encoding.spec.whatwg.org/\n// and available in all the modern browsers:\n// https://caniuse.com/textencoder\n// They are available in Node.js since v12 LTS as well:\n// https://nodejs.org/api/globals.html#textencoder\nconst sharedTextEncoder = new TextEncoder();\n// This threshold should be determined by benchmarking, which might vary in engines and input data.\n// Run `npx ts-node benchmark/encode-string.ts` for details.\nconst TEXT_ENCODER_THRESHOLD = 50;\nexport function utf8EncodeTE(str, output, outputOffset) {\n    sharedTextEncoder.encodeInto(str, output.subarray(outputOffset));\n}\nexport function utf8Encode(str, output, outputOffset) {\n    if (str.length > TEXT_ENCODER_THRESHOLD) {\n        utf8EncodeTE(str, output, outputOffset);\n    }\n    else {\n        utf8EncodeJs(str, output, outputOffset);\n    }\n}\nconst CHUNK_SIZE = 4096;\nexport function utf8DecodeJs(bytes, inputOffset, byteLength) {\n    let offset = inputOffset;\n    const end = offset + byteLength;\n    const units = [];\n    let result = \"\";\n    while (offset < end) {\n        const byte1 = bytes[offset++];\n        if ((byte1 & 0x80) === 0) {\n            // 1 byte\n            units.push(byte1);\n        }\n        else if ((byte1 & 0xe0) === 0xc0) {\n            // 2 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 6) | byte2);\n        }\n        else if ((byte1 & 0xf0) === 0xe0) {\n            // 3 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            const byte3 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n        }\n        else if ((byte1 & 0xf8) === 0xf0) {\n            // 4 bytes\n            const byte2 = bytes[offset++] & 0x3f;\n            const byte3 = bytes[offset++] & 0x3f;\n            const byte4 = bytes[offset++] & 0x3f;\n            let unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n            if (unit > 0xffff) {\n                unit -= 0x10000;\n                units.push(((unit >>> 10) & 0x3ff) | 0xd800);\n                unit = 0xdc00 | (unit & 0x3ff);\n            }\n            units.push(unit);\n        }\n        else {\n            units.push(byte1);\n        }\n        if (units.length >= CHUNK_SIZE) {\n            result += String.fromCharCode(...units);\n            units.length = 0;\n        }\n    }\n    if (units.length > 0) {\n        result += String.fromCharCode(...units);\n    }\n    return result;\n}\nconst sharedTextDecoder = new TextDecoder();\n// This threshold should be determined by benchmarking, which might vary in engines and input data.\n// Run `npx ts-node benchmark/decode-string.ts` for details.\nconst TEXT_DECODER_THRESHOLD = 200;\nexport function utf8DecodeTD(bytes, inputOffset, byteLength) {\n    const stringBytes = bytes.subarray(inputOffset, inputOffset + byteLength);\n    return sharedTextDecoder.decode(stringBytes);\n}\nexport function utf8Decode(bytes, inputOffset, byteLength) {\n    if (byteLength > TEXT_DECODER_THRESHOLD) {\n        return utf8DecodeTD(bytes, inputOffset, byteLength);\n    }\n    else {\n        return utf8DecodeJs(bytes, inputOffset, byteLength);\n    }\n}\n//# sourceMappingURL=utf8.mjs.map","/**\n * ExtData is used to handle Extension Types that are not registered to ExtensionCodec.\n */\nexport class ExtData {\n    constructor(type, data) {\n        this.type = type;\n        this.data = data;\n    }\n}\n//# sourceMappingURL=ExtData.mjs.map","export class DecodeError extends Error {\n    constructor(message) {\n        super(message);\n        // fix the prototype chain in a cross-platform way\n        const proto = Object.create(DecodeError.prototype);\n        Object.setPrototypeOf(this, proto);\n        Object.defineProperty(this, \"name\", {\n            configurable: true,\n            enumerable: false,\n            value: DecodeError.name,\n        });\n    }\n}\n//# sourceMappingURL=DecodeError.mjs.map","// Integer Utility\nexport const UINT32_MAX = 4294967295;\n// DataView extension to handle int64 / uint64,\n// where the actual range is 53-bits integer (a.k.a. safe integer)\nexport function setUint64(view, offset, value) {\n    const high = value / 4294967296;\n    const low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function setInt64(view, offset, value) {\n    const high = Math.floor(value / 4294967296);\n    const low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nexport function getInt64(view, offset) {\n    const high = view.getInt32(offset);\n    const low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\nexport function getUint64(view, offset) {\n    const high = view.getUint32(offset);\n    const low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\n//# sourceMappingURL=int.mjs.map","// https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type\nimport { DecodeError } from \"./DecodeError.mjs\";\nimport { getInt64, setInt64 } from \"./utils/int.mjs\";\nexport const EXT_TIMESTAMP = -1;\nconst TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\nconst TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\nexport function encodeTimeSpecToTimestamp({ sec, nsec }) {\n    if (sec >= 0 && nsec >= 0 && sec <= TIMESTAMP64_MAX_SEC) {\n        // Here sec >= 0 && nsec >= 0\n        if (nsec === 0 && sec <= TIMESTAMP32_MAX_SEC) {\n            // timestamp 32 = { sec32 (unsigned) }\n            const rv = new Uint8Array(4);\n            const view = new DataView(rv.buffer);\n            view.setUint32(0, sec);\n            return rv;\n        }\n        else {\n            // timestamp 64 = { nsec30 (unsigned), sec34 (unsigned) }\n            const secHigh = sec / 0x100000000;\n            const secLow = sec & 0xffffffff;\n            const rv = new Uint8Array(8);\n            const view = new DataView(rv.buffer);\n            // nsec30 | secHigh2\n            view.setUint32(0, (nsec << 2) | (secHigh & 0x3));\n            // secLow32\n            view.setUint32(4, secLow);\n            return rv;\n        }\n    }\n    else {\n        // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n        const rv = new Uint8Array(12);\n        const view = new DataView(rv.buffer);\n        view.setUint32(0, nsec);\n        setInt64(view, 4, sec);\n        return rv;\n    }\n}\nexport function encodeDateToTimeSpec(date) {\n    const msec = date.getTime();\n    const sec = Math.floor(msec / 1e3);\n    const nsec = (msec - sec * 1e3) * 1e6;\n    // Normalizes { sec, nsec } to ensure nsec is unsigned.\n    const nsecInSec = Math.floor(nsec / 1e9);\n    return {\n        sec: sec + nsecInSec,\n        nsec: nsec - nsecInSec * 1e9,\n    };\n}\nexport function encodeTimestampExtension(object) {\n    if (object instanceof Date) {\n        const timeSpec = encodeDateToTimeSpec(object);\n        return encodeTimeSpecToTimestamp(timeSpec);\n    }\n    else {\n        return null;\n    }\n}\nexport function decodeTimestampToTimeSpec(data) {\n    const view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    // data may be 32, 64, or 96 bits\n    switch (data.byteLength) {\n        case 4: {\n            // timestamp 32 = { sec32 }\n            const sec = view.getUint32(0);\n            const nsec = 0;\n            return { sec, nsec };\n        }\n        case 8: {\n            // timestamp 64 = { nsec30, sec34 }\n            const nsec30AndSecHigh2 = view.getUint32(0);\n            const secLow32 = view.getUint32(4);\n            const sec = (nsec30AndSecHigh2 & 0x3) * 0x100000000 + secLow32;\n            const nsec = nsec30AndSecHigh2 >>> 2;\n            return { sec, nsec };\n        }\n        case 12: {\n            // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n            const sec = getInt64(view, 4);\n            const nsec = view.getUint32(0);\n            return { sec, nsec };\n        }\n        default:\n            throw new DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${data.length}`);\n    }\n}\nexport function decodeTimestampExtension(data) {\n    const timeSpec = decodeTimestampToTimeSpec(data);\n    return new Date(timeSpec.sec * 1e3 + timeSpec.nsec / 1e6);\n}\nexport const timestampExtension = {\n    type: EXT_TIMESTAMP,\n    encode: encodeTimestampExtension,\n    decode: decodeTimestampExtension,\n};\n//# sourceMappingURL=timestamp.mjs.map","// ExtensionCodec to handle MessagePack extensions\nimport { ExtData } from \"./ExtData.mjs\";\nimport { timestampExtension } from \"./timestamp.mjs\";\nexport class ExtensionCodec {\n    constructor() {\n        // built-in extensions\n        this.builtInEncoders = [];\n        this.builtInDecoders = [];\n        // custom extensions\n        this.encoders = [];\n        this.decoders = [];\n        this.register(timestampExtension);\n    }\n    register({ type, encode, decode, }) {\n        if (type >= 0) {\n            // custom extensions\n            this.encoders[type] = encode;\n            this.decoders[type] = decode;\n        }\n        else {\n            // built-in extensions\n            const index = -1 - type;\n            this.builtInEncoders[index] = encode;\n            this.builtInDecoders[index] = decode;\n        }\n    }\n    tryToEncode(object, context) {\n        // built-in extensions\n        for (let i = 0; i < this.builtInEncoders.length; i++) {\n            const encodeExt = this.builtInEncoders[i];\n            if (encodeExt != null) {\n                const data = encodeExt(object, context);\n                if (data != null) {\n                    const type = -1 - i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        // custom extensions\n        for (let i = 0; i < this.encoders.length; i++) {\n            const encodeExt = this.encoders[i];\n            if (encodeExt != null) {\n                const data = encodeExt(object, context);\n                if (data != null) {\n                    const type = i;\n                    return new ExtData(type, data);\n                }\n            }\n        }\n        if (object instanceof ExtData) {\n            // to keep ExtData as is\n            return object;\n        }\n        return null;\n    }\n    decode(data, type, context) {\n        const decodeExt = type < 0 ? this.builtInDecoders[-1 - type] : this.decoders[type];\n        if (decodeExt) {\n            return decodeExt(data, type, context);\n        }\n        else {\n            // decode() does not fail, returns ExtData instead.\n            return new ExtData(type, data);\n        }\n    }\n}\nExtensionCodec.defaultCodec = new ExtensionCodec();\n//# sourceMappingURL=ExtensionCodec.mjs.map","function isArrayBufferLike(buffer) {\n    return (buffer instanceof ArrayBuffer || (typeof SharedArrayBuffer !== \"undefined\" && buffer instanceof SharedArrayBuffer));\n}\nexport function ensureUint8Array(buffer) {\n    if (buffer instanceof Uint8Array) {\n        return buffer;\n    }\n    else if (ArrayBuffer.isView(buffer)) {\n        return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    else if (isArrayBufferLike(buffer)) {\n        return new Uint8Array(buffer);\n    }\n    else {\n        // ArrayLike<number>\n        return Uint8Array.from(buffer);\n    }\n}\n//# sourceMappingURL=typedArrays.mjs.map","import { utf8Count, utf8Encode } from \"./utils/utf8.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { setInt64, setUint64 } from \"./utils/int.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nexport const DEFAULT_MAX_DEPTH = 100;\nexport const DEFAULT_INITIAL_BUFFER_SIZE = 2048;\nexport class Encoder {\n    constructor(options) {\n        this.entered = false;\n        this.extensionCodec = options?.extensionCodec ?? ExtensionCodec.defaultCodec;\n        this.context = options?.context; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n        this.useBigInt64 = options?.useBigInt64 ?? false;\n        this.maxDepth = options?.maxDepth ?? DEFAULT_MAX_DEPTH;\n        this.initialBufferSize = options?.initialBufferSize ?? DEFAULT_INITIAL_BUFFER_SIZE;\n        this.sortKeys = options?.sortKeys ?? false;\n        this.forceFloat32 = options?.forceFloat32 ?? false;\n        this.ignoreUndefined = options?.ignoreUndefined ?? false;\n        this.forceIntegerToFloat = options?.forceIntegerToFloat ?? false;\n        this.pos = 0;\n        this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n        this.bytes = new Uint8Array(this.view.buffer);\n    }\n    clone() {\n        // Because of slightly special argument `context`,\n        // type assertion is needed.\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return new Encoder({\n            extensionCodec: this.extensionCodec,\n            context: this.context,\n            useBigInt64: this.useBigInt64,\n            maxDepth: this.maxDepth,\n            initialBufferSize: this.initialBufferSize,\n            sortKeys: this.sortKeys,\n            forceFloat32: this.forceFloat32,\n            ignoreUndefined: this.ignoreUndefined,\n            forceIntegerToFloat: this.forceIntegerToFloat,\n        });\n    }\n    reinitializeState() {\n        this.pos = 0;\n    }\n    /**\n     * This is almost equivalent to {@link Encoder#encode}, but it returns an reference of the encoder's internal buffer and thus much faster than {@link Encoder#encode}.\n     *\n     * @returns Encodes the object and returns a shared reference the encoder's internal buffer.\n     */\n    encodeSharedRef(object) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.encodeSharedRef(object);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.doEncode(object, 1);\n            return this.bytes.subarray(0, this.pos);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    /**\n     * @returns Encodes the object and returns a copy of the encoder's internal buffer.\n     */\n    encode(object) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.encode(object);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.doEncode(object, 1);\n            return this.bytes.slice(0, this.pos);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    doEncode(object, depth) {\n        if (depth > this.maxDepth) {\n            throw new Error(`Too deep objects in depth ${depth}`);\n        }\n        if (object == null) {\n            this.encodeNil();\n        }\n        else if (typeof object === \"boolean\") {\n            this.encodeBoolean(object);\n        }\n        else if (typeof object === \"number\") {\n            if (!this.forceIntegerToFloat) {\n                this.encodeNumber(object);\n            }\n            else {\n                this.encodeNumberAsFloat(object);\n            }\n        }\n        else if (typeof object === \"string\") {\n            this.encodeString(object);\n        }\n        else if (this.useBigInt64 && typeof object === \"bigint\") {\n            this.encodeBigInt64(object);\n        }\n        else {\n            this.encodeObject(object, depth);\n        }\n    }\n    ensureBufferSizeToWrite(sizeToWrite) {\n        const requiredSize = this.pos + sizeToWrite;\n        if (this.view.byteLength < requiredSize) {\n            this.resizeBuffer(requiredSize * 2);\n        }\n    }\n    resizeBuffer(newSize) {\n        const newBuffer = new ArrayBuffer(newSize);\n        const newBytes = new Uint8Array(newBuffer);\n        const newView = new DataView(newBuffer);\n        newBytes.set(this.bytes);\n        this.view = newView;\n        this.bytes = newBytes;\n    }\n    encodeNil() {\n        this.writeU8(0xc0);\n    }\n    encodeBoolean(object) {\n        if (object === false) {\n            this.writeU8(0xc2);\n        }\n        else {\n            this.writeU8(0xc3);\n        }\n    }\n    encodeNumber(object) {\n        if (!this.forceIntegerToFloat && Number.isSafeInteger(object)) {\n            if (object >= 0) {\n                if (object < 0x80) {\n                    // positive fixint\n                    this.writeU8(object);\n                }\n                else if (object < 0x100) {\n                    // uint 8\n                    this.writeU8(0xcc);\n                    this.writeU8(object);\n                }\n                else if (object < 0x10000) {\n                    // uint 16\n                    this.writeU8(0xcd);\n                    this.writeU16(object);\n                }\n                else if (object < 0x100000000) {\n                    // uint 32\n                    this.writeU8(0xce);\n                    this.writeU32(object);\n                }\n                else if (!this.useBigInt64) {\n                    // uint 64\n                    this.writeU8(0xcf);\n                    this.writeU64(object);\n                }\n                else {\n                    this.encodeNumberAsFloat(object);\n                }\n            }\n            else {\n                if (object >= -0x20) {\n                    // negative fixint\n                    this.writeU8(0xe0 | (object + 0x20));\n                }\n                else if (object >= -0x80) {\n                    // int 8\n                    this.writeU8(0xd0);\n                    this.writeI8(object);\n                }\n                else if (object >= -0x8000) {\n                    // int 16\n                    this.writeU8(0xd1);\n                    this.writeI16(object);\n                }\n                else if (object >= -0x80000000) {\n                    // int 32\n                    this.writeU8(0xd2);\n                    this.writeI32(object);\n                }\n                else if (!this.useBigInt64) {\n                    // int 64\n                    this.writeU8(0xd3);\n                    this.writeI64(object);\n                }\n                else {\n                    this.encodeNumberAsFloat(object);\n                }\n            }\n        }\n        else {\n            this.encodeNumberAsFloat(object);\n        }\n    }\n    encodeNumberAsFloat(object) {\n        if (this.forceFloat32) {\n            // float 32\n            this.writeU8(0xca);\n            this.writeF32(object);\n        }\n        else {\n            // float 64\n            this.writeU8(0xcb);\n            this.writeF64(object);\n        }\n    }\n    encodeBigInt64(object) {\n        if (object >= BigInt(0)) {\n            // uint 64\n            this.writeU8(0xcf);\n            this.writeBigUint64(object);\n        }\n        else {\n            // int 64\n            this.writeU8(0xd3);\n            this.writeBigInt64(object);\n        }\n    }\n    writeStringHeader(byteLength) {\n        if (byteLength < 32) {\n            // fixstr\n            this.writeU8(0xa0 + byteLength);\n        }\n        else if (byteLength < 0x100) {\n            // str 8\n            this.writeU8(0xd9);\n            this.writeU8(byteLength);\n        }\n        else if (byteLength < 0x10000) {\n            // str 16\n            this.writeU8(0xda);\n            this.writeU16(byteLength);\n        }\n        else if (byteLength < 0x100000000) {\n            // str 32\n            this.writeU8(0xdb);\n            this.writeU32(byteLength);\n        }\n        else {\n            throw new Error(`Too long string: ${byteLength} bytes in UTF-8`);\n        }\n    }\n    encodeString(object) {\n        const maxHeaderSize = 1 + 4;\n        const byteLength = utf8Count(object);\n        this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n        this.writeStringHeader(byteLength);\n        utf8Encode(object, this.bytes, this.pos);\n        this.pos += byteLength;\n    }\n    encodeObject(object, depth) {\n        // try to encode objects with custom codec first of non-primitives\n        const ext = this.extensionCodec.tryToEncode(object, this.context);\n        if (ext != null) {\n            this.encodeExtension(ext);\n        }\n        else if (Array.isArray(object)) {\n            this.encodeArray(object, depth);\n        }\n        else if (ArrayBuffer.isView(object)) {\n            this.encodeBinary(object);\n        }\n        else if (typeof object === \"object\") {\n            this.encodeMap(object, depth);\n        }\n        else {\n            // symbol, function and other special object come here unless extensionCodec handles them.\n            throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(object)}`);\n        }\n    }\n    encodeBinary(object) {\n        const size = object.byteLength;\n        if (size < 0x100) {\n            // bin 8\n            this.writeU8(0xc4);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // bin 16\n            this.writeU8(0xc5);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // bin 32\n            this.writeU8(0xc6);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large binary: ${size}`);\n        }\n        const bytes = ensureUint8Array(object);\n        this.writeU8a(bytes);\n    }\n    encodeArray(object, depth) {\n        const size = object.length;\n        if (size < 16) {\n            // fixarray\n            this.writeU8(0x90 + size);\n        }\n        else if (size < 0x10000) {\n            // array 16\n            this.writeU8(0xdc);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // array 32\n            this.writeU8(0xdd);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large array: ${size}`);\n        }\n        for (const item of object) {\n            this.doEncode(item, depth + 1);\n        }\n    }\n    countWithoutUndefined(object, keys) {\n        let count = 0;\n        for (const key of keys) {\n            if (object[key] !== undefined) {\n                count++;\n            }\n        }\n        return count;\n    }\n    encodeMap(object, depth) {\n        const keys = Object.keys(object);\n        if (this.sortKeys) {\n            keys.sort();\n        }\n        const size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n        if (size < 16) {\n            // fixmap\n            this.writeU8(0x80 + size);\n        }\n        else if (size < 0x10000) {\n            // map 16\n            this.writeU8(0xde);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // map 32\n            this.writeU8(0xdf);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large map object: ${size}`);\n        }\n        for (const key of keys) {\n            const value = object[key];\n            if (!(this.ignoreUndefined && value === undefined)) {\n                this.encodeString(key);\n                this.doEncode(value, depth + 1);\n            }\n        }\n    }\n    encodeExtension(ext) {\n        if (typeof ext.data === \"function\") {\n            const data = ext.data(this.pos + 6);\n            const size = data.length;\n            if (size >= 0x100000000) {\n                throw new Error(`Too large extension object: ${size}`);\n            }\n            this.writeU8(0xc9);\n            this.writeU32(size);\n            this.writeI8(ext.type);\n            this.writeU8a(data);\n            return;\n        }\n        const size = ext.data.length;\n        if (size === 1) {\n            // fixext 1\n            this.writeU8(0xd4);\n        }\n        else if (size === 2) {\n            // fixext 2\n            this.writeU8(0xd5);\n        }\n        else if (size === 4) {\n            // fixext 4\n            this.writeU8(0xd6);\n        }\n        else if (size === 8) {\n            // fixext 8\n            this.writeU8(0xd7);\n        }\n        else if (size === 16) {\n            // fixext 16\n            this.writeU8(0xd8);\n        }\n        else if (size < 0x100) {\n            // ext 8\n            this.writeU8(0xc7);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // ext 16\n            this.writeU8(0xc8);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // ext 32\n            this.writeU8(0xc9);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(`Too large extension object: ${size}`);\n        }\n        this.writeI8(ext.type);\n        this.writeU8a(ext.data);\n    }\n    writeU8(value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setUint8(this.pos, value);\n        this.pos++;\n    }\n    writeU8a(values) {\n        const size = values.length;\n        this.ensureBufferSizeToWrite(size);\n        this.bytes.set(values, this.pos);\n        this.pos += size;\n    }\n    writeI8(value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setInt8(this.pos, value);\n        this.pos++;\n    }\n    writeU16(value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setUint16(this.pos, value);\n        this.pos += 2;\n    }\n    writeI16(value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setInt16(this.pos, value);\n        this.pos += 2;\n    }\n    writeU32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setUint32(this.pos, value);\n        this.pos += 4;\n    }\n    writeI32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setInt32(this.pos, value);\n        this.pos += 4;\n    }\n    writeF32(value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setFloat32(this.pos, value);\n        this.pos += 4;\n    }\n    writeF64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setFloat64(this.pos, value);\n        this.pos += 8;\n    }\n    writeU64(value) {\n        this.ensureBufferSizeToWrite(8);\n        setUint64(this.view, this.pos, value);\n        this.pos += 8;\n    }\n    writeI64(value) {\n        this.ensureBufferSizeToWrite(8);\n        setInt64(this.view, this.pos, value);\n        this.pos += 8;\n    }\n    writeBigUint64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setBigUint64(this.pos, value);\n        this.pos += 8;\n    }\n    writeBigInt64(value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setBigInt64(this.pos, value);\n        this.pos += 8;\n    }\n}\n//# sourceMappingURL=Encoder.mjs.map","import { Encoder } from \"./Encoder.mjs\";\n/**\n * It encodes `value` in the MessagePack format and\n * returns a byte buffer.\n *\n * The returned buffer is a slice of a larger `ArrayBuffer`, so you have to use its `#byteOffset` and `#byteLength` in order to convert it to another typed arrays including NodeJS `Buffer`.\n */\nexport function encode(value, options) {\n    const encoder = new Encoder(options);\n    return encoder.encodeSharedRef(value);\n}\n//# sourceMappingURL=encode.mjs.map","export function prettyByte(byte) {\n    return `${byte < 0 ? \"-\" : \"\"}0x${Math.abs(byte).toString(16).padStart(2, \"0\")}`;\n}\n//# sourceMappingURL=prettyByte.mjs.map","import { prettyByte } from \"./utils/prettyByte.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int.mjs\";\nimport { utf8Decode } from \"./utils/utf8.mjs\";\nimport { ensureUint8Array } from \"./utils/typedArrays.mjs\";\nimport { CachedKeyDecoder } from \"./CachedKeyDecoder.mjs\";\nimport { DecodeError } from \"./DecodeError.mjs\";\nconst STATE_ARRAY = \"array\";\nconst STATE_MAP_KEY = \"map_key\";\nconst STATE_MAP_VALUE = \"map_value\";\nconst mapKeyConverter = (key) => {\n    if (typeof key === \"string\" || typeof key === \"number\") {\n        return key;\n    }\n    throw new DecodeError(\"The type of key must be string or number but \" + typeof key);\n};\nclass StackPool {\n    constructor() {\n        this.stack = [];\n        this.stackHeadPosition = -1;\n    }\n    get length() {\n        return this.stackHeadPosition + 1;\n    }\n    top() {\n        return this.stack[this.stackHeadPosition];\n    }\n    pushArrayState(size) {\n        const state = this.getUninitializedStateFromPool();\n        state.type = STATE_ARRAY;\n        state.position = 0;\n        state.size = size;\n        state.array = new Array(size);\n    }\n    pushMapState(size) {\n        const state = this.getUninitializedStateFromPool();\n        state.type = STATE_MAP_KEY;\n        state.readCount = 0;\n        state.size = size;\n        state.map = {};\n    }\n    getUninitializedStateFromPool() {\n        this.stackHeadPosition++;\n        if (this.stackHeadPosition === this.stack.length) {\n            const partialState = {\n                type: undefined,\n                size: 0,\n                array: undefined,\n                position: 0,\n                readCount: 0,\n                map: undefined,\n                key: null,\n            };\n            this.stack.push(partialState);\n        }\n        return this.stack[this.stackHeadPosition];\n    }\n    release(state) {\n        const topStackState = this.stack[this.stackHeadPosition];\n        if (topStackState !== state) {\n            throw new Error(\"Invalid stack state. Released state is not on top of the stack.\");\n        }\n        if (state.type === STATE_ARRAY) {\n            const partialState = state;\n            partialState.size = 0;\n            partialState.array = undefined;\n            partialState.position = 0;\n            partialState.type = undefined;\n        }\n        if (state.type === STATE_MAP_KEY || state.type === STATE_MAP_VALUE) {\n            const partialState = state;\n            partialState.size = 0;\n            partialState.map = undefined;\n            partialState.readCount = 0;\n            partialState.type = undefined;\n        }\n        this.stackHeadPosition--;\n    }\n    reset() {\n        this.stack.length = 0;\n        this.stackHeadPosition = -1;\n    }\n}\nconst HEAD_BYTE_REQUIRED = -1;\nconst EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nconst EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\ntry {\n    // IE11: The spec says it should throw RangeError,\n    // IE11: but in IE11 it throws TypeError.\n    EMPTY_VIEW.getInt8(0);\n}\ncatch (e) {\n    if (!(e instanceof RangeError)) {\n        throw new Error(\"This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access\");\n    }\n}\nconst MORE_DATA = new RangeError(\"Insufficient data\");\nconst sharedCachedKeyDecoder = new CachedKeyDecoder();\nexport class Decoder {\n    constructor(options) {\n        this.totalPos = 0;\n        this.pos = 0;\n        this.view = EMPTY_VIEW;\n        this.bytes = EMPTY_BYTES;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack = new StackPool();\n        this.entered = false;\n        this.extensionCodec = options?.extensionCodec ?? ExtensionCodec.defaultCodec;\n        this.context = options?.context; // needs a type assertion because EncoderOptions has no context property when ContextType is undefined\n        this.useBigInt64 = options?.useBigInt64 ?? false;\n        this.rawStrings = options?.rawStrings ?? false;\n        this.maxStrLength = options?.maxStrLength ?? UINT32_MAX;\n        this.maxBinLength = options?.maxBinLength ?? UINT32_MAX;\n        this.maxArrayLength = options?.maxArrayLength ?? UINT32_MAX;\n        this.maxMapLength = options?.maxMapLength ?? UINT32_MAX;\n        this.maxExtLength = options?.maxExtLength ?? UINT32_MAX;\n        this.keyDecoder = options?.keyDecoder !== undefined ? options.keyDecoder : sharedCachedKeyDecoder;\n        this.mapKeyConverter = options?.mapKeyConverter ?? mapKeyConverter;\n    }\n    clone() {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return new Decoder({\n            extensionCodec: this.extensionCodec,\n            context: this.context,\n            useBigInt64: this.useBigInt64,\n            rawStrings: this.rawStrings,\n            maxStrLength: this.maxStrLength,\n            maxBinLength: this.maxBinLength,\n            maxArrayLength: this.maxArrayLength,\n            maxMapLength: this.maxMapLength,\n            maxExtLength: this.maxExtLength,\n            keyDecoder: this.keyDecoder,\n        });\n    }\n    reinitializeState() {\n        this.totalPos = 0;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack.reset();\n        // view, bytes, and pos will be re-initialized in setBuffer()\n    }\n    setBuffer(buffer) {\n        const bytes = ensureUint8Array(buffer);\n        this.bytes = bytes;\n        this.view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n        this.pos = 0;\n    }\n    appendBuffer(buffer) {\n        if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n            this.setBuffer(buffer);\n        }\n        else {\n            const remainingData = this.bytes.subarray(this.pos);\n            const newData = ensureUint8Array(buffer);\n            // concat remainingData + newData\n            const newBuffer = new Uint8Array(remainingData.length + newData.length);\n            newBuffer.set(remainingData);\n            newBuffer.set(newData, remainingData.length);\n            this.setBuffer(newBuffer);\n        }\n    }\n    hasRemaining(size) {\n        return this.view.byteLength - this.pos >= size;\n    }\n    createExtraByteError(posToShow) {\n        const { view, pos } = this;\n        return new RangeError(`Extra ${view.byteLength - pos} of ${view.byteLength} byte(s) found at buffer[${posToShow}]`);\n    }\n    /**\n     * @throws {@link DecodeError}\n     * @throws {@link RangeError}\n     */\n    decode(buffer) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.decode(buffer);\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.setBuffer(buffer);\n            const object = this.doDecodeSync();\n            if (this.hasRemaining(1)) {\n                throw this.createExtraByteError(this.pos);\n            }\n            return object;\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    *decodeMulti(buffer) {\n        if (this.entered) {\n            const instance = this.clone();\n            yield* instance.decodeMulti(buffer);\n            return;\n        }\n        try {\n            this.entered = true;\n            this.reinitializeState();\n            this.setBuffer(buffer);\n            while (this.hasRemaining(1)) {\n                yield this.doDecodeSync();\n            }\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    async decodeAsync(stream) {\n        if (this.entered) {\n            const instance = this.clone();\n            return instance.decodeAsync(stream);\n        }\n        try {\n            this.entered = true;\n            let decoded = false;\n            let object;\n            for await (const buffer of stream) {\n                if (decoded) {\n                    this.entered = false;\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                this.appendBuffer(buffer);\n                try {\n                    object = this.doDecodeSync();\n                    decoded = true;\n                }\n                catch (e) {\n                    if (!(e instanceof RangeError)) {\n                        throw e; // rethrow\n                    }\n                    // fallthrough\n                }\n                this.totalPos += this.pos;\n            }\n            if (decoded) {\n                if (this.hasRemaining(1)) {\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                return object;\n            }\n            const { headByte, pos, totalPos } = this;\n            throw new RangeError(`Insufficient data in parsing ${prettyByte(headByte)} at ${totalPos} (${pos} in the current buffer)`);\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    decodeArrayStream(stream) {\n        return this.decodeMultiAsync(stream, true);\n    }\n    decodeStream(stream) {\n        return this.decodeMultiAsync(stream, false);\n    }\n    async *decodeMultiAsync(stream, isArray) {\n        if (this.entered) {\n            const instance = this.clone();\n            yield* instance.decodeMultiAsync(stream, isArray);\n            return;\n        }\n        try {\n            this.entered = true;\n            let isArrayHeaderRequired = isArray;\n            let arrayItemsLeft = -1;\n            for await (const buffer of stream) {\n                if (isArray && arrayItemsLeft === 0) {\n                    throw this.createExtraByteError(this.totalPos);\n                }\n                this.appendBuffer(buffer);\n                if (isArrayHeaderRequired) {\n                    arrayItemsLeft = this.readArraySize();\n                    isArrayHeaderRequired = false;\n                    this.complete();\n                }\n                try {\n                    while (true) {\n                        yield this.doDecodeSync();\n                        if (--arrayItemsLeft === 0) {\n                            break;\n                        }\n                    }\n                }\n                catch (e) {\n                    if (!(e instanceof RangeError)) {\n                        throw e; // rethrow\n                    }\n                    // fallthrough\n                }\n                this.totalPos += this.pos;\n            }\n        }\n        finally {\n            this.entered = false;\n        }\n    }\n    doDecodeSync() {\n        DECODE: while (true) {\n            const headByte = this.readHeadByte();\n            let object;\n            if (headByte >= 0xe0) {\n                // negative fixint (111x xxxx) 0xe0 - 0xff\n                object = headByte - 0x100;\n            }\n            else if (headByte < 0xc0) {\n                if (headByte < 0x80) {\n                    // positive fixint (0xxx xxxx) 0x00 - 0x7f\n                    object = headByte;\n                }\n                else if (headByte < 0x90) {\n                    // fixmap (1000 xxxx) 0x80 - 0x8f\n                    const size = headByte - 0x80;\n                    if (size !== 0) {\n                        this.pushMapState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = {};\n                    }\n                }\n                else if (headByte < 0xa0) {\n                    // fixarray (1001 xxxx) 0x90 - 0x9f\n                    const size = headByte - 0x90;\n                    if (size !== 0) {\n                        this.pushArrayState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = [];\n                    }\n                }\n                else {\n                    // fixstr (101x xxxx) 0xa0 - 0xbf\n                    const byteLength = headByte - 0xa0;\n                    object = this.decodeString(byteLength, 0);\n                }\n            }\n            else if (headByte === 0xc0) {\n                // nil\n                object = null;\n            }\n            else if (headByte === 0xc2) {\n                // false\n                object = false;\n            }\n            else if (headByte === 0xc3) {\n                // true\n                object = true;\n            }\n            else if (headByte === 0xca) {\n                // float 32\n                object = this.readF32();\n            }\n            else if (headByte === 0xcb) {\n                // float 64\n                object = this.readF64();\n            }\n            else if (headByte === 0xcc) {\n                // uint 8\n                object = this.readU8();\n            }\n            else if (headByte === 0xcd) {\n                // uint 16\n                object = this.readU16();\n            }\n            else if (headByte === 0xce) {\n                // uint 32\n                object = this.readU32();\n            }\n            else if (headByte === 0xcf) {\n                // uint 64\n                if (this.useBigInt64) {\n                    object = this.readU64AsBigInt();\n                }\n                else {\n                    object = this.readU64();\n                }\n            }\n            else if (headByte === 0xd0) {\n                // int 8\n                object = this.readI8();\n            }\n            else if (headByte === 0xd1) {\n                // int 16\n                object = this.readI16();\n            }\n            else if (headByte === 0xd2) {\n                // int 32\n                object = this.readI32();\n            }\n            else if (headByte === 0xd3) {\n                // int 64\n                if (this.useBigInt64) {\n                    object = this.readI64AsBigInt();\n                }\n                else {\n                    object = this.readI64();\n                }\n            }\n            else if (headByte === 0xd9) {\n                // str 8\n                const byteLength = this.lookU8();\n                object = this.decodeString(byteLength, 1);\n            }\n            else if (headByte === 0xda) {\n                // str 16\n                const byteLength = this.lookU16();\n                object = this.decodeString(byteLength, 2);\n            }\n            else if (headByte === 0xdb) {\n                // str 32\n                const byteLength = this.lookU32();\n                object = this.decodeString(byteLength, 4);\n            }\n            else if (headByte === 0xdc) {\n                // array 16\n                const size = this.readU16();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xdd) {\n                // array 32\n                const size = this.readU32();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xde) {\n                // map 16\n                const size = this.readU16();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xdf) {\n                // map 32\n                const size = this.readU32();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xc4) {\n                // bin 8\n                const size = this.lookU8();\n                object = this.decodeBinary(size, 1);\n            }\n            else if (headByte === 0xc5) {\n                // bin 16\n                const size = this.lookU16();\n                object = this.decodeBinary(size, 2);\n            }\n            else if (headByte === 0xc6) {\n                // bin 32\n                const size = this.lookU32();\n                object = this.decodeBinary(size, 4);\n            }\n            else if (headByte === 0xd4) {\n                // fixext 1\n                object = this.decodeExtension(1, 0);\n            }\n            else if (headByte === 0xd5) {\n                // fixext 2\n                object = this.decodeExtension(2, 0);\n            }\n            else if (headByte === 0xd6) {\n                // fixext 4\n                object = this.decodeExtension(4, 0);\n            }\n            else if (headByte === 0xd7) {\n                // fixext 8\n                object = this.decodeExtension(8, 0);\n            }\n            else if (headByte === 0xd8) {\n                // fixext 16\n                object = this.decodeExtension(16, 0);\n            }\n            else if (headByte === 0xc7) {\n                // ext 8\n                const size = this.lookU8();\n                object = this.decodeExtension(size, 1);\n            }\n            else if (headByte === 0xc8) {\n                // ext 16\n                const size = this.lookU16();\n                object = this.decodeExtension(size, 2);\n            }\n            else if (headByte === 0xc9) {\n                // ext 32\n                const size = this.lookU32();\n                object = this.decodeExtension(size, 4);\n            }\n            else {\n                throw new DecodeError(`Unrecognized type byte: ${prettyByte(headByte)}`);\n            }\n            this.complete();\n            const stack = this.stack;\n            while (stack.length > 0) {\n                // arrays and maps\n                const state = stack.top();\n                if (state.type === STATE_ARRAY) {\n                    state.array[state.position] = object;\n                    state.position++;\n                    if (state.position === state.size) {\n                        object = state.array;\n                        stack.release(state);\n                    }\n                    else {\n                        continue DECODE;\n                    }\n                }\n                else if (state.type === STATE_MAP_KEY) {\n                    if (object === \"__proto__\") {\n                        throw new DecodeError(\"The key __proto__ is not allowed\");\n                    }\n                    state.key = this.mapKeyConverter(object);\n                    state.type = STATE_MAP_VALUE;\n                    continue DECODE;\n                }\n                else {\n                    // it must be `state.type === State.MAP_VALUE` here\n                    state.map[state.key] = object;\n                    state.readCount++;\n                    if (state.readCount === state.size) {\n                        object = state.map;\n                        stack.release(state);\n                    }\n                    else {\n                        state.key = null;\n                        state.type = STATE_MAP_KEY;\n                        continue DECODE;\n                    }\n                }\n            }\n            return object;\n        }\n    }\n    readHeadByte() {\n        if (this.headByte === HEAD_BYTE_REQUIRED) {\n            this.headByte = this.readU8();\n            // console.log(\"headByte\", prettyByte(this.headByte));\n        }\n        return this.headByte;\n    }\n    complete() {\n        this.headByte = HEAD_BYTE_REQUIRED;\n    }\n    readArraySize() {\n        const headByte = this.readHeadByte();\n        switch (headByte) {\n            case 0xdc:\n                return this.readU16();\n            case 0xdd:\n                return this.readU32();\n            default: {\n                if (headByte < 0xa0) {\n                    return headByte - 0x90;\n                }\n                else {\n                    throw new DecodeError(`Unrecognized array type byte: ${prettyByte(headByte)}`);\n                }\n            }\n        }\n    }\n    pushMapState(size) {\n        if (size > this.maxMapLength) {\n            throw new DecodeError(`Max length exceeded: map length (${size}) > maxMapLengthLength (${this.maxMapLength})`);\n        }\n        this.stack.pushMapState(size);\n    }\n    pushArrayState(size) {\n        if (size > this.maxArrayLength) {\n            throw new DecodeError(`Max length exceeded: array length (${size}) > maxArrayLength (${this.maxArrayLength})`);\n        }\n        this.stack.pushArrayState(size);\n    }\n    decodeString(byteLength, headerOffset) {\n        if (!this.rawStrings || this.stateIsMapKey()) {\n            return this.decodeUtf8String(byteLength, headerOffset);\n        }\n        return this.decodeBinary(byteLength, headerOffset);\n    }\n    /**\n     * @throws {@link RangeError}\n     */\n    decodeUtf8String(byteLength, headerOffset) {\n        if (byteLength > this.maxStrLength) {\n            throw new DecodeError(`Max length exceeded: UTF-8 byte length (${byteLength}) > maxStrLength (${this.maxStrLength})`);\n        }\n        if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n            throw MORE_DATA;\n        }\n        const offset = this.pos + headerOffset;\n        let object;\n        if (this.stateIsMapKey() && this.keyDecoder?.canBeCached(byteLength)) {\n            object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n        }\n        else {\n            object = utf8Decode(this.bytes, offset, byteLength);\n        }\n        this.pos += headerOffset + byteLength;\n        return object;\n    }\n    stateIsMapKey() {\n        if (this.stack.length > 0) {\n            const state = this.stack.top();\n            return state.type === STATE_MAP_KEY;\n        }\n        return false;\n    }\n    /**\n     * @throws {@link RangeError}\n     */\n    decodeBinary(byteLength, headOffset) {\n        if (byteLength > this.maxBinLength) {\n            throw new DecodeError(`Max length exceeded: bin length (${byteLength}) > maxBinLength (${this.maxBinLength})`);\n        }\n        if (!this.hasRemaining(byteLength + headOffset)) {\n            throw MORE_DATA;\n        }\n        const offset = this.pos + headOffset;\n        const object = this.bytes.subarray(offset, offset + byteLength);\n        this.pos += headOffset + byteLength;\n        return object;\n    }\n    decodeExtension(size, headOffset) {\n        if (size > this.maxExtLength) {\n            throw new DecodeError(`Max length exceeded: ext length (${size}) > maxExtLength (${this.maxExtLength})`);\n        }\n        const extType = this.view.getInt8(this.pos + headOffset);\n        const data = this.decodeBinary(size, headOffset + 1 /* extType */);\n        return this.extensionCodec.decode(data, extType, this.context);\n    }\n    lookU8() {\n        return this.view.getUint8(this.pos);\n    }\n    lookU16() {\n        return this.view.getUint16(this.pos);\n    }\n    lookU32() {\n        return this.view.getUint32(this.pos);\n    }\n    readU8() {\n        const value = this.view.getUint8(this.pos);\n        this.pos++;\n        return value;\n    }\n    readI8() {\n        const value = this.view.getInt8(this.pos);\n        this.pos++;\n        return value;\n    }\n    readU16() {\n        const value = this.view.getUint16(this.pos);\n        this.pos += 2;\n        return value;\n    }\n    readI16() {\n        const value = this.view.getInt16(this.pos);\n        this.pos += 2;\n        return value;\n    }\n    readU32() {\n        const value = this.view.getUint32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readI32() {\n        const value = this.view.getInt32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readU64() {\n        const value = getUint64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readI64() {\n        const value = getInt64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readU64AsBigInt() {\n        const value = this.view.getBigUint64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readI64AsBigInt() {\n        const value = this.view.getBigInt64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n    readF32() {\n        const value = this.view.getFloat32(this.pos);\n        this.pos += 4;\n        return value;\n    }\n    readF64() {\n        const value = this.view.getFloat64(this.pos);\n        this.pos += 8;\n        return value;\n    }\n}\n//# sourceMappingURL=Decoder.mjs.map","import { utf8DecodeJs } from \"./utils/utf8.mjs\";\nconst DEFAULT_MAX_KEY_LENGTH = 16;\nconst DEFAULT_MAX_LENGTH_PER_KEY = 16;\nexport class CachedKeyDecoder {\n    constructor(maxKeyLength = DEFAULT_MAX_KEY_LENGTH, maxLengthPerKey = DEFAULT_MAX_LENGTH_PER_KEY) {\n        this.hit = 0;\n        this.miss = 0;\n        this.maxKeyLength = maxKeyLength;\n        this.maxLengthPerKey = maxLengthPerKey;\n        // avoid `new Array(N)`, which makes a sparse array,\n        // because a sparse array is typically slower than a non-sparse array.\n        this.caches = [];\n        for (let i = 0; i < this.maxKeyLength; i++) {\n            this.caches.push([]);\n        }\n    }\n    canBeCached(byteLength) {\n        return byteLength > 0 && byteLength <= this.maxKeyLength;\n    }\n    find(bytes, inputOffset, byteLength) {\n        const records = this.caches[byteLength - 1];\n        FIND_CHUNK: for (const record of records) {\n            const recordBytes = record.bytes;\n            for (let j = 0; j < byteLength; j++) {\n                if (recordBytes[j] !== bytes[inputOffset + j]) {\n                    continue FIND_CHUNK;\n                }\n            }\n            return record.str;\n        }\n        return null;\n    }\n    store(bytes, value) {\n        const records = this.caches[bytes.length - 1];\n        const record = { bytes, str: value };\n        if (records.length >= this.maxLengthPerKey) {\n            // `records` are full!\n            // Set `record` to an arbitrary position.\n            records[(Math.random() * records.length) | 0] = record;\n        }\n        else {\n            records.push(record);\n        }\n    }\n    decode(bytes, inputOffset, byteLength) {\n        const cachedValue = this.find(bytes, inputOffset, byteLength);\n        if (cachedValue != null) {\n            this.hit++;\n            return cachedValue;\n        }\n        this.miss++;\n        const str = utf8DecodeJs(bytes, inputOffset, byteLength);\n        // Ensure to copy a slice of bytes because the bytes may be a NodeJS Buffer and Buffer#slice() returns a reference to its internal ArrayBuffer.\n        const slicedCopyOfBytes = Uint8Array.prototype.slice.call(bytes, inputOffset, inputOffset + byteLength);\n        this.store(slicedCopyOfBytes, str);\n        return str;\n    }\n}\n//# sourceMappingURL=CachedKeyDecoder.mjs.map","import { Decoder } from \"./Decoder.mjs\";\n/**\n * It decodes a single MessagePack object in a buffer.\n *\n * This is a synchronous decoding function.\n * See other variants for asynchronous decoding: {@link decodeAsync}, {@link decodeMultiStream}, or {@link decodeArrayStream}.\n *\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decode(buffer, options) {\n    const decoder = new Decoder(options);\n    return decoder.decode(buffer);\n}\n/**\n * It decodes multiple MessagePack objects in a buffer.\n * This is corresponding to {@link decodeMultiStream}.\n *\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decodeMulti(buffer, options) {\n    const decoder = new Decoder(options);\n    return decoder.decodeMulti(buffer);\n}\n//# sourceMappingURL=decode.mjs.map","// utility for whatwg streams\nexport function isAsyncIterable(object) {\n    return object[Symbol.asyncIterator] != null;\n}\nexport async function* asyncIterableFromStream(stream) {\n    const reader = stream.getReader();\n    try {\n        while (true) {\n            const { done, value } = await reader.read();\n            if (done) {\n                return;\n            }\n            yield value;\n        }\n    }\n    finally {\n        reader.releaseLock();\n    }\n}\nexport function ensureAsyncIterable(streamLike) {\n    if (isAsyncIterable(streamLike)) {\n        return streamLike;\n    }\n    else {\n        return asyncIterableFromStream(streamLike);\n    }\n}\n//# sourceMappingURL=stream.mjs.map","import { Decoder } from \"./Decoder.mjs\";\nimport { ensureAsyncIterable } from \"./utils/stream.mjs\";\n/**\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport async function decodeAsync(streamLike, options) {\n    const stream = ensureAsyncIterable(streamLike);\n    const decoder = new Decoder(options);\n    return decoder.decodeAsync(stream);\n}\n/**\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decodeArrayStream(streamLike, options) {\n    const stream = ensureAsyncIterable(streamLike);\n    const decoder = new Decoder(options);\n    return decoder.decodeArrayStream(stream);\n}\n/**\n * @throws {@link RangeError} if the buffer is incomplete, including the case where the buffer is empty.\n * @throws {@link DecodeError} if the buffer contains invalid data.\n */\nexport function decodeMultiStream(streamLike, options) {\n    const stream = ensureAsyncIterable(streamLike);\n    const decoder = new Decoder(options);\n    return decoder.decodeStream(stream);\n}\n//# sourceMappingURL=decodeAsync.mjs.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expand_message_xmd = expand_message_xmd;\nexports.expand_message_xof = expand_message_xof;\nexports.hash_to_field = hash_to_field;\nexports.isogenyMap = isogenyMap;\nexports.createHasher = createHasher;\nconst utils_ts_1 = require(\"../utils.js\");\nconst modular_ts_1 = require(\"./modular.js\");\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = utils_ts_1.bytesToNumberBE;\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value, length) {\n    anum(value);\n    anum(length);\n    if (value < 0 || value >= 1 << (8 * length))\n        throw new Error('invalid I2OSP input: ' + value);\n    const res = Array.from({ length }).fill(0);\n    for (let i = length - 1; i >= 0; i--) {\n        res[i] = value & 0xff;\n        value >>>= 8;\n    }\n    return new Uint8Array(res);\n}\nfunction strxor(a, b) {\n    const arr = new Uint8Array(a.length);\n    for (let i = 0; i < a.length; i++) {\n        arr[i] = a[i] ^ b[i];\n    }\n    return arr;\n}\nfunction anum(item) {\n    if (!Number.isSafeInteger(item))\n        throw new Error('number expected');\n}\n/**\n * Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits.\n * [RFC 9380 5.3.1](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.1).\n */\nfunction expand_message_xmd(msg, DST, lenInBytes, H) {\n    (0, utils_ts_1.abytes)(msg);\n    (0, utils_ts_1.abytes)(DST);\n    anum(lenInBytes);\n    // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n    if (DST.length > 255)\n        DST = H((0, utils_ts_1.concatBytes)((0, utils_ts_1.utf8ToBytes)('H2C-OVERSIZE-DST-'), DST));\n    const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n    const ell = Math.ceil(lenInBytes / b_in_bytes);\n    if (lenInBytes > 65535 || ell > 255)\n        throw new Error('expand_message_xmd: invalid lenInBytes');\n    const DST_prime = (0, utils_ts_1.concatBytes)(DST, i2osp(DST.length, 1));\n    const Z_pad = i2osp(0, r_in_bytes);\n    const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n    const b = new Array(ell);\n    const b_0 = H((0, utils_ts_1.concatBytes)(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n    b[0] = H((0, utils_ts_1.concatBytes)(b_0, i2osp(1, 1), DST_prime));\n    for (let i = 1; i <= ell; i++) {\n        const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n        b[i] = H((0, utils_ts_1.concatBytes)(...args));\n    }\n    const pseudo_random_bytes = (0, utils_ts_1.concatBytes)(...b);\n    return pseudo_random_bytes.slice(0, lenInBytes);\n}\n/**\n * Produces a uniformly random byte string using an extendable-output function (XOF) H.\n * 1. The collision resistance of H MUST be at least k bits.\n * 2. H MUST be an XOF that has been proved indifferentiable from\n *    a random oracle under a reasonable cryptographic assumption.\n * [RFC 9380 5.3.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.2).\n */\nfunction expand_message_xof(msg, DST, lenInBytes, k, H) {\n    (0, utils_ts_1.abytes)(msg);\n    (0, utils_ts_1.abytes)(DST);\n    anum(lenInBytes);\n    // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n    // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n    if (DST.length > 255) {\n        const dkLen = Math.ceil((2 * k) / 8);\n        DST = H.create({ dkLen }).update((0, utils_ts_1.utf8ToBytes)('H2C-OVERSIZE-DST-')).update(DST).digest();\n    }\n    if (lenInBytes > 65535 || DST.length > 255)\n        throw new Error('expand_message_xof: invalid lenInBytes');\n    return (H.create({ dkLen: lenInBytes })\n        .update(msg)\n        .update(i2osp(lenInBytes, 2))\n        // 2. DST_prime = DST || I2OSP(len(DST), 1)\n        .update(DST)\n        .update(i2osp(DST.length, 1))\n        .digest());\n}\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\n * [RFC 9380 5.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.2).\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nfunction hash_to_field(msg, count, options) {\n    (0, utils_ts_1._validateObject)(options, {\n        p: 'bigint',\n        m: 'number',\n        k: 'number',\n        hash: 'function',\n    });\n    const { p, k, m, hash, expand, DST: _DST } = options;\n    if (!(0, utils_ts_1.isBytes)(_DST) && typeof _DST !== 'string')\n        throw new Error('DST must be string or uint8array');\n    if (!(0, utils_ts_1.isHash)(options.hash))\n        throw new Error('expected valid hash');\n    (0, utils_ts_1.abytes)(msg);\n    anum(count);\n    const DST = typeof _DST === 'string' ? (0, utils_ts_1.utf8ToBytes)(_DST) : _DST;\n    const log2p = p.toString(2).length;\n    const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n    const len_in_bytes = count * m * L;\n    let prb; // pseudo_random_bytes\n    if (expand === 'xmd') {\n        prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n    }\n    else if (expand === 'xof') {\n        prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n    }\n    else if (expand === '_internal_pass') {\n        // for internal tests only\n        prb = msg;\n    }\n    else {\n        throw new Error('expand must be \"xmd\" or \"xof\"');\n    }\n    const u = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const e = new Array(m);\n        for (let j = 0; j < m; j++) {\n            const elm_offset = L * (j + i * m);\n            const tv = prb.subarray(elm_offset, elm_offset + L);\n            e[j] = (0, modular_ts_1.mod)(os2ip(tv), p);\n        }\n        u[i] = e;\n    }\n    return u;\n}\nfunction isogenyMap(field, map) {\n    // Make same order as in spec\n    const coeff = map.map((i) => Array.from(i).reverse());\n    return (x, y) => {\n        const [xn, xd, yn, yd] = coeff.map((val) => val.reduce((acc, i) => field.add(field.mul(acc, x), i)));\n        // 6.6.3\n        // Exceptional cases of iso_map are inputs that cause the denominator of\n        // either rational function to evaluate to zero; such cases MUST return\n        // the identity point on E.\n        const [xd_inv, yd_inv] = (0, modular_ts_1.FpInvertBatch)(field, [xd, yd], true);\n        x = field.mul(xn, xd_inv); // xNum / xDen\n        y = field.mul(y, field.mul(yn, yd_inv)); // y * (yNum / yDev)\n        return { x, y };\n    };\n}\n/** Creates hash-to-curve methods from EC Point and mapToCurve function. See {@link H2CHasher}. */\nfunction createHasher(Point, mapToCurve, defaults) {\n    if (typeof mapToCurve !== 'function')\n        throw new Error('mapToCurve() must be defined');\n    function map(num) {\n        return Point.fromAffine(mapToCurve(num));\n    }\n    function clear(initial) {\n        const P = initial.clearCofactor();\n        if (P.equals(Point.ZERO))\n            return Point.ZERO; // zero will throw in assert\n        P.assertValidity();\n        return P;\n    }\n    return {\n        defaults,\n        hashToCurve(msg, options) {\n            const dst = defaults.DST ? defaults.DST : {};\n            const opts = Object.assign({}, defaults, dst, options);\n            const u = hash_to_field(msg, 2, opts);\n            const u0 = map(u[0]);\n            const u1 = map(u[1]);\n            return clear(u0.add(u1));\n        },\n        encodeToCurve(msg, options) {\n            const dst = defaults.encodeDST ? defaults.encodeDST : {};\n            const opts = Object.assign({}, defaults, dst, options);\n            const u = hash_to_field(msg, 1, opts);\n            return clear(map(u[0]));\n        },\n        /** See {@link H2CHasher} */\n        mapToCurve(scalars) {\n            if (!Array.isArray(scalars))\n                throw new Error('expected array of bigints');\n            for (const i of scalars)\n                if (typeof i !== 'bigint')\n                    throw new Error('expected array of bigints');\n            return clear(map(scalars));\n        },\n    };\n}\n//# sourceMappingURL=hash-to-curve.js.map","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MemoryChannel = void 0;\nexports.pipeChannels = pipeChannels;\nexports.unpipeChannels = unpipeChannels;\nexports.StreamChannel = StreamChannel;\nexports.convertWebWritableStreamToNodeWritable = convertWebWritableStreamToNodeWritable;\nexports.convertWebReadableStreamToNodeReadable = convertWebReadableStreamToNodeReadable;\nconst cryptoChannel_1 = __importDefault(require(\"./cryptoChannel\"));\nconst stream_1 = require(\"stream\");\nconst buffer_1 = require(\"buffer/\");\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n/**\n * Pipes two channels together, creating a bidirectional flow where\n * messages sent to one channel are automatically forwarded to the other.\n * @param channel1 The first channel to connect\n * @param channel2 The second channel to connect\n * @returns A Promise that resolves when both channels close\n */\nfunction pipeChannels(channel1, channel2) {\n    let running = true;\n    // Start both piping directions\n    const pipe1to2 = async () => {\n        try {\n            await channel1.start();\n            await channel2.start();\n            console.log(\"pipe1to2\");\n            while (running) {\n                try {\n                    const data = await channel1.receive();\n                    console.log(\"pipe1to2\", data);\n                    if (!running || data.length === 0)\n                        break;\n                    channel2.send(data);\n                }\n                catch (error) {\n                    if (running)\n                        console.error(\"Error in pipe1to2:\", error);\n                    break;\n                }\n            }\n        }\n        catch (error) {\n            console.error(\"Fatal error in pipe1to2:\", error);\n        }\n    };\n    const pipe2to1 = async () => {\n        try {\n            while (running) {\n                console.log(\"pipe2to1\");\n                try {\n                    const data = await channel2.receive();\n                    console.log(\"pipe2to1\", data);\n                    if (!running || data.length === 0)\n                        break;\n                    channel1.send(data);\n                }\n                catch (error) {\n                    if (running)\n                        console.error(\"Error in pipe2to1:\", error);\n                    break;\n                }\n            }\n        }\n        catch (error) {\n            console.error(\"Fatal error in pipe2to1:\", error);\n        }\n    };\n    // Start the pipes\n    pipe1to2();\n    pipe2to1();\n    // Return function to stop piping\n    return async () => {\n        running = false;\n        await Promise.all([channel1.close(), channel2.close()]);\n    };\n}\n/**\n * Utility function that stops an active channel pipe\n * @param channel1 The first channel in the pipe\n * @param channel2 The second channel in the pipe\n */\nasync function unpipeChannels(channel1, channel2) {\n    await Promise.all([channel1.close(), channel2.close()]);\n}\nfunction StreamChannel(channel) {\n    const onData = async (callback) => {\n        let message = await channel.receive();\n        while (message) {\n            callback(message);\n            if (message.toString(\"utf-8\") === \"EOF\") {\n                return;\n            }\n            message = await channel.receive();\n        }\n    };\n    const getWriteStream = () => {\n        const stream = new stream_1.Stream.Writable({\n            write: (chunk, encoding, done) => {\n                channel.send(chunk);\n                done();\n            },\n        });\n        return stream;\n    };\n    const upload = async (stream) => {\n        return new Promise((resolve) => {\n            const writeStream = getWriteStream();\n            stream.pipe(writeStream).once(\"finish\", () => {\n                channel.send(buffer_1.Buffer.from(\"EOF\", \"utf-8\"));\n                writeStream.end();\n                resolve();\n            });\n        });\n    };\n    const uploadData = async (data) => {\n        const stream = stream_1.Readable.from(data);\n        await upload(stream);\n    };\n    const download = async (stream) => {\n        const readStream = getReadStream();\n        const result = new Promise((resolve) => readStream.on(\"end\", () => {\n            resolve();\n        }));\n        readStream.pipe(stream);\n        await result;\n    };\n    const downloadData = async () => {\n        const readStream = getReadStream();\n        const chunks = [];\n        const result = new Promise((resolve) => readStream.on(\"end\", () => {\n            resolve(buffer_1.Buffer.concat(chunks));\n        }));\n        const stream = new stream_1.Stream.Writable({\n            write: (chunk, encoding, done) => {\n                chunks.push(chunk);\n                done();\n            },\n        });\n        readStream.pipe(stream);\n        return result;\n    };\n    const getReadStream = () => {\n        let push;\n        let temp;\n        const stream = new stream_1.Stream.Readable({\n            read() {\n                push = (data) => this.push(data);\n            },\n        });\n        onData((buf) => {\n            if (buf.length === 3 && buf.toString(\"utf-8\") === \"EOF\" && push) {\n                temp && push(temp);\n                push(null);\n                stream.destroy();\n            }\n            temp = temp ? buffer_1.Buffer.concat([temp, buf]) : buf;\n            if (push) {\n                !push(temp) && (push = null);\n                temp = null;\n            }\n        });\n        return stream;\n    };\n    return {\n        getReadStream,\n        getWriteStream,\n        upload,\n        uploadData,\n        download,\n        downloadData,\n    };\n}\nfunction convertWebWritableStreamToNodeWritable(webWritableStream) {\n    const writer = webWritableStream.getWriter();\n    return new stream_1.Writable({\n        async write(chunk, encoding, callback) {\n            try {\n                // Get a writer from the Web WritableStream\n                await writer.write(chunk);\n                writer.releaseLock(); // Release the lock on the writer after writing\n                callback(); // Signal that the chunk has been processed\n            }\n            catch (error) {\n                callback(); // Signal an error if it occurred\n            }\n        },\n        async final(callback) {\n            try {\n                // Close the Web WritableStream\n                const writer = webWritableStream.getWriter();\n                await writer.close();\n                writer.releaseLock(); // Release the lock on the writer after closing\n                callback(); // Signal that the stream is finished\n            }\n            catch (error) {\n                callback(); // Signal an error if it occurred during close\n            }\n        },\n        async destroy(error, callback) {\n            try {\n                // Abort the Web WritableStream in case of an error\n                const writer = webWritableStream.getWriter();\n                await writer.abort(error);\n                writer.releaseLock(); // Release the lock on the writer after aborting\n                callback(error); // Signal that the stream is destroyed\n            }\n            catch (abortError) {\n                callback(null); // Signal an error if it occurred during abort\n            }\n        },\n    });\n}\nfunction convertWebReadableStreamToNodeReadable(webReadableStream) {\n    const reader = webReadableStream.getReader();\n    return new stream_1.Readable({\n        async read() {\n            try {\n                while (true) {\n                    const { done, value } = await reader.read();\n                    //console.log(value);\n                    if (done) {\n                        this.push(null); // Signal the end of the stream\n                        break;\n                    }\n                    this.push(buffer_1.Buffer.from(value)); // Need to convert Uint8Array to Buffer\n                }\n            }\n            catch (error) {\n                this.destroy();\n            }\n        },\n    });\n}\nclass MemoryChannel {\n    constructor() {\n        this.messageQueue = [];\n        this.waitingResolvers = [];\n        this.connected = false;\n        this.connectedCallbacks = [];\n        this.closed = false;\n    }\n    setChannel(chan, name) {\n        this.name = name;\n        this.otherend = chan;\n    }\n    static createBidirectionnal() {\n        const input = new MemoryChannel();\n        const output = new MemoryChannel();\n        input.setChannel(output);\n        output.setChannel(input);\n        return input;\n    }\n    onConnected(callback) {\n        if (this.connected) {\n            callback();\n        }\n        else {\n            this.connectedCallbacks.push(callback);\n        }\n    }\n    static createEncryptedBidirectionnal(key = cryptoChannel_1.default.generateKey()) {\n        const input = cryptoChannel_1.default.encryptChannel(new MemoryChannel(), key);\n        const output = cryptoChannel_1.default.encryptChannel(new MemoryChannel(), key);\n        input.setChannel(output);\n        output.setChannel(input);\n        return input;\n    }\n    getConnectionString() {\n        return \"vaultys://memory\";\n    }\n    fromConnectionString(string) {\n        return string === \"vaultys://memory\" ? new MemoryChannel() : null;\n    }\n    setLogger(logger) {\n        this.logger = logger;\n    }\n    setInjector(injector) {\n        this.injector = injector;\n    }\n    async start() {\n        this.connected = true;\n        this.connectedCallbacks.forEach((callback) => callback());\n        this.connectedCallbacks = []; // Clear callbacks after calling them\n    }\n    async send(data) {\n        if (this.closed) {\n            throw new Error(\"Cannot send on closed channel\");\n        }\n        if (!this.otherend) {\n            throw new Error(\"No other end connected to this channel\");\n        }\n        // Log the data if a logger is set\n        if (this.logger) {\n            this.logger(data);\n        }\n        // Process data through injector if present\n        let processedData = data;\n        if (this.injector) {\n            processedData = await this.injector(data);\n        }\n        // // Signal that this end is connected\n        if (!this.connected) {\n            await this.start();\n        }\n        // Deliver the message to the other end\n        this.otherend.deliverMessage(processedData);\n    }\n    deliverMessage(data) {\n        // If there are waiting receivers, deliver directly to the first one\n        if (this.waitingResolvers.length > 0) {\n            const resolver = this.waitingResolvers.shift();\n            resolver(data);\n        }\n        else {\n            // Otherwise queue the message\n            this.messageQueue.push(data);\n        }\n    }\n    async receive() {\n        if (this.closed) {\n            throw new Error(\"Cannot receive on closed channel\");\n        }\n        //console.log(this);\n        // If there are queued messages, return the first one\n        if (this.messageQueue.length > 0) {\n            return this.messageQueue.shift();\n        }\n        // Otherwise, wait for a message to arrive\n        return new Promise((resolve) => {\n            this.waitingResolvers.push(resolve);\n        });\n    }\n    async close() {\n        this.closed = true;\n        // Clear any waiting receivers with an error\n        while (this.waitingResolvers.length > 0) {\n            const resolver = this.waitingResolvers.shift();\n            // Resolve with empty buffer to indicate channel closed\n            resolver(buffer_1.Buffer.alloc(0));\n        }\n        // Clear the message queue\n        this.messageQueue = [];\n    }\n}\nexports.MemoryChannel = MemoryChannel;\n","'use strict';\n\nconst Encoder = require('./encoder');\nconst ObjectRecorder = require('./objectRecorder');\nconst {Buffer} = require('buffer');\n\n/**\n * Implement value sharing.\n *\n * @see {@link cbor.schmorp.de/value-sharing}\n */\nclass SharedValueEncoder extends Encoder {\n  constructor(opts) {\n    super(opts);\n    this.valueSharing = new ObjectRecorder();\n  }\n\n  /**\n   * @param {object} obj Object to encode.\n   * @param {import('./encoder').ObjectOptions} [opts] Options for encoding\n   *   this object.\n   * @returns {boolean} True on success.\n   * @throws {Error} Loop detected.\n   * @ignore\n   */\n  _pushObject(obj, opts) {\n    if (obj !== null) {\n      const shared = this.valueSharing.check(obj);\n      switch (shared) {\n        case ObjectRecorder.FIRST:\n          // Prefix with tag 28\n          this._pushTag(28);\n          break;\n        case ObjectRecorder.NEVER:\n          // Do nothing\n          break;\n        default:\n          return this._pushTag(29) && this._pushIntNum(shared);\n      }\n    }\n    return super._pushObject(obj, opts);\n  }\n\n  /**\n   * Between encoding runs, stop recording, and start outputing correct tags.\n   */\n  stopRecording() {\n    this.valueSharing.stop();\n  }\n\n  /**\n   * Remove the existing recording and start over.  Do this between encoding\n   * pairs.\n   */\n  clearRecording() {\n    this.valueSharing.clear();\n  }\n\n  /**\n   * Encode one or more JavaScript objects, and return a Buffer containing the\n   * CBOR bytes.\n   *\n   * @param {...any} objs The objects to encode.\n   * @returns {Buffer} The encoded objects.\n   */\n  static encode(...objs) {\n    const enc = new SharedValueEncoder();\n    // eslint-disable-next-line no-empty-function\n    enc.on('data', () => {}); // Sink all writes\n\n    for (const o of objs) {\n      enc.pushAny(o);\n    }\n    enc.stopRecording();\n    enc.removeAllListeners('data');\n    return enc._encodeAll(objs);\n  }\n\n  /**\n   * Encode one or more JavaScript objects canonically (slower!), and return\n   * a Buffer containing the CBOR bytes.\n   *\n   * @param {...any} _objs The objects to encode.\n   * @returns {Buffer} Never.\n   * @throws {Error} Always.  This combination doesn't work at the moment.\n   */\n  static encodeCanonical(..._objs) {\n    throw new Error('Cannot encode canonically in a SharedValueEncoder, which serializes objects multiple times.');\n  }\n\n  /**\n   * Encode one JavaScript object using the given options.\n   *\n   * @param {any} obj The object to encode.\n   * @param {import('./encoder').EncodingOptions} [options={}]\n   *   Passed to the Encoder constructor.\n   * @returns {Buffer} The encoded objects.\n   * @static\n   */\n  static encodeOne(obj, options) {\n    const enc = new SharedValueEncoder(options);\n    // eslint-disable-next-line no-empty-function\n    enc.on('data', () => {}); // Sink all writes\n    enc.pushAny(obj);\n    enc.stopRecording();\n    enc.removeAllListeners('data');\n    return enc._encodeAll([obj]);\n  }\n\n  /**\n   * Encode one JavaScript object using the given options in a way that\n   * is more resilient to objects being larger than the highWaterMark\n   * number of bytes.  As with the other static encode functions, this\n   * will still use a large amount of memory.  Use a stream-based approach\n   * directly if you need to process large and complicated inputs.\n   *\n   * @param {any} obj The object to encode.\n   * @param {import('./encoder').EncodingOptions} [options={}]\n   *   Passed to the Encoder constructor.\n   * @returns {Promise<Buffer>} A promise for the encoded buffer.\n   */\n  static encodeAsync(obj, options) {\n    return new Promise((resolve, reject) => {\n      /** @type {Buffer[]} */\n      const bufs = [];\n      const enc = new SharedValueEncoder(options);\n      // eslint-disable-next-line no-empty-function\n      enc.on('data', () => {});\n      enc.on('error', reject);\n      enc.on('finish', () => resolve(Buffer.concat(bufs)));\n      enc.pushAny(obj);\n      enc.stopRecording();\n      enc.removeAllListeners('data');\n      enc.on('data', buf => bufs.push(buf));\n      enc.pushAny(obj);\n      enc.end();\n    });\n  }\n}\n\nmodule.exports = SharedValueEncoder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edwards = edwards;\nexports.eddsa = eddsa;\nexports.twistedEdwards = twistedEdwards;\n/**\n * Twisted Edwards curve. The formula is: ax + y = 1 + dxy.\n * For design rationale of types / exports, see weierstrass module documentation.\n * Untwisted Edwards curves exist, but they aren't used in real-world protocols.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_ts_1 = require(\"../utils.js\");\nconst curve_ts_1 = require(\"./curve.js\");\nconst modular_ts_1 = require(\"./modular.js\");\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _8n = BigInt(8);\n// verification rule is either zip215 or rfc8032 / nist186-5. Consult fromHex:\nconst VERIFY_DEFAULT = { zip215: true };\nfunction isEdValidXY(Fp, CURVE, x, y) {\n    const x2 = Fp.sqr(x);\n    const y2 = Fp.sqr(y);\n    const left = Fp.add(Fp.mul(CURVE.a, x2), y2);\n    const right = Fp.add(Fp.ONE, Fp.mul(CURVE.d, Fp.mul(x2, y2)));\n    return Fp.eql(left, right);\n}\nfunction edwards(CURVE, curveOpts = {}) {\n    const { Fp, Fn } = (0, curve_ts_1._createCurveFields)('edwards', CURVE, curveOpts);\n    const { h: cofactor, n: CURVE_ORDER } = CURVE;\n    (0, utils_ts_1._validateObject)(curveOpts, {}, { uvRatio: 'function' });\n    // Important:\n    // There are some places where Fp.BYTES is used instead of nByteLength.\n    // So far, everything has been tested with curves of Fp.BYTES == nByteLength.\n    // TODO: test and find curves which behave otherwise.\n    const MASK = _2n << (BigInt(Fn.BYTES * 8) - _1n);\n    const modP = (n) => Fp.create(n); // Function overrides\n    // sqrt(u/v)\n    const uvRatio = curveOpts.uvRatio ||\n        ((u, v) => {\n            try {\n                return { isValid: true, value: Fp.sqrt(Fp.div(u, v)) };\n            }\n            catch (e) {\n                return { isValid: false, value: _0n };\n            }\n        });\n    // Validate whether the passed curve params are valid.\n    // equation ax + y = 1 + dxy should work for generator point.\n    if (!isEdValidXY(Fp, CURVE, CURVE.Gx, CURVE.Gy))\n        throw new Error('bad curve params: generator point');\n    /**\n     * Asserts coordinate is valid: 0 <= n < MASK.\n     * Coordinates >= Fp.ORDER are allowed for zip215.\n     */\n    function acoord(title, n, banZero = false) {\n        const min = banZero ? _1n : _0n;\n        (0, utils_ts_1.aInRange)('coordinate ' + title, n, min, MASK);\n        return n;\n    }\n    function aextpoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ExtendedPoint expected');\n    }\n    // Converts Extended point to default (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    const toAffineMemo = (0, utils_ts_1.memoized)((p, iz) => {\n        const { ex: x, ey: y, ez: z } = p;\n        const is0 = p.is0();\n        if (iz == null)\n            iz = is0 ? _8n : Fp.inv(z); // 8 was chosen arbitrarily\n        const ax = modP(x * iz);\n        const ay = modP(y * iz);\n        const zz = modP(z * iz);\n        if (is0)\n            return { x: _0n, y: _1n };\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return { x: ax, y: ay };\n    });\n    const assertValidMemo = (0, utils_ts_1.memoized)((p) => {\n        const { a, d } = CURVE;\n        if (p.is0())\n            throw new Error('bad point: ZERO'); // TODO: optimize, with vars below?\n        // Equation in affine coordinates: ax + y = 1 + dxy\n        // Equation in projective coordinates (X/Z, Y/Z, Z):  (aX + Y)Z = Z + dXY\n        const { ex: X, ey: Y, ez: Z, et: T } = p;\n        const X2 = modP(X * X); // X\n        const Y2 = modP(Y * Y); // Y\n        const Z2 = modP(Z * Z); // Z\n        const Z4 = modP(Z2 * Z2); // Z\n        const aX2 = modP(X2 * a); // aX\n        const left = modP(Z2 * modP(aX2 + Y2)); // (aX + Y)Z\n        const right = modP(Z4 + modP(d * modP(X2 * Y2))); // Z + dXY\n        if (left !== right)\n            throw new Error('bad point: equation left != right (1)');\n        // In Extended coordinates we also have T, which is x*y=T/Z: check X*Y == Z*T\n        const XY = modP(X * Y);\n        const ZT = modP(Z * T);\n        if (XY !== ZT)\n            throw new Error('bad point: equation left != right (2)');\n        return true;\n    });\n    // Extended Point works in extended coordinates: (X, Y, Z, T)  (x=X/Z, y=Y/Z, T=xy).\n    // https://en.wikipedia.org/wiki/Twisted_Edwards_curve#Extended_coordinates\n    class Point {\n        constructor(ex, ey, ez, et) {\n            this.ex = acoord('x', ex);\n            this.ey = acoord('y', ey);\n            this.ez = acoord('z', ez, true);\n            this.et = acoord('t', et);\n            Object.freeze(this);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        static fromAffine(p) {\n            if (p instanceof Point)\n                throw new Error('extended point not allowed');\n            const { x, y } = p || {};\n            acoord('x', x);\n            acoord('y', y);\n            return new Point(x, y, _1n, modP(x * y));\n        }\n        static normalizeZ(points) {\n            return (0, curve_ts_1.normalizeZ)(Point, 'ez', points);\n        }\n        // Multiscalar Multiplication\n        static msm(points, scalars) {\n            return (0, curve_ts_1.pippenger)(Point, Fn, points, scalars);\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this.precompute(windowSize);\n        }\n        precompute(windowSize = 8, isLazy = true) {\n            wnaf.setWindowSize(this, windowSize);\n            if (!isLazy)\n                this.multiply(_2n); // random number\n            return this;\n        }\n        // Not required for fromHex(), which always creates valid points.\n        // Could be useful for fromAffine().\n        assertValidity() {\n            assertValidMemo(this);\n        }\n        // Compare one point to another.\n        equals(other) {\n            aextpoint(other);\n            const { ex: X1, ey: Y1, ez: Z1 } = this;\n            const { ex: X2, ey: Y2, ez: Z2 } = other;\n            const X1Z2 = modP(X1 * Z2);\n            const X2Z1 = modP(X2 * Z1);\n            const Y1Z2 = modP(Y1 * Z2);\n            const Y2Z1 = modP(Y2 * Z1);\n            return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        negate() {\n            // Flips point sign to a negative one (-x, y in affine coords)\n            return new Point(modP(-this.ex), this.ey, this.ez, modP(-this.et));\n        }\n        // Fast algo for doubling Extended Point.\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#doubling-dbl-2008-hwcd\n        // Cost: 4M + 4S + 1*a + 6add + 1*2.\n        double() {\n            const { a } = CURVE;\n            const { ex: X1, ey: Y1, ez: Z1 } = this;\n            const A = modP(X1 * X1); // A = X12\n            const B = modP(Y1 * Y1); // B = Y12\n            const C = modP(_2n * modP(Z1 * Z1)); // C = 2*Z12\n            const D = modP(a * A); // D = a*A\n            const x1y1 = X1 + Y1;\n            const E = modP(modP(x1y1 * x1y1) - A - B); // E = (X1+Y1)2-A-B\n            const G = D + B; // G = D+B\n            const F = G - C; // F = G-C\n            const H = D - B; // H = D-B\n            const X3 = modP(E * F); // X3 = E*F\n            const Y3 = modP(G * H); // Y3 = G*H\n            const T3 = modP(E * H); // T3 = E*H\n            const Z3 = modP(F * G); // Z3 = F*G\n            return new Point(X3, Y3, Z3, T3);\n        }\n        // Fast algo for adding 2 Extended Points.\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#addition-add-2008-hwcd\n        // Cost: 9M + 1*a + 1*d + 7add.\n        add(other) {\n            aextpoint(other);\n            const { a, d } = CURVE;\n            const { ex: X1, ey: Y1, ez: Z1, et: T1 } = this;\n            const { ex: X2, ey: Y2, ez: Z2, et: T2 } = other;\n            const A = modP(X1 * X2); // A = X1*X2\n            const B = modP(Y1 * Y2); // B = Y1*Y2\n            const C = modP(T1 * d * T2); // C = T1*d*T2\n            const D = modP(Z1 * Z2); // D = Z1*Z2\n            const E = modP((X1 + Y1) * (X2 + Y2) - A - B); // E = (X1+Y1)*(X2+Y2)-A-B\n            const F = D - C; // F = D-C\n            const G = D + C; // G = D+C\n            const H = modP(B - a * A); // H = B-a*A\n            const X3 = modP(E * F); // X3 = E*F\n            const Y3 = modP(G * H); // Y3 = G*H\n            const T3 = modP(E * H); // T3 = E*H\n            const Z3 = modP(F * G); // Z3 = F*G\n            return new Point(X3, Y3, Z3, T3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        // Constant-time multiplication.\n        multiply(scalar) {\n            const n = scalar;\n            (0, utils_ts_1.aInRange)('scalar', n, _1n, CURVE_ORDER); // 1 <= scalar < L\n            const { p, f } = wnaf.wNAFCached(this, n, Point.normalizeZ);\n            return Point.normalizeZ([p, f])[0];\n        }\n        // Non-constant-time multiplication. Uses double-and-add algorithm.\n        // It's faster, but should only be used when you don't care about\n        // an exposed private key e.g. sig verification.\n        // Does NOT allow scalars higher than CURVE.n.\n        // Accepts optional accumulator to merge with multiply (important for sparse scalars)\n        multiplyUnsafe(scalar, acc = Point.ZERO) {\n            const n = scalar;\n            (0, utils_ts_1.aInRange)('scalar', n, _0n, CURVE_ORDER); // 0 <= scalar < L\n            if (n === _0n)\n                return Point.ZERO;\n            if (this.is0() || n === _1n)\n                return this;\n            return wnaf.wNAFCachedUnsafe(this, n, Point.normalizeZ, acc);\n        }\n        // Checks if point is of small order.\n        // If you add something to small order point, you will have \"dirty\"\n        // point with torsion component.\n        // Multiplies point by cofactor and checks if the result is 0.\n        isSmallOrder() {\n            return this.multiplyUnsafe(cofactor).is0();\n        }\n        // Multiplies point by curve order and checks if the result is 0.\n        // Returns `false` is the point is dirty.\n        isTorsionFree() {\n            return wnaf.wNAFCachedUnsafe(this, CURVE_ORDER).is0();\n        }\n        // Converts Extended point to default (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        toAffine(invertedZ) {\n            return toAffineMemo(this, invertedZ);\n        }\n        clearCofactor() {\n            if (cofactor === _1n)\n                return this;\n            return this.multiplyUnsafe(cofactor);\n        }\n        static fromBytes(bytes, zip215 = false) {\n            (0, utils_ts_1.abytes)(bytes);\n            return this.fromHex(bytes, zip215);\n        }\n        // Converts hash string or Uint8Array to Point.\n        // Uses algo from RFC8032 5.1.3.\n        static fromHex(hex, zip215 = false) {\n            const { d, a } = CURVE;\n            const len = Fp.BYTES;\n            hex = (0, utils_ts_1.ensureBytes)('pointHex', hex, len); // copy hex to a new array\n            (0, utils_ts_1.abool)('zip215', zip215);\n            const normed = hex.slice(); // copy again, we'll manipulate it\n            const lastByte = hex[len - 1]; // select last byte\n            normed[len - 1] = lastByte & ~0x80; // clear last bit\n            const y = (0, utils_ts_1.bytesToNumberLE)(normed);\n            // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n            // RFC8032 prohibits >= p, but ZIP215 doesn't\n            // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n            // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n            const max = zip215 ? MASK : Fp.ORDER;\n            (0, utils_ts_1.aInRange)('pointHex.y', y, _0n, max);\n            // Ed25519: x = (y-1)/(dy+1) mod p. Ed448: x = (y-1)/(dy-1) mod p. Generic case:\n            // ax+y=1+dxy => y-1=dxy-ax => y-1=x(dy-a) => x=(y-1)/(dy-a)\n            const y2 = modP(y * y); // denominator is always non-0 mod p.\n            const u = modP(y2 - _1n); // u = y - 1\n            const v = modP(d * y2 - a); // v = d y + 1.\n            let { isValid, value: x } = uvRatio(u, v); // (u/v)\n            if (!isValid)\n                throw new Error('Point.fromHex: invalid y coordinate');\n            const isXOdd = (x & _1n) === _1n; // There are 2 square roots. Use x_0 bit to select proper\n            const isLastByteOdd = (lastByte & 0x80) !== 0; // x_0, last bit\n            if (!zip215 && x === _0n && isLastByteOdd)\n                // if x=0 and x_0 = 1, fail\n                throw new Error('Point.fromHex: x=0 and x_0=1');\n            if (isLastByteOdd !== isXOdd)\n                x = modP(-x); // if x_0 != x mod 2, set x = p-x\n            return Point.fromAffine({ x, y });\n        }\n        static fromPrivateScalar(scalar) {\n            return Point.BASE.multiply(scalar);\n        }\n        toBytes() {\n            const { x, y } = this.toAffine();\n            const bytes = (0, utils_ts_1.numberToBytesLE)(y, Fp.BYTES); // each y has 2 x values (x, -y)\n            bytes[bytes.length - 1] |= x & _1n ? 0x80 : 0; // when compressing, it's enough to store y\n            return bytes; // and use the last byte to encode sign of x\n        }\n        /** @deprecated use `toBytes` */\n        toRawBytes() {\n            return this.toBytes();\n        }\n        toHex() {\n            return (0, utils_ts_1.bytesToHex)(this.toBytes());\n        }\n        toString() {\n            return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\n        }\n    }\n    // base / generator point\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, _1n, modP(CURVE.Gx * CURVE.Gy));\n    // zero / infinity / identity point\n    Point.ZERO = new Point(_0n, _1n, _1n, _0n); // 0, 1, 1, 0\n    // fields\n    Point.Fp = Fp;\n    Point.Fn = Fn;\n    const wnaf = (0, curve_ts_1.wNAF)(Point, Fn.BYTES * 8); // Fn.BITS?\n    return Point;\n}\n/**\n * Initializes EdDSA signatures over given Edwards curve.\n */\nfunction eddsa(Point, eddsaOpts) {\n    (0, utils_ts_1._validateObject)(eddsaOpts, {\n        hash: 'function',\n    }, {\n        adjustScalarBytes: 'function',\n        randomBytes: 'function',\n        domain: 'function',\n        prehash: 'function',\n        mapToCurve: 'function',\n    });\n    const { prehash, hash: cHash } = eddsaOpts;\n    const { BASE: G, Fp, Fn } = Point;\n    const CURVE_ORDER = Fn.ORDER;\n    const randomBytes_ = eddsaOpts.randomBytes || utils_ts_1.randomBytes;\n    const adjustScalarBytes = eddsaOpts.adjustScalarBytes || ((bytes) => bytes); // NOOP\n    const domain = eddsaOpts.domain ||\n        ((data, ctx, phflag) => {\n            (0, utils_ts_1.abool)('phflag', phflag);\n            if (ctx.length || phflag)\n                throw new Error('Contexts/pre-hash are not supported');\n            return data;\n        }); // NOOP\n    function modN(a) {\n        return Fn.create(a);\n    }\n    // Little-endian SHA512 with modulo n\n    function modN_LE(hash) {\n        // Not using Fn.fromBytes: hash can be 2*Fn.BYTES\n        return modN((0, utils_ts_1.bytesToNumberLE)(hash));\n    }\n    // Get the hashed private scalar per RFC8032 5.1.5\n    function getPrivateScalar(key) {\n        const len = Fp.BYTES;\n        key = (0, utils_ts_1.ensureBytes)('private key', key, len);\n        // Hash private key with curve's hash function to produce uniformingly random input\n        // Check byte lengths: ensure(64, h(ensure(32, key)))\n        const hashed = (0, utils_ts_1.ensureBytes)('hashed private key', cHash(key), 2 * len);\n        const head = adjustScalarBytes(hashed.slice(0, len)); // clear first half bits, produce FE\n        const prefix = hashed.slice(len, 2 * len); // second half is called key prefix (5.1.6)\n        const scalar = modN_LE(head); // The actual private scalar\n        return { head, prefix, scalar };\n    }\n    // Convenience method that creates public key from scalar. RFC8032 5.1.5\n    function getExtendedPublicKey(key) {\n        const { head, prefix, scalar } = getPrivateScalar(key);\n        const point = G.multiply(scalar); // Point on Edwards curve aka public key\n        const pointBytes = point.toBytes();\n        return { head, prefix, scalar, point, pointBytes };\n    }\n    // Calculates EdDSA pub key. RFC8032 5.1.5. Privkey is hashed. Use first half with 3 bits cleared\n    function getPublicKey(privKey) {\n        return getExtendedPublicKey(privKey).pointBytes;\n    }\n    // int('LE', SHA512(dom2(F, C) || msgs)) mod N\n    function hashDomainToScalar(context = Uint8Array.of(), ...msgs) {\n        const msg = (0, utils_ts_1.concatBytes)(...msgs);\n        return modN_LE(cHash(domain(msg, (0, utils_ts_1.ensureBytes)('context', context), !!prehash)));\n    }\n    /** Signs message with privateKey. RFC8032 5.1.6 */\n    function sign(msg, privKey, options = {}) {\n        msg = (0, utils_ts_1.ensureBytes)('message', msg);\n        if (prehash)\n            msg = prehash(msg); // for ed25519ph etc.\n        const { prefix, scalar, pointBytes } = getExtendedPublicKey(privKey);\n        const r = hashDomainToScalar(options.context, prefix, msg); // r = dom2(F, C) || prefix || PH(M)\n        const R = G.multiply(r).toBytes(); // R = rG\n        const k = hashDomainToScalar(options.context, R, pointBytes, msg); // R || A || PH(M)\n        const s = modN(r + k * scalar); // S = (r + k * s) mod L\n        (0, utils_ts_1.aInRange)('signature.s', s, _0n, CURVE_ORDER); // 0 <= s < l\n        const L = Fp.BYTES;\n        const res = (0, utils_ts_1.concatBytes)(R, (0, utils_ts_1.numberToBytesLE)(s, L));\n        return (0, utils_ts_1.ensureBytes)('result', res, L * 2); // 64-byte signature\n    }\n    const verifyOpts = VERIFY_DEFAULT;\n    /**\n     * Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\n     * An extended group equation is checked.\n     */\n    function verify(sig, msg, publicKey, options = verifyOpts) {\n        const { context, zip215 } = options;\n        const len = Fp.BYTES; // Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\n        sig = (0, utils_ts_1.ensureBytes)('signature', sig, 2 * len); // An extended group equation is checked.\n        msg = (0, utils_ts_1.ensureBytes)('message', msg);\n        publicKey = (0, utils_ts_1.ensureBytes)('publicKey', publicKey, len);\n        if (zip215 !== undefined)\n            (0, utils_ts_1.abool)('zip215', zip215);\n        if (prehash)\n            msg = prehash(msg); // for ed25519ph, etc\n        const s = (0, utils_ts_1.bytesToNumberLE)(sig.slice(len, 2 * len));\n        let A, R, SB;\n        try {\n            // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n            // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n            // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n            A = Point.fromHex(publicKey, zip215);\n            R = Point.fromHex(sig.slice(0, len), zip215);\n            SB = G.multiplyUnsafe(s); // 0 <= s < l is done inside\n        }\n        catch (error) {\n            return false;\n        }\n        if (!zip215 && A.isSmallOrder())\n            return false;\n        const k = hashDomainToScalar(context, R.toBytes(), A.toBytes(), msg);\n        const RkA = R.add(A.multiplyUnsafe(k));\n        // Extended group equation\n        // [8][S]B = [8]R + [8][k]A'\n        return RkA.subtract(SB).clearCofactor().is0();\n    }\n    G.precompute(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\n    const utils = {\n        getExtendedPublicKey,\n        /** ed25519 priv keys are uniform 32b. No need to check for modulo bias, like in secp256k1. */\n        randomPrivateKey: () => randomBytes_(Fp.BYTES),\n        /**\n         * We're doing scalar multiplication (used in getPublicKey etc) with precomputed BASE_POINT\n         * values. This slows down first getPublicKey() by milliseconds (see Speed section),\n         * but allows to speed-up subsequent getPublicKey() calls up to 20x.\n         * @param windowSize 2, 4, 8, 16\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            return point.precompute(windowSize, false);\n        },\n    };\n    return { getPublicKey, sign, verify, utils, Point };\n}\nfunction _eddsa_legacy_opts_to_new(c) {\n    const CURVE = {\n        a: c.a,\n        d: c.d,\n        p: c.Fp.ORDER,\n        n: c.n,\n        h: c.h,\n        Gx: c.Gx,\n        Gy: c.Gy,\n    };\n    const Fp = c.Fp;\n    const Fn = (0, modular_ts_1.Field)(CURVE.n, c.nBitLength, true);\n    const curveOpts = { Fp, Fn, uvRatio: c.uvRatio };\n    const eddsaOpts = {\n        hash: c.hash,\n        randomBytes: c.randomBytes,\n        adjustScalarBytes: c.adjustScalarBytes,\n        domain: c.domain,\n        prehash: c.prehash,\n        mapToCurve: c.mapToCurve,\n    };\n    return { CURVE, curveOpts, eddsaOpts };\n}\nfunction _eddsa_new_output_to_legacy(c, eddsa) {\n    const legacy = Object.assign({}, eddsa, { ExtendedPoint: eddsa.Point, CURVE: c });\n    return legacy;\n}\n// TODO: remove. Use eddsa\nfunction twistedEdwards(c) {\n    const { CURVE, curveOpts, eddsaOpts } = _eddsa_legacy_opts_to_new(c);\n    const Point = edwards(CURVE, curveOpts);\n    const EDDSA = eddsa(Point, eddsaOpts);\n    return _eddsa_new_output_to_legacy(c, EDDSA);\n}\n//# sourceMappingURL=edwards.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CryptoChannel = exports.GameOfLifeIcon = exports.KeyManager = exports.IdManager = exports.LocalStorage = exports.convertWebWritableStreamToNodeWritable = exports.convertWebReadableStreamToNodeReadable = exports.StreamChannel = exports.MemoryStorage = exports.MemoryChannel = exports.Challenger = exports.VaultysId = exports.Buffer = exports.crypto = void 0;\nconst Challenger_1 = __importDefault(require(\"./src/Challenger\"));\nexports.Challenger = Challenger_1.default;\nconst IdManager_1 = __importDefault(require(\"./src/IdManager\"));\nexports.IdManager = IdManager_1.default;\nconst KeyManager_1 = __importDefault(require(\"./src/KeyManager\"));\nexports.KeyManager = KeyManager_1.default;\nconst VaultysId_1 = __importDefault(require(\"./src/VaultysId\"));\nexports.VaultysId = VaultysId_1.default;\nconst MemoryChannel_1 = require(\"./src/MemoryChannel\");\nObject.defineProperty(exports, \"MemoryChannel\", { enumerable: true, get: function () { return MemoryChannel_1.MemoryChannel; } });\nObject.defineProperty(exports, \"StreamChannel\", { enumerable: true, get: function () { return MemoryChannel_1.StreamChannel; } });\nObject.defineProperty(exports, \"convertWebReadableStreamToNodeReadable\", { enumerable: true, get: function () { return MemoryChannel_1.convertWebReadableStreamToNodeReadable; } });\nObject.defineProperty(exports, \"convertWebWritableStreamToNodeWritable\", { enumerable: true, get: function () { return MemoryChannel_1.convertWebWritableStreamToNodeWritable; } });\nconst MemoryStorage_1 = require(\"./src/MemoryStorage\");\nObject.defineProperty(exports, \"MemoryStorage\", { enumerable: true, get: function () { return MemoryStorage_1.MemoryStorage; } });\nObject.defineProperty(exports, \"LocalStorage\", { enumerable: true, get: function () { return MemoryStorage_1.LocalStorage; } });\nconst GameOfLifeIcon_1 = __importDefault(require(\"./src/GameOfLifeIcon\"));\nexports.GameOfLifeIcon = GameOfLifeIcon_1.default;\nconst cryptoChannel_1 = __importDefault(require(\"./src/cryptoChannel\"));\nexports.CryptoChannel = cryptoChannel_1.default;\n//utils\nconst crypto = __importStar(require(\"./src/crypto\"));\nexports.crypto = crypto;\nconst Buffer = crypto.Buffer;\nexports.Buffer = Buffer;\nif (typeof Symbol.dispose === \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    Symbol.dispose = Symbol(\"Symbol.dispose\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LocalStorage = exports.MemoryStorage = exports.deserialize = exports.serialize = void 0;\nconst buffer_1 = require(\"buffer/\");\nconst replacer = (key, value) => {\n    //if(key==\"1686045792046\") console.log(value);\n    if (!value)\n        return value;\n    if (key === \"certificate\")\n        return \"__C__\" + buffer_1.Buffer.from(value).toString(\"base64\");\n    if (value.type === \"Buffer\") {\n        return \"_bx_\" + buffer_1.Buffer.from(value.data).toString(\"base64\");\n    }\n    if (value.constructor.name === \"Array\") {\n        return \"_bx_\" + buffer_1.Buffer.from(value).toString(\"base64\");\n    }\n    return value;\n};\nconst reviver = (key, value) => {\n    if (value && key === \"certificate\") {\n        if (typeof value === \"string\" && value.startsWith(\"__C__\")) {\n            return buffer_1.Buffer.from(value.slice(5), \"base64\");\n        }\n        else\n            return buffer_1.Buffer.from(value);\n    }\n    if (typeof value === \"string\" && value.startsWith(\"_bx_\")) {\n        return buffer_1.Buffer.from(value.slice(4), \"base64\");\n    }\n    return value;\n};\nconst serialize = (data) => JSON.stringify(data, replacer);\nexports.serialize = serialize;\nconst deserialize = (string) => JSON.parse(string, reviver);\nexports.deserialize = deserialize;\nconst MemoryStorage = (save) => {\n    let data = {};\n    if (!save)\n        save = () => (0, exports.serialize)(data);\n    return storagify(data, save, () => \"\");\n};\nexports.MemoryStorage = MemoryStorage;\nconst LocalStorage = (key = \"vaultysStorage\") => {\n    let data = {};\n    const _id = Math.random();\n    //console.log(key);\n    if (!localStorage[key])\n        localStorage[key] = \"{}\";\n    else\n        data = (0, exports.deserialize)(localStorage[key]);\n    return storagify(data, () => {\n        //console.log(\"save !!!!!\", key, _id);\n        localStorage.setItem(key, (0, exports.serialize)(data));\n    }, () => localStorage.removeItem(key));\n};\nexports.LocalStorage = LocalStorage;\nconst storagify = (object, save, destroy) => {\n    return {\n        destroy,\n        save,\n        toString: () => (0, exports.serialize)(object),\n        fromString: (string, s, d) => storagify((0, exports.deserialize)(string), s, d),\n        _raw: object,\n        set: (key, value) => (object[key] = value),\n        delete: (key) => delete object[key],\n        get: (key) => object[key],\n        list: () => Object.keys(object).filter((k) => !k.startsWith(\"!\")),\n        listSubstores: () => Object.keys(object)\n            .filter((k) => k.startsWith(\"!\"))\n            .map((k) => k.slice(1)),\n        deleteSubstore: (key) => delete object[\"!\" + key],\n        renameSubstore: (oldname, newname) => {\n            if (oldname === newname || !!object[\"!\" + newname])\n                return;\n            object[\"!\" + newname] = object[\"!\" + oldname];\n            delete object[\"!\" + oldname];\n        },\n        substore: (key) => {\n            if (!object[\"!\" + key])\n                object[\"!\" + key] = {};\n            return storagify(object[\"!\" + key], save, destroy);\n        },\n    };\n};\n","'use strict';\n\nconst stream = require('stream');\nconst NoFilter = require('nofilter');\nconst utils = require('./utils');\nconst constants = require('./constants');\nconst {\n  MT, NUMBYTES, SHIFT32, SIMPLE, SYMS, TAG, BI,\n} = constants;\nconst {Buffer} = require('buffer');\n\nconst HALF = (MT.SIMPLE_FLOAT << 5) | NUMBYTES.TWO;\nconst FLOAT = (MT.SIMPLE_FLOAT << 5) | NUMBYTES.FOUR;\nconst DOUBLE = (MT.SIMPLE_FLOAT << 5) | NUMBYTES.EIGHT;\nconst TRUE = (MT.SIMPLE_FLOAT << 5) | SIMPLE.TRUE;\nconst FALSE = (MT.SIMPLE_FLOAT << 5) | SIMPLE.FALSE;\nconst UNDEFINED = (MT.SIMPLE_FLOAT << 5) | SIMPLE.UNDEFINED;\nconst NULL = (MT.SIMPLE_FLOAT << 5) | SIMPLE.NULL;\n\nconst BREAK = Buffer.from([0xff]);\nconst BUF_NAN = Buffer.from('f97e00', 'hex');\nconst BUF_INF_NEG = Buffer.from('f9fc00', 'hex');\nconst BUF_INF_POS = Buffer.from('f97c00', 'hex');\nconst BUF_NEG_ZERO = Buffer.from('f98000', 'hex');\n\n/**\n * Generate the CBOR for a value.  If you are using this, you'll either need\n * to call {@link Encoder.write} with a Buffer, or look into the internals of\n * Encoder to reuse existing non-documented behavior.\n *\n * @callback EncodeFunction\n * @param {Encoder} enc The encoder to use.\n * @param {any} val The value to encode.\n * @returns {boolean} True on success.\n */\n\n/**\n * A mapping from tag number to a tag decoding function.\n *\n * @typedef {Object.<string, EncodeFunction>} SemanticMap\n */\n\n/**\n * @type {SemanticMap}\n * @private\n */\nconst SEMANTIC_TYPES = {};\n\n/**\n * @type {SemanticMap}\n * @private\n */\nlet current_SEMANTIC_TYPES = {};\n\n/**\n * @param {string} str String to normalize.\n * @returns {\"number\"|\"float\"|\"int\"|\"string\"} Normalized.\n * @throws {TypeError} Invalid input.\n * @private\n */\nfunction parseDateType(str) {\n  if (!str) {\n    return 'number';\n  }\n  switch (str.toLowerCase()) {\n    case 'number':\n      return 'number';\n    case 'float':\n      return 'float';\n    case 'int':\n    case 'integer':\n      return 'int';\n    case 'string':\n      return 'string';\n  }\n  throw new TypeError(`dateType invalid, got \"${str}\"`);\n}\n\n/**\n * @typedef ObjectOptions\n * @property {boolean} [indefinite = false] Force indefinite encoding for this\n *   object.\n * @property {boolean} [skipTypes = false] Do not use available type mappings\n *   for this object, but encode it as a \"normal\" JS object would be.\n */\n\n/**\n * @typedef EncodingOptions\n * @property {any[]|object} [genTypes=[]] Array of pairs of\n *   `type`, `function(Encoder)` for semantic types to be encoded.  Not\n *   needed for Array, Date, Buffer, Map, RegExp, Set, or URL.\n *   If an object, the keys are the constructor names for the types.\n * @property {boolean} [canonical=false] Should the output be\n *   canonicalized.\n * @property {boolean|WeakSet} [detectLoops=false] Should object loops\n *   be detected?  This will currently add memory to track every part of the\n *   object being encoded in a WeakSet.  Do not encode\n *   the same object twice on the same encoder, without calling\n *   `removeLoopDetectors` in between, which will clear the WeakSet.\n *   You may pass in your own WeakSet to be used; this is useful in some\n *   recursive scenarios.\n * @property {(\"number\"|\"float\"|\"int\"|\"string\")} [dateType=\"number\"] -\n *   how should dates be encoded?  \"number\" means float or int, if no\n *   fractional seconds.\n * @property {any} [encodeUndefined=undefined] How should an\n *   \"undefined\" in the input be encoded.  By default, just encode a CBOR\n *   undefined.  If this is a buffer, use those bytes without re-encoding\n *   them.  If this is a function, the function will be called (which is a\n *   good time to throw an exception, if that's what you want), and the\n *   return value will be used according to these rules.  Anything else will\n *   be encoded as CBOR.\n * @property {boolean} [disallowUndefinedKeys=false] Should\n *   \"undefined\" be disallowed as a key in a Map that is serialized?  If\n *   this is true, encode(new Map([[undefined, 1]])) will throw an\n *   exception.  Note that it is impossible to get a key of undefined in a\n *   normal JS object.\n * @property {boolean} [collapseBigIntegers=false] Should integers\n *   that come in as ECMAscript bigint's be encoded\n *   as normal CBOR integers if they fit, discarding type information?\n * @property {number} [chunkSize=4096] Number of characters or bytes\n *   for each chunk, if obj is a string or Buffer, when indefinite encoding.\n * @property {boolean} [omitUndefinedProperties=false] When encoding\n *   objects or Maps, do not include a key if its corresponding value is\n *   `undefined`.\n */\n\n/**\n * Transform JavaScript values into CBOR bytes.  The `Writable` side of\n * the stream is in object mode.\n *\n * @extends stream.Transform\n */\nclass Encoder extends stream.Transform {\n  /**\n   * Creates an instance of Encoder.\n   *\n   * @param {EncodingOptions} [options={}] Options for the encoder.\n   */\n  constructor(options = {}) {\n    const {\n      canonical = false,\n      encodeUndefined,\n      disallowUndefinedKeys = false,\n      dateType = 'number',\n      collapseBigIntegers = false,\n      detectLoops = false,\n      omitUndefinedProperties = false,\n      genTypes = [],\n      ...superOpts\n    } = options;\n\n    super({\n      ...superOpts,\n      readableObjectMode: false,\n      writableObjectMode: true,\n    });\n\n    this.canonical = canonical;\n    this.encodeUndefined = encodeUndefined;\n    this.disallowUndefinedKeys = disallowUndefinedKeys;\n    this.dateType = parseDateType(dateType);\n    this.collapseBigIntegers = this.canonical ? true : collapseBigIntegers;\n\n    /** @type {WeakSet?} */\n    this.detectLoops = undefined;\n    if (typeof detectLoops === 'boolean') {\n      if (detectLoops) {\n        this.detectLoops = new WeakSet();\n      }\n    } else if (detectLoops instanceof WeakSet) {\n      this.detectLoops = detectLoops;\n    } else {\n      throw new TypeError('detectLoops must be boolean or WeakSet');\n    }\n    this.omitUndefinedProperties = omitUndefinedProperties;\n\n    this.semanticTypes = {...Encoder.SEMANTIC_TYPES};\n\n    if (Array.isArray(genTypes)) {\n      for (let i = 0, len = genTypes.length; i < len; i += 2) {\n        this.addSemanticType(genTypes[i], genTypes[i + 1]);\n      }\n    } else {\n      for (const [k, v] of Object.entries(genTypes)) {\n        this.addSemanticType(k, v);\n      }\n    }\n  }\n\n  /**\n   * Transforming.\n   *\n   * @param {any} fresh Buffer to transcode.\n   * @param {BufferEncoding} _encoding Name of encoding.\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _transform(fresh, _encoding, cb) {\n    const ret = this.pushAny(fresh);\n    // Old transformers might not return bool.  undefined !== false\n    cb((ret === false) ? new Error('Push Error') : undefined);\n  }\n\n  /**\n   * Flushing.\n   *\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  // eslint-disable-next-line class-methods-use-this\n  _flush(cb) {\n    cb();\n  }\n\n  /**\n   * @param {number} val Number(0-255) to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushUInt8(val) {\n    const b = Buffer.allocUnsafe(1);\n    b.writeUInt8(val, 0);\n    return this.push(b);\n  }\n\n  /**\n   * @param {number} val Number(0-65535) to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushUInt16BE(val) {\n    const b = Buffer.allocUnsafe(2);\n    b.writeUInt16BE(val, 0);\n    return this.push(b);\n  }\n\n  /**\n   * @param {number} val Number(0..2**32-1) to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushUInt32BE(val) {\n    const b = Buffer.allocUnsafe(4);\n    b.writeUInt32BE(val, 0);\n    return this.push(b);\n  }\n\n  /**\n   * @param {number} val Number to encode as 4-byte float.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushFloatBE(val) {\n    const b = Buffer.allocUnsafe(4);\n    b.writeFloatBE(val, 0);\n    return this.push(b);\n  }\n\n  /**\n   * @param {number} val Number to encode as 8-byte double.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushDoubleBE(val) {\n    const b = Buffer.allocUnsafe(8);\n    b.writeDoubleBE(val, 0);\n    return this.push(b);\n  }\n\n  /**\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushNaN() {\n    return this.push(BUF_NAN);\n  }\n\n  /**\n   * @param {number} obj Positive or negative infinity.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushInfinity(obj) {\n    const half = (obj < 0) ? BUF_INF_NEG : BUF_INF_POS;\n    return this.push(half);\n  }\n\n  /**\n   * Choose the best float representation for a number and encode it.\n   *\n   * @param {number} obj A number that is known to be not-integer, but not\n   *   how many bytes of precision it needs.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushFloat(obj) {\n    if (this.canonical) {\n      // TODO: is this enough slower to hide behind canonical?\n      // It's certainly enough of a hack (see utils.parseHalf)\n\n      // From section 3.9:\n      // If a protocol allows for IEEE floats, then additional canonicalization\n      // rules might need to be added.  One example rule might be to have all\n      // floats start as a 64-bit float, then do a test conversion to a 32-bit\n      // float; if the result is the same numeric value, use the shorter value\n      // and repeat the process with a test conversion to a 16-bit float.  (This\n      // rule selects 16-bit float for positive and negative Infinity as well.)\n\n      // which seems pretty much backwards to me.\n      const b2 = Buffer.allocUnsafe(2);\n      if (utils.writeHalf(b2, obj)) {\n        // I have convinced myself that there are no cases where writeHalf\n        // will return true but `utils.parseHalf(b2) !== obj)`\n        return this._pushUInt8(HALF) && this.push(b2);\n      }\n    }\n    if (Math.fround(obj) === obj) {\n      return this._pushUInt8(FLOAT) && this._pushFloatBE(obj);\n    }\n\n    return this._pushUInt8(DOUBLE) && this._pushDoubleBE(obj);\n  }\n\n  /**\n   * Choose the best integer representation for a postive number and encode\n   * it.  If the number is over MAX_SAFE_INTEGER, fall back on float (but I\n   * don't remember why).\n   *\n   * @param {number} obj A positive number that is known to be an integer,\n   *   but not how many bytes of precision it needs.\n   * @param {number} mt The Major Type number to combine with the integer.\n   *   Not yet shifted.\n   * @param {number} [orig] The number before it was transformed to positive.\n   *   If the mt is NEG_INT, and the positive number is over MAX_SAFE_INT,\n   *   then we'll encode this as a float rather than making the number\n   *   negative again and losing precision.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushInt(obj, mt, orig) {\n    const m = mt << 5;\n\n    if (obj < 24) {\n      return this._pushUInt8(m | obj);\n    }\n    if (obj <= 0xff) {\n      return this._pushUInt8(m | NUMBYTES.ONE) && this._pushUInt8(obj);\n    }\n    if (obj <= 0xffff) {\n      return this._pushUInt8(m | NUMBYTES.TWO) && this._pushUInt16BE(obj);\n    }\n    if (obj <= 0xffffffff) {\n      return this._pushUInt8(m | NUMBYTES.FOUR) && this._pushUInt32BE(obj);\n    }\n    let max = Number.MAX_SAFE_INTEGER;\n    if (mt === MT.NEG_INT) {\n      // Special case for Number.MIN_SAFE_INTEGER - 1\n      max--;\n    }\n    if (obj <= max) {\n      return this._pushUInt8(m | NUMBYTES.EIGHT) &&\n        this._pushUInt32BE(Math.floor(obj / SHIFT32)) &&\n        this._pushUInt32BE(obj % SHIFT32);\n    }\n    if (mt === MT.NEG_INT) {\n      return this._pushFloat(orig);\n    }\n    return this._pushFloat(obj);\n  }\n\n  /**\n   * Choose the best integer representation for a number and encode it.\n   *\n   * @param {number} obj A number that is known to be an integer,\n   *   but not how many bytes of precision it needs.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushIntNum(obj) {\n    if (Object.is(obj, -0)) {\n      return this.push(BUF_NEG_ZERO);\n    }\n\n    if (obj < 0) {\n      return this._pushInt(-obj - 1, MT.NEG_INT, obj);\n    }\n    return this._pushInt(obj, MT.POS_INT);\n  }\n\n  /**\n   * @param {number} obj Plain JS number to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushNumber(obj) {\n    if (isNaN(obj)) {\n      return this._pushNaN();\n    }\n    if (!isFinite(obj)) {\n      return this._pushInfinity(obj);\n    }\n    if (Math.round(obj) === obj) {\n      return this._pushIntNum(obj);\n    }\n    return this._pushFloat(obj);\n  }\n\n  /**\n   * @param {string} obj String to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushString(obj) {\n    const len = Buffer.byteLength(obj, 'utf8');\n    return this._pushInt(len, MT.UTF8_STRING) && this.push(obj, 'utf8');\n  }\n\n  /**\n   * @param {boolean} obj Bool to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushBoolean(obj) {\n    return this._pushUInt8(obj ? TRUE : FALSE);\n  }\n\n  /**\n   * @param {undefined} obj Ignored.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushUndefined(obj) {\n    switch (typeof this.encodeUndefined) {\n      case 'undefined':\n        return this._pushUInt8(UNDEFINED);\n      case 'function':\n        return this.pushAny(this.encodeUndefined(obj));\n      case 'object': {\n        const buf = utils.bufferishToBuffer(this.encodeUndefined);\n        if (buf) {\n          return this.push(buf);\n        }\n      }\n    }\n    return this.pushAny(this.encodeUndefined);\n  }\n\n  /**\n   * @param {null} _obj Ignored.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushNull(_obj) {\n    return this._pushUInt8(NULL);\n  }\n\n  /**\n   * @param {number} tag Tag number to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushTag(tag) {\n    return this._pushInt(tag, MT.TAG);\n  }\n\n  /**\n   * @param {bigint} obj BigInt to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  _pushJSBigint(obj) {\n    let m = MT.POS_INT;\n    let tag = TAG.POS_BIGINT;\n    // BigInt doesn't have -0\n    if (obj < 0) {\n      obj = -obj + BI.MINUS_ONE;\n      m = MT.NEG_INT;\n      tag = TAG.NEG_BIGINT;\n    }\n\n    if (this.collapseBigIntegers &&\n        (obj <= BI.MAXINT64)) {\n      // Special handiling for 64bits\n      if (obj <= 0xffffffff) {\n        return this._pushInt(Number(obj), m);\n      }\n      return this._pushUInt8((m << 5) | NUMBYTES.EIGHT) &&\n        this._pushUInt32BE(Number(obj / BI.SHIFT32)) &&\n        this._pushUInt32BE(Number(obj % BI.SHIFT32));\n    }\n\n    let str = obj.toString(16);\n    if (str.length % 2) {\n      str = `0${str}`;\n    }\n    const buf = Buffer.from(str, 'hex');\n    return this._pushTag(tag) && Encoder._pushBuffer(this, buf);\n  }\n\n  /**\n   * @param {object} obj Object to encode.\n   * @param {ObjectOptions} [opts] Options for encoding this object.\n   * @returns {boolean} True on success.\n   * @throws {Error} Loop detected.\n   * @ignore\n   */\n  _pushObject(obj, opts) {\n    if (!obj) {\n      return this._pushNull(obj);\n    }\n    opts = {\n      indefinite: false,\n      skipTypes: false,\n      ...opts,\n    };\n    if (!opts.indefinite) {\n      // This will only happen the first time through for indefinite encoding\n      if (this.detectLoops) {\n        if (this.detectLoops.has(obj)) {\n          throw new Error(`\\\nLoop detected while CBOR encoding.\nCall removeLoopDetectors before resuming.`);\n        } else {\n          this.detectLoops.add(obj);\n        }\n      }\n    }\n    if (!opts.skipTypes) {\n      const f = obj.encodeCBOR;\n      if (typeof f === 'function') {\n        return f.call(obj, this);\n      }\n      const converter = this.semanticTypes[obj.constructor.name];\n      if (converter) {\n        return converter.call(obj, this, obj);\n      }\n    }\n    const keys = Object.keys(obj).filter(k => {\n      const tv = typeof obj[k];\n      return (tv !== 'function') &&\n        (!this.omitUndefinedProperties || (tv !== 'undefined'));\n    });\n    const cbor_keys = {};\n    if (this.canonical) {\n      // Note: this can't be a normal sort, because 'b' needs to sort before\n      // 'aa'\n      keys.sort((a, b) => {\n        // Always strings, so don't bother to pass options.\n        // hold on to the cbor versions, since there's no need\n        // to encode more than once\n        const a_cbor = cbor_keys[a] || (cbor_keys[a] = Encoder.encode(a));\n        const b_cbor = cbor_keys[b] || (cbor_keys[b] = Encoder.encode(b));\n\n        return a_cbor.compare(b_cbor);\n      });\n    }\n    if (opts.indefinite) {\n      if (!this._pushUInt8((MT.MAP << 5) | NUMBYTES.INDEFINITE)) {\n        return false;\n      }\n    } else if (!this._pushInt(keys.length, MT.MAP)) {\n      return false;\n    }\n    let ck = null;\n    for (let j = 0, len2 = keys.length; j < len2; j++) {\n      const k = keys[j];\n      if (this.canonical && ((ck = cbor_keys[k]))) {\n        if (!this.push(ck)) { // Already a Buffer\n          return false;\n        }\n      } else if (!this._pushString(k)) {\n        return false;\n      }\n      if (!this.pushAny(obj[k])) {\n        return false;\n      }\n    }\n    if (opts.indefinite) {\n      if (!this.push(BREAK)) {\n        return false;\n      }\n    } else if (this.detectLoops) {\n      this.detectLoops.delete(obj);\n    }\n    return true;\n  }\n\n  /**\n   * @param {any[]} objs Array of supported things.\n   * @returns {Buffer} Concatenation of encodings for the supported things.\n   * @ignore\n   */\n  _encodeAll(objs) {\n    const bs = new NoFilter({highWaterMark: this.readableHighWaterMark});\n    this.pipe(bs);\n    for (const o of objs) {\n      this.pushAny(o);\n    }\n    this.end();\n    return bs.read();\n  }\n\n  /**\n   * Add an encoding function to the list of supported semantic types.  This\n   * is useful for objects for which you can't add an encodeCBOR method.\n   *\n   * @param {string|Function} type The type to encode.\n   * @param {EncodeFunction} fun The encoder to use.\n   * @returns {EncodeFunction?} The previous encoder or undefined if there\n   *   wasn't one.\n   * @throws {TypeError} Invalid function.\n   */\n  addSemanticType(type, fun) {\n    const typeName = (typeof type === 'string') ? type : type.name;\n    const old = this.semanticTypes[typeName];\n\n    if (fun) {\n      if (typeof fun !== 'function') {\n        throw new TypeError('fun must be of type function');\n      }\n      this.semanticTypes[typeName] = fun;\n    } else if (old) {\n      delete this.semanticTypes[typeName];\n    }\n    return old;\n  }\n\n  /**\n   * Push any supported type onto the encoded stream.\n   *\n   * @param {any} obj The thing to encode.\n   * @returns {boolean} True on success.\n   * @throws {TypeError} Unknown type for obj.\n   */\n  pushAny(obj) {\n    switch (typeof obj) {\n      case 'number':\n        return this._pushNumber(obj);\n      case 'bigint':\n        return this._pushJSBigint(obj);\n      case 'string':\n        return this._pushString(obj);\n      case 'boolean':\n        return this._pushBoolean(obj);\n      case 'undefined':\n        return this._pushUndefined(obj);\n      case 'object':\n        return this._pushObject(obj);\n      case 'symbol':\n        switch (obj) {\n          case SYMS.NULL:\n            return this._pushNull(null);\n          case SYMS.UNDEFINED:\n            return this._pushUndefined(undefined);\n          // TODO: Add pluggable support for other symbols\n          default:\n            throw new TypeError(`Unknown symbol: ${obj.toString()}`);\n        }\n      default:\n        throw new TypeError(\n          `Unknown type: ${typeof obj}, ${(typeof obj.toString === 'function') ? obj.toString() : ''}`\n        );\n    }\n  }\n\n  /**\n   * Encode an array and all of its elements.\n   *\n   * @param {Encoder} gen Encoder to use.\n   * @param {any[]} obj Array to encode.\n   * @param {object} [opts] Options.\n   * @param {boolean} [opts.indefinite=false] Use indefinite encoding?\n   * @returns {boolean} True on success.\n   */\n  static pushArray(gen, obj, opts) {\n    opts = {\n      indefinite: false,\n      ...opts,\n    };\n    const len = obj.length;\n    if (opts.indefinite) {\n      if (!gen._pushUInt8((MT.ARRAY << 5) | NUMBYTES.INDEFINITE)) {\n        return false;\n      }\n    } else if (!gen._pushInt(len, MT.ARRAY)) {\n      return false;\n    }\n    for (let j = 0; j < len; j++) {\n      if (!gen.pushAny(obj[j])) {\n        return false;\n      }\n    }\n    if (opts.indefinite) {\n      if (!gen.push(BREAK)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Remove the loop detector WeakSet for this Encoder.\n   *\n   * @returns {boolean} True when the Encoder was reset, else false.\n   */\n  removeLoopDetectors() {\n    if (!this.detectLoops) {\n      return false;\n    }\n    this.detectLoops = new WeakSet();\n    return true;\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {Date} obj Date to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushDate(gen, obj) {\n    switch (gen.dateType) {\n      case 'string':\n        return gen._pushTag(TAG.DATE_STRING) &&\n          gen._pushString(obj.toISOString());\n      case 'int':\n        return gen._pushTag(TAG.DATE_EPOCH) &&\n          gen._pushIntNum(Math.round(obj.getTime() / 1000));\n      case 'float':\n        // Force float\n        return gen._pushTag(TAG.DATE_EPOCH) &&\n          gen._pushFloat(obj.getTime() / 1000);\n      case 'number':\n      default:\n        // If we happen to have an integral number of seconds,\n        // use integer.  Otherwise, use float.\n        return gen._pushTag(TAG.DATE_EPOCH) &&\n          gen.pushAny(obj.getTime() / 1000);\n    }\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {Buffer} obj Buffer to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushBuffer(gen, obj) {\n    return gen._pushInt(obj.length, MT.BYTE_STRING) && gen.push(obj);\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {NoFilter} obj Buffer to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushNoFilter(gen, obj) {\n    return Encoder._pushBuffer(gen, /** @type {Buffer} */ (obj.slice()));\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {RegExp} obj RegExp to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushRegexp(gen, obj) {\n    return gen._pushTag(TAG.REGEXP) && gen.pushAny(obj.source);\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {Set} obj Set to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushSet(gen, obj) {\n    if (!gen._pushTag(TAG.SET)) {\n      return false;\n    }\n    if (!gen._pushInt(obj.size, MT.ARRAY)) {\n      return false;\n    }\n    for (const x of obj) {\n      if (!gen.pushAny(x)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {URL} obj URL to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushURL(gen, obj) {\n    return gen._pushTag(TAG.URI) && gen.pushAny(obj.toString());\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {object} obj Boxed String, Number, or Boolean object to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushBoxed(gen, obj) {\n    return gen.pushAny(obj.valueOf());\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {Map} obj Map to encode.\n   * @returns {boolean} True on success.\n   * @throws {Error} Map key that is undefined.\n   * @ignore\n   */\n  static _pushMap(gen, obj, opts) {\n    opts = {\n      indefinite: false,\n      ...opts,\n    };\n    let entries = [...obj.entries()];\n    if (gen.omitUndefinedProperties) {\n      entries = entries.filter(([_k, v]) => v !== undefined);\n    }\n    if (opts.indefinite) {\n      if (!gen._pushUInt8((MT.MAP << 5) | NUMBYTES.INDEFINITE)) {\n        return false;\n      }\n    } else if (!gen._pushInt(entries.length, MT.MAP)) {\n      return false;\n    }\n    // Memoizing the cbor only helps in certain cases, and hurts in most\n    // others.  Just avoid it.\n    if (gen.canonical) {\n      // Keep the key/value pairs together, so we don't have to do odd\n      // gets with object keys later\n      const enc = new Encoder({\n        genTypes: gen.semanticTypes,\n        canonical: gen.canonical,\n        detectLoops: Boolean(gen.detectLoops), // Give enc its own loop detector\n        dateType: gen.dateType,\n        disallowUndefinedKeys: gen.disallowUndefinedKeys,\n        collapseBigIntegers: gen.collapseBigIntegers,\n      });\n      const bs = new NoFilter({highWaterMark: gen.readableHighWaterMark});\n      enc.pipe(bs);\n      entries.sort(([a], [b]) => {\n        // Both a and b are the keys\n        enc.pushAny(a);\n        const a_cbor = bs.read();\n        enc.pushAny(b);\n        const b_cbor = bs.read();\n        return a_cbor.compare(b_cbor);\n      });\n      for (const [k, v] of entries) {\n        if (gen.disallowUndefinedKeys && (typeof k === 'undefined')) {\n          throw new Error('Invalid Map key: undefined');\n        }\n        if (!(gen.pushAny(k) && gen.pushAny(v))) {\n          return false;\n        }\n      }\n    } else {\n      for (const [k, v] of entries) {\n        if (gen.disallowUndefinedKeys && (typeof k === 'undefined')) {\n          throw new Error('Invalid Map key: undefined');\n        }\n        if (!(gen.pushAny(k) && gen.pushAny(v))) {\n          return false;\n        }\n      }\n    }\n    if (opts.indefinite) {\n      if (!gen.push(BREAK)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param {NodeJS.TypedArray} obj Array to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushTypedArray(gen, obj) {\n    // See https://tools.ietf.org/html/rfc8746\n\n    let typ = 0b01000000;\n    let sz = obj.BYTES_PER_ELEMENT;\n    const {name} = obj.constructor;\n\n    if (name.startsWith('Float')) {\n      typ |= 0b00010000;\n      sz /= 2;\n    } else if (!name.includes('U')) {\n      typ |= 0b00001000;\n    }\n    if (name.includes('Clamped') || ((sz !== 1) && !utils.isBigEndian())) {\n      typ |= 0b00000100;\n    }\n    typ |= {\n      1: 0b00,\n      2: 0b01,\n      4: 0b10,\n      8: 0b11,\n    }[sz];\n    if (!gen._pushTag(typ)) {\n      return false;\n    }\n    return Encoder._pushBuffer(\n      gen,\n      Buffer.from(obj.buffer, obj.byteOffset, obj.byteLength)\n    );\n  }\n\n  /**\n   * @param {Encoder} gen Encoder.\n   * @param { ArrayBuffer } obj Array to encode.\n   * @returns {boolean} True on success.\n   * @ignore\n   */\n  static _pushArrayBuffer(gen, obj) {\n    return Encoder._pushBuffer(gen, Buffer.from(obj));\n  }\n\n  /**\n   * Encode the given object with indefinite length.  There are apparently\n   * some (IMO) broken implementations of poorly-specified protocols that\n   * REQUIRE indefinite-encoding.  See the example for how to add this as an\n   * `encodeCBOR` function to an object or class to get indefinite encoding.\n   *\n   * @param {Encoder} gen The encoder to use.\n   * @param {string|Buffer|Array|Map|object} [obj] The object to encode.  If\n   *   null, use \"this\" instead.\n   * @param {EncodingOptions} [options={}] Options for encoding.\n   * @returns {boolean} True on success.\n   * @throws {Error} No object to encode or invalid indefinite encoding.\n   * @example <caption>Force indefinite encoding:</caption>\n   * const o = {\n   *   a: true,\n   *   encodeCBOR: cbor.Encoder.encodeIndefinite,\n   * }\n   * const m = []\n   * m.encodeCBOR = cbor.Encoder.encodeIndefinite\n   * cbor.encodeOne([o, m])\n   */\n  static encodeIndefinite(gen, obj, options = {}) {\n    if (obj == null) {\n      if (this == null) {\n        throw new Error('No object to encode');\n      }\n      obj = this;\n    }\n\n    // TODO: consider other options\n    const {chunkSize = 4096} = options;\n\n    let ret = true;\n    const objType = typeof obj;\n    let buf = null;\n    if (objType === 'string') {\n      // TODO: make sure not to split surrogate pairs at the edges of chunks,\n      // since such half-surrogates cannot be legally encoded as UTF-8.\n      ret = ret && gen._pushUInt8((MT.UTF8_STRING << 5) | NUMBYTES.INDEFINITE);\n      let offset = 0;\n      while (offset < obj.length) {\n        const endIndex = offset + chunkSize;\n        ret = ret && gen._pushString(obj.slice(offset, endIndex));\n        offset = endIndex;\n      }\n      ret = ret && gen.push(BREAK);\n    } else if ((buf = utils.bufferishToBuffer(obj))) {\n      ret = ret && gen._pushUInt8((MT.BYTE_STRING << 5) | NUMBYTES.INDEFINITE);\n      let offset = 0;\n      while (offset < buf.length) {\n        const endIndex = offset + chunkSize;\n        ret = ret && Encoder._pushBuffer(gen, buf.slice(offset, endIndex));\n        offset = endIndex;\n      }\n      ret = ret && gen.push(BREAK);\n    } else if (Array.isArray(obj)) {\n      ret = ret && Encoder.pushArray(gen, obj, {\n        indefinite: true,\n      });\n    } else if (obj instanceof Map) {\n      ret = ret && Encoder._pushMap(gen, obj, {\n        indefinite: true,\n      });\n    } else {\n      if (objType !== 'object') {\n        throw new Error('Invalid indefinite encoding');\n      }\n      ret = ret && gen._pushObject(obj, {\n        indefinite: true,\n        skipTypes: true,\n      });\n    }\n    return ret;\n  }\n\n  /**\n   * Encode one or more JavaScript objects, and return a Buffer containing the\n   * CBOR bytes.\n   *\n   * @param {...any} objs The objects to encode.\n   * @returns {Buffer} The encoded objects.\n   */\n  static encode(...objs) {\n    return new Encoder()._encodeAll(objs);\n  }\n\n  /**\n   * Encode one or more JavaScript objects canonically (slower!), and return\n   * a Buffer containing the CBOR bytes.\n   *\n   * @param {...any} objs The objects to encode.\n   * @returns {Buffer} The encoded objects.\n   */\n  static encodeCanonical(...objs) {\n    return new Encoder({\n      canonical: true,\n    })._encodeAll(objs);\n  }\n\n  /**\n   * Encode one JavaScript object using the given options.\n   *\n   * @param {any} obj The object to encode.\n   * @param {EncodingOptions} [options={}] Passed to the Encoder constructor.\n   * @returns {Buffer} The encoded objects.\n   */\n  static encodeOne(obj, options) {\n    return new Encoder(options)._encodeAll([obj]);\n  }\n\n  /**\n   * Encode one JavaScript object using the given options in a way that\n   * is more resilient to objects being larger than the highWaterMark\n   * number of bytes.  As with the other static encode functions, this\n   * will still use a large amount of memory.  Use a stream-based approach\n   * directly if you need to process large and complicated inputs.\n   *\n   * @param {any} obj The object to encode.\n   * @param {EncodingOptions} [options={}] Passed to the Encoder constructor.\n   * @returns {Promise<Buffer>} A promise for the encoded buffer.\n   */\n  static encodeAsync(obj, options) {\n    return new Promise((resolve, reject) => {\n      const bufs = [];\n      const enc = new Encoder(options);\n      enc.on('data', buf => bufs.push(buf));\n      enc.on('error', reject);\n      enc.on('finish', () => resolve(Buffer.concat(bufs)));\n      enc.pushAny(obj);\n      enc.end();\n    });\n  }\n\n  /**\n   * The currently supported set of semantic types.  May be modified by plugins.\n   *\n   * @type {SemanticMap}\n   */\n  static get SEMANTIC_TYPES() {\n    return current_SEMANTIC_TYPES;\n  }\n\n  static set SEMANTIC_TYPES(val) {\n    current_SEMANTIC_TYPES = val;\n  }\n\n  /**\n   * Reset the supported semantic types to the original set, before any\n   * plugins modified the list.\n   */\n  static reset() {\n    Encoder.SEMANTIC_TYPES = {...SEMANTIC_TYPES};\n  }\n}\n\nObject.assign(SEMANTIC_TYPES, {\n  Array: Encoder.pushArray,\n  Date: Encoder._pushDate,\n  Buffer: Encoder._pushBuffer,\n  [Buffer.name]: Encoder._pushBuffer, // Might be mangled\n  Map: Encoder._pushMap,\n  NoFilter: Encoder._pushNoFilter,\n  [NoFilter.name]: Encoder._pushNoFilter, // Might be mangled\n  RegExp: Encoder._pushRegexp,\n  Set: Encoder._pushSet,\n  ArrayBuffer: Encoder._pushArrayBuffer,\n  Uint8ClampedArray: Encoder._pushTypedArray,\n  Uint8Array: Encoder._pushTypedArray,\n  Uint16Array: Encoder._pushTypedArray,\n  Uint32Array: Encoder._pushTypedArray,\n  Int8Array: Encoder._pushTypedArray,\n  Int16Array: Encoder._pushTypedArray,\n  Int32Array: Encoder._pushTypedArray,\n  Float32Array: Encoder._pushTypedArray,\n  Float64Array: Encoder._pushTypedArray,\n  URL: Encoder._pushURL,\n  Boolean: Encoder._pushBoxed,\n  Number: Encoder._pushBoxed,\n  String: Encoder._pushBoxed,\n});\n\n// Safari needs to get better.\nif (typeof BigUint64Array !== 'undefined') {\n  SEMANTIC_TYPES[BigUint64Array.name] = Encoder._pushTypedArray;\n}\nif (typeof BigInt64Array !== 'undefined') {\n  SEMANTIC_TYPES[BigInt64Array.name] = Encoder._pushTypedArray;\n}\n\nEncoder.reset();\nmodule.exports = Encoder;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst crypto_1 = require(\"./crypto\");\nconst VaultysId_1 = __importDefault(require(\"./VaultysId\"));\nconst buffer_1 = require(\"buffer/\");\nconst ERROR = -2;\nconst UNINITIALISED = -1;\nconst INIT = 0;\nconst STEP1 = 1;\nconst COMPLETE = 2;\nconst writeString = (name, value) => buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa0 + name.length]), buffer_1.Buffer.from(name, \"ascii\"), buffer_1.Buffer.from([0xa0 + value.length]), buffer_1.Buffer.from(value, \"ascii\")]);\nconst writeBuffer = (name, value) => {\n    const nameHeader = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa0 + name.length]), buffer_1.Buffer.from(name, \"ascii\")]);\n    let lengthHeader;\n    if (value.length <= 65535) {\n        // bin16: binary data whose length is upto (2^16)-1 bytes\n        lengthHeader = buffer_1.Buffer.from([0xc5, (value.length >> 8) & 0xff, value.length & 0xff]);\n    }\n    else {\n        // bin32: binary data whose length is upto (2^32)-1 bytes\n        lengthHeader = buffer_1.Buffer.from([0xc6, (value.length >> 24) & 0xff, (value.length >> 16) & 0xff, (value.length >> 8) & 0xff, value.length & 0xff]);\n    }\n    return buffer_1.Buffer.concat([nameHeader, lengthHeader, value]);\n};\nconst writeInt = (name, value) => {\n    // console.log(value)\n    const start = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa0 + name.length]), buffer_1.Buffer.from(name, \"ascii\")]);\n    let end;\n    if (value >= 0 && value <= 0x7f) {\n        end = buffer_1.Buffer.from([value]);\n    }\n    else if (value < 0 && value >= -0x20) {\n        end = buffer_1.Buffer.from([value]);\n    }\n    else if (value > 0 && value <= 0xff) {\n        // uint8\n        end = buffer_1.Buffer.from([0xcc, value]);\n    }\n    else if (value >= -0x80 && value <= 0x7f) {\n        // int8\n        end = buffer_1.Buffer.from([0xd0, value]);\n    }\n    else if (value > 0 && value <= 0xffff) {\n        // uint16\n        end = buffer_1.Buffer.from([0xcd, value >>> 8, value]);\n    }\n    else if (value >= -0x8000 && value <= 0x7fff) {\n        // int16\n        end = buffer_1.Buffer.from([0xd1, value >>> 8, value]);\n    }\n    else if (value > 0 && value <= 0xffffffff) {\n        // uint32\n        end = buffer_1.Buffer.from([0xce, value >>> 24, value >>> 16, value >>> 8, value]);\n    }\n    else if (value >= -0x80000000 && value <= 0x7fffffff) {\n        // int32\n        end = buffer_1.Buffer.from([0xd2, value >>> 24, value >>> 16, value >>> 8, value]);\n    }\n    else if (value > 0 && value <= 0xffffffffffffffffn) {\n        // uint64\n        // Split 64 bit number into two 32 bit numbers because JavaScript only regards\n        // 32 bits for bitwise operations.\n        const hi = value / 2 ** 32;\n        const lo = value % 2 ** 32;\n        end = buffer_1.Buffer.from([0xd3, hi >>> 24, hi >>> 16, hi >>> 8, hi, lo >>> 24, lo >>> 16, lo >>> 8, lo]);\n    }\n    else {\n        end = buffer_1.Buffer.from([0x00]);\n    }\n    return buffer_1.Buffer.concat([start, end]);\n};\nconst encode_v0 = ({ version, protocol, service, timestamp, pk1, pk2, nonce, metadata }) => {\n    const p = buffer_1.Buffer.concat([\n        buffer_1.Buffer.from([0x87]),\n        writeString(\"protocol\", protocol),\n        writeString(\"service\", service),\n        writeInt(\"timestamp\", timestamp),\n        writeBuffer(\"pk1\", pk1),\n        writeBuffer(\"pk2\", pk2),\n        writeBuffer(\"nonce\", nonce),\n        buffer_1.Buffer.from([0xa0 + \"metadata\".length]),\n        buffer_1.Buffer.from(\"metadata\", \"ascii\"),\n        buffer_1.Buffer.from([0x80]), // empty metadata\n    ]);\n    // console.log(p.toString(\"base64\"));\n    return p;\n};\nconst encode_v0_full = ({ version, protocol, service, timestamp, pk1, pk2, nonce, sign1, sign2, metadata }) => {\n    const p = buffer_1.Buffer.concat([\n        buffer_1.Buffer.from([0x89]),\n        writeString(\"protocol\", protocol),\n        writeString(\"service\", service),\n        writeInt(\"timestamp\", timestamp),\n        writeBuffer(\"pk1\", pk1),\n        writeBuffer(\"pk2\", pk2),\n        writeBuffer(\"nonce\", nonce),\n        writeBuffer(\"sign1\", sign1),\n        writeBuffer(\"sign2\", sign2),\n        buffer_1.Buffer.from([0xa0 + \"metadata\".length]),\n        buffer_1.Buffer.from(\"metadata\", \"ascii\"),\n        buffer_1.Buffer.from([0x80]), // empty metadata\n    ]);\n    //console.log(p.toString(\"ascii\"))\n    return p;\n};\nconst deserialize = (challenge) => {\n    const unpacked = (0, msgpack_1.decode)(challenge);\n    const state = {\n        state: ERROR,\n        error: \"\",\n    };\n    if (!unpacked.version) {\n        unpacked.version = 0;\n    }\n    const result = {\n        ...unpacked,\n        ...state,\n    };\n    try {\n        if (!result.timestamp || !result.protocol || !result.service) {\n            result.state = ERROR;\n            result.error = \"[ERROR] Challenge is missing values\";\n        }\n        else if (!result.pk2 && !!result.pk1 && !result.sign1 && !result.sign2 && result.nonce?.length === 16) {\n            result.state = INIT;\n        }\n        else if (!result.sign1 && result.nonce?.length === 32 && !!result.pk1 && !!result.pk2 && !!result.sign2) {\n            result.state = STEP1;\n            const id2 = VaultysId_1.default.fromId(result.pk2);\n            const challenge = serializeUnsigned(result);\n            if (!id2.verifyChallenge(challenge, result.sign2, true)) {\n                result.state = ERROR;\n                result.error = \"[STEP1] failed the verification of pk2\";\n            }\n        }\n        else if (!!result.sign1 && result.nonce?.length === 32 && !!result.pk1 && !!result.pk2 && !!result.sign2) {\n            result.state = COMPLETE;\n            //console.log(result);\n            const id1 = VaultysId_1.default.fromId(result.pk1);\n            const id2 = VaultysId_1.default.fromId(result.pk2);\n            if (id1.version !== unpacked.version || id2.version !== unpacked.version) {\n                //console.log(id1.version, id2.version, unpacked.version);\n                result.state = ERROR;\n                result.error = \"[COMPLETE] pk1 and pk2 are using different serialization version\";\n            }\n            const challenge = serializeUnsigned(result);\n            if (!id2.verifyChallenge(challenge, result.sign2, true)) {\n                result.state = ERROR;\n                result.error = \"[COMPLETE] failed the verification of pk2\";\n            }\n            if (!id1.verifyChallenge(challenge, result.sign1, true)) {\n                result.state = ERROR;\n                result.error = \"[COMPLETE] failed the verification of pk1\";\n            }\n        }\n    }\n    catch (error) {\n        result.error = \"[\" + result.state + \" -> ERROR] \" + error;\n        result.state = ERROR;\n    }\n    return result;\n};\nconst serialize = (data) => {\n    if (data.state == INIT) {\n        const { version, protocol, service, timestamp, pk1, nonce, metadata } = data;\n        const picked = { version, protocol, service, timestamp, pk1, nonce, metadata };\n        const encoded = (0, msgpack_1.encode)(picked);\n        return buffer_1.Buffer.from(encoded);\n    }\n    if (data.state == STEP1) {\n        const { version, protocol, service, timestamp, pk1, pk2, nonce, sign2, metadata } = data;\n        const picked = {\n            version,\n            protocol,\n            service,\n            timestamp,\n            pk1,\n            pk2,\n            nonce,\n            sign2,\n            metadata,\n        };\n        const encoded = (0, msgpack_1.encode)(picked);\n        return buffer_1.Buffer.from(encoded);\n    }\n    if (data.state == COMPLETE) {\n        const { version, protocol, service, timestamp, pk1, pk2, nonce, sign1, sign2, metadata } = data;\n        const picked = {\n            version,\n            protocol,\n            service,\n            timestamp,\n            pk1,\n            pk2,\n            nonce,\n            sign1,\n            sign2,\n            metadata,\n        };\n        const encoded = (0, msgpack_1.encode)(picked);\n        return buffer_1.Buffer.from(encoded);\n    }\n    return null;\n};\nconst serializeUnsigned = (challenge) => {\n    const { version, protocol, service, timestamp, pk1, pk2, nonce, metadata } = challenge;\n    const picked = { version, protocol, service, timestamp, pk1, pk2, nonce, metadata };\n    return version === 0 ? encode_v0(picked) : buffer_1.Buffer.from((0, msgpack_1.encode)(picked));\n};\nconst isLive = (challenge, liveliness, time = Date.now()) => {\n    return challenge.timestamp > time - liveliness && challenge.timestamp < time + liveliness;\n};\nclass Challenger {\n    constructor(vaultysId, liveliness = 60 * 1000) {\n        this.version = 0;\n        this.state = UNINITIALISED;\n        // create a copy of VaultysId\n        this.vaultysId = VaultysId_1.default.fromSecret(vaultysId.getSecret());\n        this.liveliness = liveliness;\n    }\n    static async verifyCertificate(certificate) {\n        const deser = deserialize(certificate);\n        return deser.state === COMPLETE;\n    }\n    static async fromCertificate(certificate, liveliness) {\n        const deser = deserialize(certificate);\n        if (!deser.version) {\n            deser.version = 0;\n        }\n        if (deser.state === INIT) {\n            const challenger = new Challenger(VaultysId_1.default.fromId(deser.pk1).toVersion(deser.version), liveliness);\n            challenger.challenge = deser;\n            challenger.mykey = deser.pk1;\n            challenger.state = INIT;\n        }\n        else if (deser.state === STEP1) {\n            const challenger = new Challenger(VaultysId_1.default.fromId(deser.pk2).toVersion(deser.version), liveliness);\n            challenger.challenge = deser;\n            challenger.mykey = deser.pk2;\n            challenger.hisKey = deser.pk1;\n            challenger.state = STEP1;\n            return challenger;\n        }\n    }\n    async setChallenge(challengeString) {\n        if (this.state !== UNINITIALISED) {\n            this.state = ERROR;\n            throw new Error(\"Challenger already initialised, can't reset the state\");\n        }\n        this.challenge = deserialize(challengeString);\n        this.version = this.challenge.version;\n        if (!isLive(this.challenge, this.liveliness)) {\n            this.state = ERROR;\n            this.challenge.error = \"challenge timestamp failed the liveliness at first signature\";\n            throw new Error(this.challenge.error);\n        }\n        if (this.challenge.state === ERROR) {\n            this.state = ERROR;\n            throw new Error(this.challenge.error);\n        }\n        else if (this.challenge.state === INIT) {\n            //this.vaultysId.toVersion(this.challenge.version);\n            this.mykey = this.vaultysId.id;\n            this.challenge.pk2 = this.mykey;\n            this.hisKey = this.challenge.pk1;\n            this.challenge.nonce = buffer_1.Buffer.concat([this.challenge.nonce || new Uint8Array(), (0, crypto_1.randomBytes)(16)]);\n            const serialized = this.getUnsignedChallenge();\n            if (!serialized)\n                throw new Error(\"Error processing Challenge\");\n            this.challenge.sign2 = (await this.vaultysId.signChallenge(serialized)) || undefined;\n            this.challenge.state = this.state = STEP1;\n        }\n        else if (this.challenge.state === COMPLETE) {\n            //this.vaultysId.toVersion(this.challenge.version);\n            this.mykey = this.vaultysId.id;\n            if (!this.challenge.pk1?.equals(this.mykey) && !this.challenge.pk1?.equals(this.mykey)) {\n                this.state = ERROR;\n                throw new Error(\"Can't link the vaultys id to this challenge\");\n            }\n            else {\n                this.state = COMPLETE;\n            }\n        }\n        else {\n            throw new Error(\"Challenge is from a protocol already launched, this is completely unsafe\");\n        }\n    }\n    getContext() {\n        return {\n            protocol: this.challenge?.protocol,\n            service: this.challenge?.service,\n            metadata: this.challenge?.metadata,\n        };\n    }\n    createChallenge(protocol, service, version = 0, metadata) {\n        this.version = version;\n        if (this.state == UNINITIALISED) {\n            this.mykey = this.vaultysId.toVersion(version).id;\n            // console.log(this)\n            this.challenge = {\n                version,\n                protocol,\n                service,\n                metadata: metadata ? { pk1: metadata } : {},\n                timestamp: Date.now(),\n                pk1: this.mykey,\n                nonce: (0, crypto_1.randomBytes)(16),\n                state: INIT,\n            };\n            this.state = INIT;\n        }\n        else {\n            this.state = ERROR;\n            throw new Error(\"Challenger already initialised, can't reset the state\");\n        }\n    }\n    getCertificate() {\n        if (!this.challenge)\n            return buffer_1.Buffer.from([]);\n        return serialize(this.challenge) || buffer_1.Buffer.from([]);\n    }\n    getUnsignedChallenge() {\n        return serializeUnsigned(this.challenge);\n    }\n    getContactDid() {\n        if (!this.hisKey)\n            return null;\n        return VaultysId_1.default.fromId(this.hisKey).did;\n    }\n    getContactId() {\n        // to be sure this function is not misused, we get the id of the contact only once the protocol is complete\n        if (this.isComplete()) {\n            const contact = VaultysId_1.default.fromId(this.hisKey, this.getCertificate() || undefined);\n            return contact;\n        }\n        else\n            throw new Error(\"The challenge is not COMPLETE, it is unsafe to get the Contact ID before\");\n    }\n    static fromString(vaultysId, challengeString) {\n        const challenger = new Challenger(vaultysId);\n        challenger.setChallenge(challengeString);\n        return challenger;\n    }\n    hasFailed() {\n        return this.state == ERROR;\n    }\n    isComplete() {\n        return this.state == COMPLETE;\n    }\n    async init(challengeString) {\n        if (this.state !== UNINITIALISED) {\n            throw new Error(\"Can't init INITIALISED challenge\");\n        }\n        const tempchallenge = deserialize(challengeString);\n        this.version = tempchallenge.version = tempchallenge.version ? 1 : 0;\n        this.vaultysId.toVersion(this.version);\n        if (tempchallenge.state === INIT) {\n            if (tempchallenge.pk2?.toString(\"base64\") !== this.vaultysId.id.toString(\"base64\")) {\n                this.state = ERROR;\n                throw new Error(\"challenge is not corresponding to the right id\");\n            }\n            this.challenge = tempchallenge;\n            this.version = tempchallenge.version;\n            this.mykey = this.challenge.pk2 = this.vaultysId.id;\n            this.hisKey = this.challenge.pk1;\n            this.challenge.state = this.state = INIT;\n            return;\n        }\n        if (tempchallenge.state === STEP1) {\n            if (tempchallenge.pk2?.toString(\"base64\") !== this.vaultysId.id.toString(\"base64\")) {\n                this.state = ERROR;\n                throw new Error(\"challenge is not corresponding to the right id\");\n            }\n            this.challenge = tempchallenge;\n            this.version = tempchallenge.version;\n            this.mykey = this.challenge.pk2;\n            this.hisKey = this.challenge.pk1;\n            this.state = this.challenge.state = STEP1;\n            return;\n        }\n    }\n    async update(challengeString, metadata) {\n        if (this.state === ERROR) {\n            throw new Error(\"Can't update errorneous challenge\");\n        }\n        else if (this.state === COMPLETE) {\n            throw new Error(\"Can't update COMPLETE challenge\");\n        }\n        else {\n            const tempchallenge = deserialize(challengeString);\n            // console.log(this.state, tempchallenge.state);\n            if (!tempchallenge) {\n                this.state = ERROR;\n                throw new Error(\"Can't read the new incoming challenge\");\n            }\n            if (tempchallenge.state === ERROR) {\n                //console.log(tempchallenge.pk1?.length, tempchallenge.pk2?.length);\n                this.state = ERROR;\n                throw new Error(tempchallenge.error);\n            }\n            if (!isLive(tempchallenge, this.liveliness)) {\n                // console.log(this.liveliness);\n                // const time = Date.now();\n                // console.log(time - tempchallenge.timestamp, this.liveliness);\n                // console.log(tempchallenge.timestamp > time - this.liveliness && tempchallenge.timestamp < time + this.liveliness);\n                this.state = ERROR;\n                throw new Error(\"challenge timestamp failed the liveliness\");\n            }\n            this.version = tempchallenge.version;\n            this.vaultysId.toVersion(this.version);\n            if (this.state === UNINITIALISED && tempchallenge.state === INIT) {\n                if (tempchallenge.metadata.pk2) {\n                    this.state = ERROR;\n                    throw new Error(\"Metadata is malformed: pk2 is already set\");\n                }\n                this.challenge = tempchallenge;\n                this.mykey = this.challenge.pk2 = this.vaultysId.id;\n                this.hisKey = this.challenge.pk1;\n                if (metadata)\n                    this.challenge.metadata.pk2 = metadata;\n                this.challenge.nonce = buffer_1.Buffer.concat([this.challenge.nonce, (0, crypto_1.randomBytes)(16)]);\n                const serialized = this.getUnsignedChallenge();\n                this.challenge.sign2 = await this.vaultysId.signChallenge(serialized);\n                this.challenge.state = this.state = STEP1;\n                return;\n            }\n            if (this.state === UNINITIALISED && tempchallenge.state === STEP1) {\n                if (tempchallenge.pk1?.toString(\"base64\") !== this.vaultysId.id.toString(\"base64\")) {\n                    // console.log(this.vaultysId.version, this);\n                    this.state = ERROR;\n                    throw new Error(\"challenge is not corresponding to the right id\");\n                }\n                const serialized = serializeUnsigned(tempchallenge);\n                tempchallenge.sign1 = await this.vaultysId.signChallenge(serialized);\n                this.challenge = tempchallenge;\n                this.mykey = this.challenge.pk1;\n                this.hisKey = this.challenge.pk2;\n                this.state = this.challenge.state = COMPLETE;\n                return;\n            }\n            if (this.state === UNINITIALISED && tempchallenge.state === COMPLETE) {\n                console.log(\"COMPLETE case?!!\");\n                return;\n            }\n            if (tempchallenge.protocol !== this.challenge.protocol || tempchallenge.service !== this.challenge.service) {\n                this.state = ERROR;\n                throw new Error(`The challenge was expecting protocol '${this.challenge.protocol}' and service '${this.challenge.service}', received '${tempchallenge.protocol}' and '${tempchallenge.service}'`);\n            }\n            if (this.state === INIT && tempchallenge.state === STEP1) {\n                // @ts-ignore\n                if (!tempchallenge.nonce?.subarray(0, 16).equals(this.challenge.nonce.subarray(0, 16))) {\n                    this.state = ERROR;\n                    throw new Error(\"Nonce has been tampered with\");\n                }\n                if (tempchallenge.timestamp !== this.challenge?.timestamp) {\n                    this.state = ERROR;\n                    throw new Error(\"Timestamp has been tampered with\");\n                }\n                if (!this.mykey?.equals(tempchallenge.pk1)) {\n                    this.state = ERROR;\n                    throw new Error(`The challenge has been tampered with. Received pk1 = '${tempchallenge.pk1}', expected pk1 = '${this.mykey}'`);\n                }\n                const serialized = serializeUnsigned(tempchallenge);\n                if (!serialized) {\n                    this.state = ERROR;\n                    throw new Error(\"Error processing Challenge\");\n                }\n                tempchallenge.sign1 = await this.vaultysId.signChallenge(serialized);\n                this.challenge = tempchallenge;\n                this.hisKey = tempchallenge.pk2;\n                this.state = this.challenge.state = COMPLETE;\n            }\n            else if (this.state === STEP1 && tempchallenge.state === COMPLETE) {\n                if (tempchallenge.protocol !== this.challenge.protocol || tempchallenge.service !== this.challenge.service) {\n                    this.state = ERROR;\n                    throw new Error(`The challenge was expecting protocol '${this.challenge.protocol}' and service '${this.challenge.service}', received '${tempchallenge.protocol}' and '${tempchallenge.service}'`);\n                }\n                // @ts-ignore\n                if (!tempchallenge.nonce?.subarray(16, 32).equals(this.challenge.nonce.subarray(16, 32))) {\n                    this.state = ERROR;\n                    throw new Error(\"Nonce has been tampered with\");\n                }\n                if (tempchallenge.timestamp !== this.challenge?.timestamp) {\n                    this.state = ERROR;\n                    throw new Error(\"Timestamp has been tampered with\");\n                }\n                // INFO: no need for liveliness check since the whole certificate is complete\n                // if (!isLive(tempchallenge, this.liveliness)) {\n                //   this.state = ERROR;\n                //   throw new Error(\"challenge timestamp failed the liveliness at 2nd signature\");\n                // }\n                if (!this.mykey.equals(tempchallenge.pk2)) {\n                    this.state = ERROR;\n                    throw new Error(`The challenge pk2 has been tampered with`);\n                }\n                this.challenge = tempchallenge;\n                this.state = COMPLETE;\n            }\n            else {\n                //console.log(tempchallenge);\n                const error = `The challenge is in an expected state. Received state = '${tempchallenge.state}', expected state = '${this.state + 1}'`;\n                this.state = ERROR;\n                throw new Error(error);\n            }\n        }\n    }\n}\nChallenger.deserializeCertificate = deserialize;\nChallenger.serializeCertificate_v0 = encode_v0_full;\nChallenger.serializeCertificate = serializeUnsigned;\nexports.default = Challenger;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = exports.HMAC = void 0;\n/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nconst utils_ts_1 = require(\"./utils.js\");\nclass HMAC extends utils_ts_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        (0, utils_ts_1.ahash)(hash);\n        const key = (0, utils_ts_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        (0, utils_ts_1.clean)(pad);\n    }\n    update(buf) {\n        (0, utils_ts_1.aexists)(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        (0, utils_ts_1.aexists)(this);\n        (0, utils_ts_1.abytes)(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\nexports.HMAC = HMAC;\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toBig = exports.shrSL = exports.shrSH = exports.rotrSL = exports.rotrSH = exports.rotrBL = exports.rotrBH = exports.rotr32L = exports.rotr32H = exports.rotlSL = exports.rotlSH = exports.rotlBL = exports.rotlBH = exports.add5L = exports.add5H = exports.add4L = exports.add4H = exports.add3L = exports.add3H = void 0;\nexports.add = add;\nexports.fromBig = fromBig;\nexports.split = split;\n/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nexports.shrSH = shrSH;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.shrSL = shrSL;\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nexports.rotrSH = rotrSH;\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.rotrSL = rotrSL;\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nexports.rotrBH = rotrBH;\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\nexports.rotrBL = rotrBL;\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nexports.rotr32H = rotr32H;\nconst rotr32L = (h, _l) => h;\nexports.rotr32L = rotr32L;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nexports.rotlSH = rotlSH;\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\nexports.rotlSL = rotlSL;\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nexports.rotlBH = rotlBH;\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\nexports.rotlBL = rotlBL;\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nexports.add3L = add3L;\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nexports.add3H = add3H;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nexports.add4L = add4L;\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nexports.add4H = add4H;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nexports.add5L = add5L;\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\nexports.add5H = add5H;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha512_224 = exports.sha512_256 = exports.sha384 = exports.sha512 = exports.sha224 = exports.sha256 = exports.SHA512_256 = exports.SHA512_224 = exports.SHA384 = exports.SHA512 = exports.SHA224 = exports.SHA256 = void 0;\n/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nconst _md_ts_1 = require(\"./_md.js\");\nconst u64 = require(\"./_u64.js\");\nconst utils_ts_1 = require(\"./utils.js\");\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends _md_ts_1.HashMD {\n    constructor(outputLen = 32) {\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = _md_ts_1.SHA256_IV[0] | 0;\n        this.B = _md_ts_1.SHA256_IV[1] | 0;\n        this.C = _md_ts_1.SHA256_IV[2] | 0;\n        this.D = _md_ts_1.SHA256_IV[3] | 0;\n        this.E = _md_ts_1.SHA256_IV[4] | 0;\n        this.F = _md_ts_1.SHA256_IV[5] | 0;\n        this.G = _md_ts_1.SHA256_IV[6] | 0;\n        this.H = _md_ts_1.SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_ts_1.rotr)(W15, 7) ^ (0, utils_ts_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_ts_1.rotr)(W2, 17) ^ (0, utils_ts_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_ts_1.rotr)(E, 6) ^ (0, utils_ts_1.rotr)(E, 11) ^ (0, utils_ts_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + (0, _md_ts_1.Chi)(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_ts_1.rotr)(A, 2) ^ (0, utils_ts_1.rotr)(A, 13) ^ (0, utils_ts_1.rotr)(A, 22);\n            const T2 = (sigma0 + (0, _md_ts_1.Maj)(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        (0, utils_ts_1.clean)(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        (0, utils_ts_1.clean)(this.buffer);\n    }\n}\nexports.SHA256 = SHA256;\nclass SHA224 extends SHA256 {\n    constructor() {\n        super(28);\n        this.A = _md_ts_1.SHA224_IV[0] | 0;\n        this.B = _md_ts_1.SHA224_IV[1] | 0;\n        this.C = _md_ts_1.SHA224_IV[2] | 0;\n        this.D = _md_ts_1.SHA224_IV[3] | 0;\n        this.E = _md_ts_1.SHA224_IV[4] | 0;\n        this.F = _md_ts_1.SHA224_IV[5] | 0;\n        this.G = _md_ts_1.SHA224_IV[6] | 0;\n        this.H = _md_ts_1.SHA224_IV[7] | 0;\n    }\n}\nexports.SHA224 = SHA224;\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nclass SHA512 extends _md_ts_1.HashMD {\n    constructor(outputLen = 64) {\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = _md_ts_1.SHA512_IV[0] | 0;\n        this.Al = _md_ts_1.SHA512_IV[1] | 0;\n        this.Bh = _md_ts_1.SHA512_IV[2] | 0;\n        this.Bl = _md_ts_1.SHA512_IV[3] | 0;\n        this.Ch = _md_ts_1.SHA512_IV[4] | 0;\n        this.Cl = _md_ts_1.SHA512_IV[5] | 0;\n        this.Dh = _md_ts_1.SHA512_IV[6] | 0;\n        this.Dl = _md_ts_1.SHA512_IV[7] | 0;\n        this.Eh = _md_ts_1.SHA512_IV[8] | 0;\n        this.El = _md_ts_1.SHA512_IV[9] | 0;\n        this.Fh = _md_ts_1.SHA512_IV[10] | 0;\n        this.Fl = _md_ts_1.SHA512_IV[11] | 0;\n        this.Gh = _md_ts_1.SHA512_IV[12] | 0;\n        this.Gl = _md_ts_1.SHA512_IV[13] | 0;\n        this.Hh = _md_ts_1.SHA512_IV[14] | 0;\n        this.Hl = _md_ts_1.SHA512_IV[15] | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        (0, utils_ts_1.clean)(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        (0, utils_ts_1.clean)(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexports.SHA512 = SHA512;\nclass SHA384 extends SHA512 {\n    constructor() {\n        super(48);\n        this.Ah = _md_ts_1.SHA384_IV[0] | 0;\n        this.Al = _md_ts_1.SHA384_IV[1] | 0;\n        this.Bh = _md_ts_1.SHA384_IV[2] | 0;\n        this.Bl = _md_ts_1.SHA384_IV[3] | 0;\n        this.Ch = _md_ts_1.SHA384_IV[4] | 0;\n        this.Cl = _md_ts_1.SHA384_IV[5] | 0;\n        this.Dh = _md_ts_1.SHA384_IV[6] | 0;\n        this.Dl = _md_ts_1.SHA384_IV[7] | 0;\n        this.Eh = _md_ts_1.SHA384_IV[8] | 0;\n        this.El = _md_ts_1.SHA384_IV[9] | 0;\n        this.Fh = _md_ts_1.SHA384_IV[10] | 0;\n        this.Fl = _md_ts_1.SHA384_IV[11] | 0;\n        this.Gh = _md_ts_1.SHA384_IV[12] | 0;\n        this.Gl = _md_ts_1.SHA384_IV[13] | 0;\n        this.Hh = _md_ts_1.SHA384_IV[14] | 0;\n        this.Hl = _md_ts_1.SHA384_IV[15] | 0;\n    }\n}\nexports.SHA384 = SHA384;\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n    0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n    0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n    0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super(28);\n        this.Ah = T224_IV[0] | 0;\n        this.Al = T224_IV[1] | 0;\n        this.Bh = T224_IV[2] | 0;\n        this.Bl = T224_IV[3] | 0;\n        this.Ch = T224_IV[4] | 0;\n        this.Cl = T224_IV[5] | 0;\n        this.Dh = T224_IV[6] | 0;\n        this.Dl = T224_IV[7] | 0;\n        this.Eh = T224_IV[8] | 0;\n        this.El = T224_IV[9] | 0;\n        this.Fh = T224_IV[10] | 0;\n        this.Fl = T224_IV[11] | 0;\n        this.Gh = T224_IV[12] | 0;\n        this.Gl = T224_IV[13] | 0;\n        this.Hh = T224_IV[14] | 0;\n        this.Hl = T224_IV[15] | 0;\n    }\n}\nexports.SHA512_224 = SHA512_224;\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super(32);\n        this.Ah = T256_IV[0] | 0;\n        this.Al = T256_IV[1] | 0;\n        this.Bh = T256_IV[2] | 0;\n        this.Bl = T256_IV[3] | 0;\n        this.Ch = T256_IV[4] | 0;\n        this.Cl = T256_IV[5] | 0;\n        this.Dh = T256_IV[6] | 0;\n        this.Dl = T256_IV[7] | 0;\n        this.Eh = T256_IV[8] | 0;\n        this.El = T256_IV[9] | 0;\n        this.Fh = T256_IV[10] | 0;\n        this.Fl = T256_IV[11] | 0;\n        this.Gh = T256_IV[12] | 0;\n        this.Gl = T256_IV[13] | 0;\n        this.Hh = T256_IV[14] | 0;\n        this.Hl = T256_IV[15] | 0;\n    }\n}\nexports.SHA512_256 = SHA512_256;\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexports.sha256 = (0, utils_ts_1.createHasher)(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexports.sha224 = (0, utils_ts_1.createHasher)(() => new SHA224());\n/** SHA2-512 hash function from RFC 4634. */\nexports.sha512 = (0, utils_ts_1.createHasher)(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexports.sha384 = (0, utils_ts_1.createHasher)(() => new SHA384());\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexports.sha512_256 = (0, utils_ts_1.createHasher)(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexports.sha512_224 = (0, utils_ts_1.createHasher)(() => new SHA512_224());\n//# sourceMappingURL=sha2.js.map","\"use strict\";\n/**\n * Post-Quantum Cryptography Operations\n *\n * This file contains implementations for post-quantum cryptographic algorithms\n * starting with DILITHIUM for digital signatures.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PQ_COSE_KEY_PARAMS = exports.PQ_COSE_KEY_TYPE = exports.PQ_COSE_ALG = void 0;\nexports.generateDilithiumKeyPair = generateDilithiumKeyPair;\nexports.signDilithium = signDilithium;\nexports.verifyDilithium = verifyDilithium;\nexports.createDilithiumCoseKey = createDilithiumCoseKey;\nexports.getDilithiumKeyInfo = getDilithiumKeyInfo;\nconst ml_dsa_js_1 = require(\"@noble/post-quantum/ml-dsa.js\");\nconst buffer_1 = require(\"buffer/\");\nconst crypto_1 = require(\"./crypto\");\n/**\n * COSE algorithm identifiers for post-quantum algorithms\n * Note: These values are provisional and may need to be updated as standards evolve\n */\nexports.PQ_COSE_ALG = {\n    // DILITHIUM variants (using negative values as per COSE convention for new algorithms)\n    DILITHIUM2: -46, // Level 2 (128-bit security)\n    DILITHIUM3: -47, // Level 3 (192-bit security)\n    DILITHIUM5: -48, // Level 5 (256-bit security)\n};\n/**\n * COSE key type for DILITHIUM\n */\nexports.PQ_COSE_KEY_TYPE = {\n    DILITHIUM: 4, // Custom key type for DILITHIUM\n};\n/**\n * COSE key parameter identifiers for DILITHIUM\n */\nexports.PQ_COSE_KEY_PARAMS = {\n    DILITHIUM_MODE: -100, // Mode parameter (2, 3, or 5)\n    DILITHIUM_PK: -101, // Public key\n    DILITHIUM_SK: -102, // Secret key\n};\n/**\n * Generate a DILITHIUM Level 2 key pair\n * @returns Promise resolving to an object containing the key pair\n */\nfunction generateDilithiumKeyPair(seed) {\n    if (!seed)\n        seed = (0, crypto_1.randomBytes)(32);\n    const keyPair = ml_dsa_js_1.ml_dsa65.keygen(seed);\n    return {\n        publicKey: buffer_1.Buffer.from(keyPair.publicKey),\n        secretKey: buffer_1.Buffer.from(keyPair.secretKey),\n    };\n}\n/**\n * Sign a message using DILITHIUM Level 2\n * @param message - The message to sign\n * @param privateKey - The DILITHIUM private key\n * @returns Promise resolving to signature as Uint8Array\n */\nfunction signDilithium(message, secretKey) {\n    return buffer_1.Buffer.from(ml_dsa_js_1.ml_dsa65.sign(secretKey, message));\n}\n/**\n * Verify a DILITHIUM Level 2 signature\n * @param message - The original message\n * @param signature - The signature to verify\n * @param publicKey - The DILITHIUM public key\n * @returns Promise resolving to boolean indicating if signature is valid\n */\nfunction verifyDilithium(message, signature, publicKey) {\n    return ml_dsa_js_1.ml_dsa65.verify(publicKey, message, signature);\n}\n/**\n * Create a COSE key representation for a DILITHIUM public key\n * @param publicKey - The DILITHIUM public key\n * @returns Map representing the COSE key\n */\nfunction createDilithiumCoseKey(publicKey) {\n    const coseKey = new Map();\n    // Standard COSE key parameters\n    coseKey.set(1, exports.PQ_COSE_KEY_TYPE.DILITHIUM); // kty: Key Type\n    coseKey.set(3, exports.PQ_COSE_ALG.DILITHIUM2); // alg: Algorithm\n    // DILITHIUM-specific parameters\n    coseKey.set(exports.PQ_COSE_KEY_PARAMS.DILITHIUM_MODE, 2); // Level 2\n    coseKey.set(exports.PQ_COSE_KEY_PARAMS.DILITHIUM_PK, publicKey);\n    return coseKey;\n}\n/**\n * Get key size information for DILITHIUM\n * @returns Object with key size information\n */\nfunction getDilithiumKeyInfo() {\n    return {\n        publicKeySize: 1952, // Size in bytes for DILITHIUM2 public key\n        secretKeySize: 4032, // Size in bytes for DILITHIUM2 private key\n        signatureSize: 3309, // Size in bytes for DILITHIUM2 signature\n    };\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"./crypto\");\nconst Fido2Manager_1 = __importDefault(require(\"./Fido2Manager\"));\nconst Fido2PRFManager_1 = __importDefault(require(\"./Fido2PRFManager\"));\nconst KeyManager_1 = __importDefault(require(\"./KeyManager\"));\nconst SoftCredentials_1 = __importDefault(require(\"./platform/SoftCredentials\"));\nconst webauthn_1 = require(\"./platform/webauthn\");\nconst buffer_1 = require(\"buffer/\");\nconst PQManager_1 = __importDefault(require(\"./PQManager\"));\nconst pqCrypto_1 = require(\"./pqCrypto\");\nconst TYPE_MACHINE = 0;\nconst TYPE_PERSON = 1;\nconst TYPE_ORGANIZATION = 2;\nconst TYPE_FIDO2 = 3;\nconst TYPE_FIDO2PRF = 4;\nclass VaultysId {\n    constructor(keyManager, certificate, type = TYPE_MACHINE) {\n        this.encrypt = VaultysId.encrypt;\n        this.type = type;\n        this.keyManager = keyManager;\n        this.certificate = certificate;\n    }\n    // // Set the index of the proof in case of previous key for this protocol/service have been compromised\n    // setProofIndex(protocol, service, index) {\n    //   this.proofIndices[`${protocol}-${service}`] = index;\n    // }\n    // createSwapingCertificate(protocol, service) {\n    //   let proofIndex = this.proofIndices[`${protocol}-${service}`]\n    //     ? this.proofIndices[`${protocol}-${service}`]\n    //     : 0;\n    //   const pk = this.getKey({\n    //     protocol,\n    //     service,\n    //     proofIndex,\n    //   });\n    //   const newPk = this.getKey({\n    //     protocol,\n    //     service,\n    //     proofIndex: proofIndex + 1,\n    //   });\n    //   const xPub = this.device.getProofXPub({\n    //     protocol,\n    //     service,\n    //     index,\n    //   });\n    //   const derivation = PDM.getProofDerivation(protocol, service, index);\n    //   const revocationCertificate = `vaultys://p2p/revocation?pk=${pk}&npk=${newPk}&xpub=${xpub}&index=${derivation}`;\n    // }\n    static fromId(id, certificate, encoding = \"hex\") {\n        let cleanId = id;\n        if (id.data) {\n            // Buffer thing\n            cleanId = buffer_1.Buffer.from(id.data);\n        }\n        if (id instanceof Uint8Array) {\n            // Buffer thing\n            cleanId = buffer_1.Buffer.from(id);\n        }\n        if (typeof id === \"string\") {\n            cleanId = buffer_1.Buffer.from(id, encoding);\n        }\n        const type = cleanId[0];\n        if (type === TYPE_FIDO2) {\n            const f2m = Fido2Manager_1.default.fromId(cleanId.slice(1));\n            return new VaultysId(f2m, certificate, type);\n        }\n        else if (type === TYPE_FIDO2PRF) {\n            const f2m = Fido2PRFManager_1.default.fromId(cleanId.slice(1));\n            return new VaultysId(f2m, certificate, type);\n        }\n        else {\n            if (cleanId.length > 1952) {\n                const pqm = PQManager_1.default.fromId(cleanId.slice(1));\n                return new VaultysId(pqm, certificate, type);\n            }\n            else {\n                const km = KeyManager_1.default.fromId(cleanId.slice(1));\n                return new VaultysId(km, certificate, type);\n            }\n        }\n    }\n    static async fromEntropy(entropy, type, pqc = false) {\n        const cleanedEntropy = entropy;\n        if (pqc) {\n            const km = await PQManager_1.default.create_PQ_fromEntropy(cleanedEntropy);\n            return new VaultysId(km, undefined, type);\n        }\n        else {\n            const km = await KeyManager_1.default.create_Id25519_fromEntropy(cleanedEntropy);\n            return new VaultysId(km, undefined, type);\n        }\n    }\n    static async createWebauthn(passkey = true, onPRFEnabled) {\n        const options = VaultysId.createPublicKeyCredentialCreationOptions(passkey);\n        const webAuthn = (0, webauthn_1.getWebAuthnProvider)();\n        const attestation = await webAuthn.create(options);\n        if (!attestation)\n            return null;\n        else\n            return VaultysId.fido2FromAttestation(attestation, onPRFEnabled);\n    }\n    static async createPQC() {\n        const options = VaultysId.createPublicKeyCredentialOptionsPQC();\n        const webAuthn = (0, webauthn_1.getWebAuthnProvider)();\n        const attestation = await webAuthn.create(options);\n        //console.log(attestation);\n        if (!attestation)\n            return null;\n        else\n            return VaultysId.fido2FromAttestation(attestation);\n    }\n    static async fido2FromAttestation(attestation, onPRFEnabled) {\n        // should be somehow valid.\n        SoftCredentials_1.default.verifyPackedAttestation(attestation.response, true);\n        //console.log(SoftCredentials.verifyPackedAttestation(attestation.response as AuthenticatorAttestationResponse, true));\n        if (attestation.getClientExtensionResults().prf?.enabled && (!onPRFEnabled || (await onPRFEnabled()))) {\n            const f2m = await Fido2PRFManager_1.default.createFromAttestation(attestation);\n            return new VaultysId(f2m, undefined, TYPE_FIDO2PRF);\n        }\n        else {\n            const f2m = await Fido2Manager_1.default.createFromAttestation(attestation);\n            return new VaultysId(f2m, undefined, TYPE_FIDO2);\n        }\n    }\n    static async machineFromEntropy(entropy) {\n        return VaultysId.fromEntropy(entropy, TYPE_MACHINE);\n    }\n    static async organizationFromEntropy(entropy) {\n        return VaultysId.fromEntropy(entropy, TYPE_ORGANIZATION);\n    }\n    static async personFromEntropy(entropy) {\n        return VaultysId.fromEntropy(entropy, TYPE_PERSON);\n    }\n    static fromSecret(secret, encoding = \"hex\") {\n        const secretBuffer = buffer_1.Buffer.from(secret, encoding);\n        const type = secretBuffer[0];\n        if (type == TYPE_FIDO2) {\n            const f2m = Fido2Manager_1.default.fromSecret(secretBuffer.slice(1));\n            return new VaultysId(f2m, undefined, type);\n        }\n        else if (type == TYPE_FIDO2PRF) {\n            const f2m = Fido2PRFManager_1.default.fromSecret(secretBuffer.slice(1));\n            return new VaultysId(f2m, undefined, type);\n        }\n        else {\n            //console.log(secretBuffer.length);\n            if (secretBuffer.length === 109) {\n                const pqm = PQManager_1.default.fromSecret(secretBuffer.slice(1));\n                return new VaultysId(pqm, undefined, type);\n            }\n            else {\n                const km = KeyManager_1.default.fromSecret(secretBuffer.slice(1));\n                return new VaultysId(km, undefined, type);\n            }\n        }\n    }\n    static async generatePerson(pqc = false) {\n        if (pqc) {\n            const km = await PQManager_1.default.generate_PQ();\n            return new VaultysId(km, undefined, TYPE_PERSON);\n        }\n        else {\n            const km = await KeyManager_1.default.generate_Id25519();\n            return new VaultysId(km, undefined, TYPE_PERSON);\n        }\n    }\n    static async generateOrganization(pqc = false) {\n        if (pqc) {\n            const km = await PQManager_1.default.generate_PQ();\n            return new VaultysId(km, undefined, TYPE_ORGANIZATION);\n        }\n        else {\n            const km = await KeyManager_1.default.generate_Id25519();\n            return new VaultysId(km, undefined, TYPE_ORGANIZATION);\n        }\n    }\n    static async generateMachine(pqc = false) {\n        if (pqc) {\n            const km = await PQManager_1.default.generate_PQ();\n            return new VaultysId(km, undefined, TYPE_MACHINE);\n        }\n        else {\n            const km = await KeyManager_1.default.generate_Id25519();\n            return new VaultysId(km, undefined, TYPE_MACHINE);\n        }\n    }\n    get relationshipCertificate() {\n        return this.certificate;\n    }\n    getSecret(encoding = \"hex\") {\n        return buffer_1.Buffer.concat([buffer_1.Buffer.from([this.type]), this.keyManager.getSecret()]).toString(encoding);\n    }\n    get fingerprint() {\n        const t = buffer_1.Buffer.from([this.type]).toString(\"hex\");\n        const fp = t + (0, crypto_1.hash)(\"SHA224\", this.keyManager.id).toString(\"hex\");\n        return fp\n            .slice(0, 40)\n            .toUpperCase()\n            .match(/.{1,4}/g)\n            .join(\" \");\n    }\n    get did() {\n        const t = buffer_1.Buffer.from([this.type]).toString(\"hex\");\n        const fp = t + (0, crypto_1.hash)(\"SHA224\", this.keyManager.id).toString(\"hex\");\n        return `did:vaultys:${fp.slice(0, 40)}`;\n    }\n    get didDocument() {\n        return {\n            \"@context\": [\"https://www.w3.org/ns/did/v1\", \"https://w3id.org/security/suites/ed25519-2020/v1\"],\n            id: this.did,\n            authentication: [\n                {\n                    id: `${this.did}#keys-1`,\n                    type: this.keyManager.authType,\n                    controller: this.did,\n                    publicKeyMultibase: \"m\" + buffer_1.Buffer.from(this.keyManager.signer.publicKey).toString(\"base64\"),\n                },\n            ],\n            keyAgreement: [\n                {\n                    id: `${this.did}#keys-2`,\n                    type: this.keyManager.encType,\n                    controller: this.did,\n                    publicKeyMultibase: \"m\" + buffer_1.Buffer.from(this.keyManager.cypher.publicKey).toString(\"base64\"),\n                },\n            ],\n        };\n    }\n    get id() {\n        return buffer_1.Buffer.concat([buffer_1.Buffer.from([this.type]), this.keyManager.id]);\n    }\n    toVersion(v) {\n        this.keyManager.version = v;\n        return this;\n    }\n    get version() {\n        return this.keyManager.version;\n    }\n    isHardware() {\n        return this.type === TYPE_FIDO2 || this.type === TYPE_FIDO2PRF;\n    }\n    isMachine() {\n        return this.type === TYPE_MACHINE;\n    }\n    isPerson() {\n        return this.type === TYPE_PERSON;\n    }\n    getOTPHmac(timelock = 1 * 3600000) {\n        const otp = Math.floor(new Date().getTime() / timelock);\n        return this.keyManager.getSecretHash(buffer_1.Buffer.from(`OTP-${otp}`)).toString(\"hex\");\n    }\n    // Need to think about insecure use of this function\n    getOTP(prefix = \"password\", timelock = 24 * 3600000) {\n        if (this.certificate) {\n            const otp = Math.floor(new Date().getTime() / timelock);\n            const toHash = buffer_1.Buffer.concat([buffer_1.Buffer.from(prefix, \"utf-8\"), buffer_1.Buffer.from(this.certificate), buffer_1.Buffer.from([otp])]);\n            return (0, crypto_1.hash)(\"SHA256\", toHash).toString(\"hex\");\n        }\n        throw new Error(\"no certificate, cannot derive OTP\");\n    }\n    async performDiffieHellman(otherVaultysId) {\n        return this.keyManager.performDiffieHellman(otherVaultysId.keyManager);\n    }\n    /**\n     * Static method to perform a Diffie-Hellman key exchange between two VaultysId instances\n     * @param vaultysId1 First VaultysId instance\n     * @param vaultysId2 Second VaultysId instance\n     * @returns A shared secret that both parties can derive\n     */\n    static async diffieHellman(vaultysId1, vaultysId2) {\n        return vaultysId1.performDiffieHellman(vaultysId2);\n    }\n    /**\n     * Encrypt a message using DHIES for a recipient\n     * @param message Message to encrypt\n     * @param recipientId Recipient's VaultysId ID\n     * @returns Encrypted message or null if encryption fails\n     */\n    async dhiesEncrypt(message, recipientId) {\n        let cleanId;\n        if (typeof recipientId === \"string\") {\n            cleanId = buffer_1.Buffer.from(recipientId.slice(2), \"hex\");\n        }\n        else {\n            cleanId = recipientId.slice(1);\n        }\n        return this.keyManager.dhiesEncrypt(message, cleanId);\n    }\n    /**\n     * Decrypt a message encrypted with DHIES\n     * @param encryptedMessage Encrypted message from dhiesEncrypt\n     * @returns Decrypted message as Buffer or null if decryption fails\n     */\n    async dhiesDecrypt(encryptedMessage, senderId) {\n        let cleanId;\n        if (typeof senderId === \"string\") {\n            cleanId = buffer_1.Buffer.from(senderId.slice(2), \"hex\");\n        }\n        else {\n            cleanId = senderId.slice(1);\n        }\n        return this.keyManager.dhiesDecrypt(encryptedMessage, cleanId);\n    }\n    async signChallenge(challenge) {\n        if (typeof challenge == \"string\") {\n            challenge = buffer_1.Buffer.from(challenge, \"hex\");\n        }\n        const result = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.concat([this.id, challenge]));\n        const signature = await this.keyManager.sign(result);\n        if (!signature)\n            throw new Error(\"Could not sign challenge\");\n        else\n            return signature;\n    }\n    verifyChallenge(challenge, signature, userVerification) {\n        if (typeof challenge == \"string\") {\n            challenge = buffer_1.Buffer.from(challenge, \"hex\");\n        }\n        if (typeof signature == \"string\") {\n            signature = buffer_1.Buffer.from(signature, \"hex\");\n        }\n        const result = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.concat([this.id, challenge]));\n        return this.keyManager.verify(result, signature, userVerification);\n    }\n    async signcrypt(plaintext, recipientIds) {\n        return this.keyManager.signcrypt(plaintext, recipientIds.map((id) => {\n            if (typeof id === \"string\")\n                return buffer_1.Buffer.from(id.slice(2), \"hex\");\n            else\n                return id.slice(1);\n        }));\n    }\n    static async encrypt(plaintext, recipientIds) {\n        return KeyManager_1.default.encrypt(plaintext, recipientIds.map((id) => {\n            if (typeof id === \"string\")\n                return buffer_1.Buffer.from(id.slice(2), \"hex\");\n            else\n                return id.slice(1);\n        }));\n    }\n    async decrypt(encryptedMessage, senderId) {\n        let cleanId;\n        if (senderId) {\n            if (typeof senderId === \"string\")\n                cleanId = buffer_1.Buffer.from(senderId.slice(2));\n            // @ts-ignore\n            else\n                cleanId = senderId.subarray(1);\n        }\n        return this.keyManager.decrypt(encryptedMessage, cleanId);\n    }\n    async hmac(message) {\n        const cypher = await this.keyManager.getCypher();\n        return cypher.hmac(message);\n    }\n}\nVaultysId.createPublicKeyCredentialOptionsPQC = () => {\n    const safari = /^((?!chrome|android).)*applewebkit/i.test(navigator.userAgent);\n    const hint = \"security-key\";\n    const options = {\n        challenge: (0, crypto_1.randomBytes)(32),\n        rp: {\n            name: \"Vaultys ID\",\n        },\n        user: {\n            id: (0, crypto_1.randomBytes)(16),\n            name: \"Vaultys ID\",\n            displayName: \"Vaultys Wallet ID\",\n        },\n        attestation: safari ? \"none\" : \"direct\", // SAFARI Dead, they removed direct attestation\n        authenticatorSelection: {\n            authenticatorAttachment: \"cross-platform\",\n            residentKey: \"discouraged\",\n            userVerification: \"preferred\",\n        },\n        // @ts-ignore not yet in dom types\n        hints: [hint],\n        extensions: {\n            prf: {\n                eval: {\n                    first: buffer_1.Buffer.from(\"VaultysID salt\", \"utf-8\"),\n                },\n            },\n        },\n        pubKeyCredParams: [{ type: \"public-key\", alg: pqCrypto_1.PQ_COSE_ALG.DILITHIUM2 }],\n    };\n    return options;\n};\nVaultysId.createPublicKeyCredentialCreationOptions = (passkey) => {\n    const safari = /^((?!chrome|android).)*applewebkit/i.test(navigator.userAgent);\n    const hint = passkey ? \"client-device\" : \"security-key\";\n    const options = {\n        challenge: (0, crypto_1.randomBytes)(32),\n        rp: {\n            name: \"Vaultys ID\",\n        },\n        user: {\n            id: (0, crypto_1.randomBytes)(16),\n            name: \"Vaultys ID\",\n            displayName: \"Vaultys Wallet ID\",\n        },\n        attestation: safari ? \"none\" : \"direct\", // SAFARI Dead, they removed direct attestation\n        authenticatorSelection: {\n            authenticatorAttachment: passkey ? \"platform\" : \"cross-platform\",\n            residentKey: passkey ? \"required\" : \"discouraged\",\n            userVerification: \"preferred\",\n        },\n        // @ts-ignore not yet in dom types\n        hints: [hint],\n        extensions: {\n            prf: {\n                eval: {\n                    first: buffer_1.Buffer.from(\"VaultysID salt\", \"utf-8\"),\n                },\n            },\n        },\n        pubKeyCredParams: [\n            {\n                type: \"public-key\",\n                alg: -7, // SECP256/ECDSA, Ed25519/EdDSA (-8) not supported natively on mobile or yubikey (crying)\n            },\n            {\n                type: \"public-key\",\n                alg: -8, // Ed25519/EdDSA prefered\n            },\n            {\n                type: \"public-key\",\n                alg: -257, // RS256\n            },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -36\n            // },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -37\n            // },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -38\n            // },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -39\n            // },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -258\n            // },\n            // {\n            //   \"type\": \"public-key\",\n            //   \"alg\": -259\n            // }\n        ],\n    };\n    return options;\n};\nexports.default = VaultysId;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DHIES = void 0;\nconst saltpack_1 = require(\"@vaultys/saltpack\");\nconst crypto_1 = require(\"./crypto\");\nconst buffer_1 = require(\"buffer/\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst ed25519_1 = require(\"@noble/curves/ed25519\");\ned25519_1.ed25519.CURVE = { ...ed25519_1.ed25519.CURVE };\n// @ts-ignore hack to get compatibility with former @stricahq/bip32ed25519 lib\ned25519_1.ed25519.CURVE.adjustScalarBytes = (bytes) => {\n    // Section 5: For X25519, in order to decode 32 random bytes as an integer scalar,\n    // set the three least significant bits of the first byte\n    bytes[0] &= 248; // 0b1111_1000\n    // and the most significant bit of the last to zero,\n    bytes[31] &= 63; // 0b0001_1111\n    // set the second most significant bit of the last byte to 1\n    bytes[31] |= 64; // 0b0100_0000\n    return bytes;\n};\n////@ts-expect-error fix for wrong way of exporting bip32ed25519\n//const bip32 = bip32fix.default ?? bip32fix;\nconst LEVEL_ROOT = 1;\nconst LEVEL_DERIVED = 2;\nconst sha512 = (data) => (0, crypto_1.hash)(\"sha512\", data);\nconst sha256 = (data) => (0, crypto_1.hash)(\"sha256\", data);\nconst serializeID_v0 = (km) => {\n    const encodeBinary = (data) => {\n        if (data.length <= 65535) {\n            // bin16: binary data whose length is upto (2^16)-1 bytes\n            return buffer_1.Buffer.from([0xc5, data.length >> 8, data.length & 0xff, ...data]);\n        }\n        else {\n            // bin32: binary data whose length is upto (2^32)-1 bytes\n            return buffer_1.Buffer.from([0xc6, (data.length >> 24) & 0xff, (data.length >> 16) & 0xff, (data.length >> 8) & 0xff, data.length & 0xff, ...data]);\n        }\n    };\n    const version = buffer_1.Buffer.from([0x84, 0xa1, 0x76, 0]);\n    const proof = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa1, 0x70]), encodeBinary(km.proof)]);\n    const sign = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa1, 0x78]), encodeBinary(km.signer.publicKey)]);\n    const cypher = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa1, 0x65]), encodeBinary(km.cypher.publicKey)]);\n    return buffer_1.Buffer.concat([version, proof, sign, cypher]);\n};\n/**\n * DHIES (Diffie-Hellman Integrated Encryption Scheme) for KeyManager\n * Provides authenticated encryption using Diffie-Hellman key exchange\n */\nclass DHIES {\n    constructor(keyManager) {\n        this.keyManager = keyManager;\n    }\n    /**\n     * Encrypts a message for a recipient using DHIES\n     *\n     * @param message The plaintext message to encrypt\n     * @param recipientPublicKey The recipient's public key\n     * @returns Encrypted message with ephemeral public key and authentication tag, or null if encryption fails\n     */\n    async encrypt(message, recipientPublicKey) {\n        if (this.keyManager.capability === \"public\") {\n            console.error(\"Cannot encrypt with DHIES using a public KeyManager\");\n            return null;\n        }\n        const cypher = await this.keyManager.getCypher();\n        // Convert message to Buffer if it's a string\n        const messageBuffer = typeof message === \"string\" ? buffer_1.Buffer.from(message, \"utf8\") : message;\n        try {\n            const ephemeralKey = (0, crypto_1.randomBytes)(32); // Generate a random 32-byte key for ephemeral key\n            // Derive shared secret using recipient's public key and sender secret key\n            const dh = await cypher.diffieHellman(recipientPublicKey);\n            const sharedSecret = buffer_1.Buffer.from(tweetnacl_1.default.scalarMult(ephemeralKey, dh));\n            // Key derivation: derive encryption and MAC keys from shared secret\n            const kdfOutput = this.kdf(sharedSecret, this.keyManager.cypher.publicKey, recipientPublicKey);\n            const encryptionKey = kdfOutput.encryptionKey;\n            const macKey = kdfOutput.macKey;\n            // Encrypt the message using XChaCha20-Poly1305\n            const nonce = (0, crypto_1.randomBytes)(24); // 24 bytes nonce for XChaCha20-Poly1305\n            const ciphertext = buffer_1.Buffer.from(tweetnacl_1.default.secretbox(messageBuffer, nonce, encryptionKey));\n            // Compute MAC (Message Authentication Code)\n            const dataToAuthenticate = buffer_1.Buffer.concat([this.keyManager.cypher.publicKey, nonce, ciphertext]);\n            const mac = this.computeMAC(macKey, dataToAuthenticate);\n            // Construct the final encrypted message: nonce + ephemeralKey + ciphertext + MAC\n            const encryptedMessage = buffer_1.Buffer.concat([nonce, ephemeralKey, ciphertext, mac]);\n            // Securely erase sensitive data\n            (0, crypto_1.secureErase)(sharedSecret);\n            (0, crypto_1.secureErase)(dh);\n            (0, crypto_1.secureErase)(encryptionKey);\n            (0, crypto_1.secureErase)(macKey);\n            return encryptedMessage;\n        }\n        catch (error) {\n            console.error(\"DHIES encryption failed:\", error);\n            return null;\n        }\n    }\n    /**\n     * Decrypts a message encrypted with DHIES\n     *\n     * @param encryptedMessage The complete encrypted message from the encrypt method\n     * @returns Decrypted message as a Buffer, or null if decryption fails\n     */\n    async decrypt(encryptedMessage, senderPublicKey) {\n        if (this.keyManager.capability === \"public\") {\n            console.error(\"Cannot decrypt with DHIES using a public KeyManager\");\n            return null;\n        }\n        try {\n            // Extract components from the encrypted message\n            // Format: nonce (24 bytes) + ephemeralKey (32 bytes) + ciphertext + MAC (32 bytes)\n            const nonce = encryptedMessage.slice(0, 24);\n            const ephemeralKey = encryptedMessage.slice(24, 56);\n            const mac = encryptedMessage.slice(encryptedMessage.length - 32);\n            const ciphertext = encryptedMessage.slice(56, encryptedMessage.length - 32);\n            const cypher = await this.keyManager.getCypher();\n            // Derive shared secret using sender public key and recipient secret key\n            const dh = await cypher.diffieHellman(senderPublicKey);\n            const sharedSecret = buffer_1.Buffer.from(tweetnacl_1.default.scalarMult(ephemeralKey, dh));\n            // Key derivation: derive encryption and MAC keys\n            const kdfOutput = this.kdf(sharedSecret, senderPublicKey, this.keyManager.cypher.publicKey);\n            const encryptionKey = kdfOutput.encryptionKey;\n            const macKey = kdfOutput.macKey;\n            // Verify MAC\n            const dataToAuthenticate = buffer_1.Buffer.concat([senderPublicKey, nonce, ciphertext]);\n            const computedMac = this.computeMAC(macKey, dataToAuthenticate);\n            if (!this.constantTimeEqual(mac, computedMac)) {\n                //console.log(mac, computedMac);\n                console.error(\"DHIES: MAC verification failed\");\n                return null;\n            }\n            // Decrypt the ciphertext\n            const plaintext = tweetnacl_1.default.secretbox.open(ciphertext, nonce, encryptionKey);\n            if (!plaintext) {\n                console.error(\"DHIES: Decryption failed\");\n                return null;\n            }\n            const result = buffer_1.Buffer.from(plaintext);\n            // Securely erase sensitive data\n            (0, crypto_1.secureErase)(sharedSecret);\n            (0, crypto_1.secureErase)(encryptionKey);\n            (0, crypto_1.secureErase)(macKey);\n            return result;\n        }\n        catch (error) {\n            console.error(\"DHIES decryption failed:\", error);\n            return null;\n        }\n    }\n    /**\n     * Key Derivation Function: Derives encryption and MAC keys from the shared secret\n     */\n    kdf(sharedSecret, ephemeralPublicKey, staticPublicKey) {\n        // Create a context for the KDF to ensure different keys for different uses\n        const context = buffer_1.Buffer.concat([buffer_1.Buffer.from(\"DHIES-KDF\"), ephemeralPublicKey, staticPublicKey]);\n        // Derive encryption key: HKDF-like construction\n        const encryptionKeyMaterial = (0, crypto_1.hash)(\"sha512\", buffer_1.Buffer.concat([\n            sharedSecret,\n            context,\n            buffer_1.Buffer.from([0x01]), // Domain separation byte\n        ]));\n        // Derive MAC key (using a different domain separation byte)\n        const macKeyMaterial = (0, crypto_1.hash)(\"sha512\", buffer_1.Buffer.concat([\n            sharedSecret,\n            context,\n            buffer_1.Buffer.from([0x02]), // Domain separation byte\n        ]));\n        // Use first 32 bytes of each as the actual keys (for NaCl's secretbox)\n        return {\n            encryptionKey: encryptionKeyMaterial.slice(0, 32),\n            macKey: macKeyMaterial.slice(0, 32),\n        };\n    }\n    /**\n     * Computes MAC for authenticated encryption\n     */\n    computeMAC(macKey, data) {\n        return (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.concat([macKey, data]));\n    }\n    /**\n     * Constant-time comparison of two buffers to prevent timing attacks\n     */\n    constantTimeEqual(a, b) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        let result = 0;\n        for (let i = 0; i < a.length; i++) {\n            result |= a[i] ^ b[i];\n        }\n        return result === 0;\n    }\n}\nexports.DHIES = DHIES;\nclass KeyManager {\n    constructor() {\n        this.level = 1;\n        this.version = 1;\n        this.capability = \"private\";\n        this.authType = \"Ed25519VerificationKey2020\";\n        this.encType = \"X25519KeyAgreementKey2019\";\n    }\n    static async create_Id25519_fromEntropy(entropy, swapIndex = 0) {\n        const km = new KeyManager();\n        km.entropy = entropy;\n        km.level = LEVEL_ROOT;\n        km.capability = \"private\";\n        const seed = sha512(entropy);\n        // const derivedKey = privateDerivePath(await bip32.Bip32PrivateKey.fromEntropy(seed.slice(0, 32)), `m/1'/0'/${swapIndex}'`);\n        km.proofKey = {\n            publicKey: buffer_1.Buffer.from([]), //deprecated\n        };\n        km.swapIndex = swapIndex;\n        km.proof = (0, crypto_1.hash)(\"sha256\", km.proofKey.publicKey);\n        // const privateKey = privateDerivePath(derivedKey, \"/0'\");\n        km.signer = {\n            publicKey: buffer_1.Buffer.from(ed25519_1.ed25519.getPublicKey(seed.slice(0, 32))),\n            secretKey: seed.slice(0, 32),\n        };\n        const swapIndexBuffer = buffer_1.Buffer.alloc(8);\n        swapIndexBuffer.writeBigInt64LE(BigInt(swapIndex), 0);\n        const seed2 = sha256(buffer_1.Buffer.concat([seed.slice(32, 64), swapIndexBuffer]));\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(seed2);\n        km.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        return km;\n    }\n    static generate_Id25519() {\n        return KeyManager.create_Id25519_fromEntropy((0, crypto_1.randomBytes)(32));\n    }\n    get id() {\n        if (this.version == 0)\n            return serializeID_v0(this);\n        else\n            return buffer_1.Buffer.from((0, msgpack_1.encode)({\n                v: this.version,\n                p: this.proof,\n                x: this.signer.publicKey,\n                e: this.cypher.publicKey,\n            }));\n    }\n    async getCypher() {\n        // todo fetch secretKey here\n        const cypher = this.cypher;\n        return {\n            hmac: (message) => (cypher.secretKey ? (0, crypto_1.hmac)(\"sha256\", buffer_1.Buffer.from(cypher.secretKey), \"VaultysID/\" + message + \"/end\") : undefined),\n            signcrypt: async (plaintext, publicKeys) => (0, saltpack_1.encryptAndArmor)(plaintext, cypher, publicKeys),\n            decrypt: async (encryptedMessage, senderKey) => (0, saltpack_1.dearmorAndDecrypt)(encryptedMessage, cypher, senderKey),\n            diffieHellman: async (publicKey) => buffer_1.Buffer.from(tweetnacl_1.default.scalarMult(cypher.secretKey, publicKey)),\n        };\n    }\n    getSigner() {\n        // todo fetch secretKey here\n        const secretKey = this.signer.secretKey;\n        const sign = (data) => Promise.resolve(buffer_1.Buffer.from(ed25519_1.ed25519.sign(data, secretKey)));\n        //console.log(secretKey.toString(\"hex\"), new bip32.PrivateKey(secretKey).toPublicKey().toBytes().toString(\"hex\"), Buffer.from(ed25519.getPublicKey(secretKey)).toString(\"hex\"));\n        return Promise.resolve({ sign });\n    }\n    getSecret() {\n        return buffer_1.Buffer.from((0, msgpack_1.encode)({\n            v: this.version,\n            p: this.proof,\n            x: this.signer.secretKey,\n            e: this.cypher.secretKey,\n        }));\n    }\n    static fromSecret(secret) {\n        const data = (0, msgpack_1.decode)(secret);\n        const km = new KeyManager();\n        km.version = data.v ?? 0;\n        km.level = LEVEL_DERIVED;\n        km.capability = \"private\";\n        km.proof = data.p;\n        km.signer = {\n            secretKey: data.x.slice(0, 32),\n            publicKey: buffer_1.Buffer.from(ed25519_1.ed25519.getPublicKey(data.x.slice(0, 32))),\n        };\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(data.e);\n        km.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        return km;\n    }\n    static instantiate(obj) {\n        const km = new KeyManager();\n        km.version = obj.version ?? 0;\n        km.level = obj.level;\n        km.proof = obj.proof.data ? buffer_1.Buffer.from(obj.proof.data) : buffer_1.Buffer.from(obj.proof);\n        km.signer = {\n            publicKey: obj.signer.publicKey.data ? buffer_1.Buffer.from(obj.signer.publicKey.data) : buffer_1.Buffer.from(obj.signer.publicKey),\n        };\n        km.cypher = {\n            publicKey: obj.cypher.publicKey.data ? buffer_1.Buffer.from(obj.cypher.publicKey.data) : buffer_1.Buffer.from(obj.cypher.publicKey),\n        };\n        return km;\n    }\n    static fromId(id) {\n        const data = (0, msgpack_1.decode)(id);\n        const km = new KeyManager();\n        km.version = data.v ?? 0;\n        km.level = LEVEL_DERIVED;\n        km.capability = \"public\";\n        km.proof = data.p;\n        km.signer = {\n            publicKey: data.x,\n        };\n        km.cypher = {\n            publicKey: data.e,\n        };\n        // console.log(km)\n        return km;\n    }\n    async sign(data) {\n        if (this.capability == \"public\")\n            return null;\n        const signer = await this.getSigner();\n        return signer.sign(data);\n    }\n    verify(data, signature, userVerificationIgnored) {\n        return ed25519_1.ed25519.verify(signature, data, this.signer.publicKey);\n    }\n    // async createRevocationCertificate(newId) {\n    //   if (this.level == LEVEL_ROOT) {\n    //     const seed = sha512(this.entropy);\n    //     let node = derivePath(\n    //       await Bip32PrivateKey.fromEntropy(seed.slice(0, 32)),\n    //       \"m/1'/0'/1'\",\n    //     );\n    //     const proof = hash(\"sha256\", node.toBip32PublicKey().toBytes());\n    //     if (this.proof.toString(\"hex\") == proof.toString(\"hex\")) {\n    //       const revocationCertificate = {\n    //         xpub: node.toBytes(),\n    //         id: this.id,\n    //         newId,\n    //       };\n    //       revocationCertificate.signature = node.toPrivateKey().sign(revocationCertificate);\n    //       return revocationCertificate;\n    //     } else return null;\n    //   } else return null;\n    // }\n    // async createSwapingCertificate() {\n    //   if (this.level === LEVEL_ROOT && this.entropy) {\n    //     const newKey = await KeyManager.create_Id25519_fromEntropy(this.entropy, this.swapIndex + 1);\n    //     const hiscp: HISCP = {\n    //       newId: newKey.id,\n    //       proofKey: this.proofKey.publicKey,\n    //       timestamp: Date.now(),\n    //       signature: Buffer.from([]),\n    //     };\n    //     const timestampBuffer = Buffer.alloc(8);\n    //     timestampBuffer.writeBigUInt64LE(BigInt(hiscp.timestamp) as unknown as number, 0);\n    //     const hiscpBuffer = Buffer.concat([hiscp.newId, hiscp.proofKey, timestampBuffer]);\n    //     hiscp.signature = new bip32.Bip32PrivateKey(this.proofKey.secretKey!).toPrivateKey().sign(hiscpBuffer);\n    //     return hiscp;\n    //   }\n    //   return null;\n    // }\n    // async verifySwapingCertificate(hiscp: HISCP) {\n    //   const proof = hash(\"sha256\", hiscp.proofKey).toString(\"hex\");\n    //   if (proof === this.proof.toString(\"hex\")) {\n    //     const timestampBuffer = Buffer.alloc(8);\n    //     timestampBuffer.writeBigUInt64LE(BigInt(hiscp.timestamp) as unknown as number, 0);\n    //     const newKey = KeyManager.fromId(hiscp.newId);\n    //     const hiscpBuffer = Buffer.concat([hiscp.newId, hiscp.proofKey, timestampBuffer]);\n    //     const proofVerifier = bip32.Bip32PublicKey.fromBytes(hiscp.proofKey);\n    //     return proofVerifier.toPublicKey().verify(hiscpBuffer, hiscp.signature);\n    //   } else {\n    //     return false;\n    //   }\n    // }\n    cleanSecureData() {\n        if (this.cypher?.secretKey) {\n            (0, crypto_1.secureErase)(this.cypher.secretKey);\n            delete this.cypher.secretKey;\n        }\n        if (this.signer?.secretKey) {\n            (0, crypto_1.secureErase)(this.signer.secretKey);\n            delete this.signer.secretKey;\n        }\n        if (this.entropy) {\n            (0, crypto_1.secureErase)(this.entropy);\n            delete this.entropy;\n        }\n    }\n    /**\n     * Performs a Diffie-Hellman key exchange with another KeyManager instance\n     * @param otherKeyManager The other party's KeyManager instance\n     * @returns A shared secret that can be used for symmetric encryption\n     */\n    async performDiffieHellman(otherKeyManager) {\n        if (this.capability === \"public\") {\n            console.error(\"Cannot perform DH key exchange with a public key capability\");\n            return null;\n        }\n        const cypher = await this.getCypher();\n        const otherKey = otherKeyManager.cypher.publicKey;\n        // Perform the X25519 scalar multiplication to derive the shared secret\n        const sharedSecret = await cypher.diffieHellman(otherKey);\n        // Hash the shared secret for better security (to derive a symmetric key)\n        const derivedKey = sha256(sharedSecret);\n        // Securely erase the shared secret from memory\n        (0, crypto_1.secureErase)(sharedSecret);\n        return derivedKey;\n    }\n    /**\n     * Static method to perform a Diffie-Hellman key exchange between two KeyManager instances\n     * @param keyManager1 First KeyManager instance\n     * @param keyManager2 Second KeyManager instance\n     * @returns A shared secret that both parties can derive\n     */\n    static async diffieHellman(keyManager1, keyManager2) {\n        return keyManager1.performDiffieHellman(keyManager2);\n    }\n    /**\n     * Encrypt a message using DHIES for a recipient\n     * @param message Message to encrypt\n     * @param recipientId Recipient's KeyManager ID\n     * @returns Encrypted message or null if encryption fails\n     */\n    async dhiesEncrypt(message, recipientId) {\n        const recipientKM = KeyManager.fromId(recipientId);\n        //console.log(recipientKM.cypher.publicKey, this.cypher.publicKey);\n        const dhies = new DHIES(this);\n        return dhies.encrypt(message, recipientKM.cypher.publicKey);\n    }\n    /**\n     * Decrypt a message encrypted with DHIES\n     * @param encryptedMessage Encrypted message from dhiesEncrypt\n     * @returns Decrypted message or null if decryption fails\n     */\n    async dhiesDecrypt(encryptedMessage, senderId) {\n        const senderKM = KeyManager.fromId(senderId);\n        //console.log(senderKM.cypher.publicKey, this.cypher.publicKey);\n        const dhies = new DHIES(this);\n        return dhies.decrypt(encryptedMessage, senderKM.cypher.publicKey);\n    }\n    static async encrypt(plaintext, recipientIds) {\n        const publicKeys = recipientIds.map(KeyManager.fromId).map((km) => km.cypher.publicKey);\n        return await (0, saltpack_1.encryptAndArmor)(plaintext, null, publicKeys);\n    }\n    async signcrypt(plaintext, recipientIds) {\n        const publicKeys = recipientIds.map(KeyManager.fromId).map((km) => km.cypher.publicKey);\n        const cypher = await this.getCypher();\n        return await cypher.signcrypt(plaintext, publicKeys);\n    }\n    async decrypt(encryptedMessage, senderId = null) {\n        const cypher = await this.getCypher();\n        const senderKey = senderId ? KeyManager.fromId(senderId).cypher.publicKey : null;\n        const message = await cypher.decrypt(encryptedMessage, senderKey);\n        return message.toString();\n    }\n    // use better hash to prevent attack\n    getSecretHash(data) {\n        const toHash = buffer_1.Buffer.concat([data, buffer_1.Buffer.from(\"secrethash\"), this.cypher.secretKey]);\n        return (0, crypto_1.hash)(\"sha256\", toHash);\n    }\n}\nexports.default = KeyManager;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"./crypto\");\nconst cbor_1 = __importDefault(require(\"cbor\"));\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst webauthn_1 = require(\"./platform/webauthn\");\nconst KeyManager_1 = __importDefault(require(\"./KeyManager\"));\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst SoftCredentials_1 = __importDefault(require(\"./platform/SoftCredentials\"));\nconst buffer_1 = require(\"buffer/\");\nconst pqCrypto_1 = require(\"./pqCrypto\");\nconst sha512 = (data) => (0, crypto_1.hash)(\"sha512\", data);\nconst sha256 = (data) => (0, crypto_1.hash)(\"sha256\", data);\nconst lookup = {\n    usb: 1,\n    nfc: 2,\n    ble: 4,\n    internal: 8,\n    hybrid: 16,\n    \"smart-card\": 32,\n};\nconst encodeBinary = (data) => {\n    if (data.length <= 65535) {\n        // bin16: binary data whose length is upto (2^16)-1 bytes\n        return buffer_1.Buffer.from([0xc5, data.length >> 8, data.length & 0xff, ...data]);\n    }\n    else {\n        // bin32: binary data whose length is upto (2^32)-1 bytes\n        return buffer_1.Buffer.from([0xc6, (data.length >> 24) & 0xff, (data.length >> 16) & 0xff, (data.length >> 8) & 0xff, data.length & 0xff, ...data]);\n    }\n};\nconst serializeID_v0 = (km) => {\n    const version = buffer_1.Buffer.from([0x83, 0xa1, 0x76, km.version]);\n    const cypher = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa1, 0x65]), encodeBinary(km.cypher.publicKey)]);\n    const ckey = buffer_1.Buffer.concat([buffer_1.Buffer.from([0xa1, 0x63]), encodeBinary(km.ckey)]);\n    return buffer_1.Buffer.concat([version, ckey, cypher]);\n};\nconst getTransports = (num) => Object.keys(lookup).filter((i) => num && lookup[i]);\nconst fromTransports = (transports) => transports.reduceRight((memo, i) => memo + (lookup[i] ? lookup[i] : 0), 0);\nconst getAuthTypeFromCkey = (ckey) => {\n    const type = cbor_1.default.decode(ckey).get(1);\n    if (type === 1) {\n        return \"Ed25519VerificationKey2020\";\n    }\n    else if (type === 2) {\n        return \"P256VerificationKey2020\";\n    }\n    else\n        return \"Unknown\";\n};\nconst getSignerFromCkey = (ckey) => {\n    const k = cbor_1.default.decode(ckey);\n    let publicKey = buffer_1.Buffer.from([]);\n    if (k.get(3) == -7)\n        publicKey = buffer_1.Buffer.concat([buffer_1.Buffer.from(\"04\", \"hex\"), k.get(-2), k.get(-3)]);\n    else if (k.get(3) == -8)\n        publicKey = k.get(-2);\n    else if (k.get(3) == pqCrypto_1.PQ_COSE_ALG.DILITHIUM2)\n        publicKey = k.get(-101);\n    return { publicKey };\n};\nclass Fido2Manager extends KeyManager_1.default {\n    constructor() {\n        super();\n        this._transports = 0;\n        this.level = 1; // ROOT, no Proof Management\n        this.encType = \"X25519KeyAgreementKey2019\";\n        this.webAuthn = (0, webauthn_1.getWebAuthnProvider)();\n    }\n    get transports() {\n        return getTransports(this._transports);\n    }\n    static async createFromAttestation(attestation) {\n        const f2m = new Fido2Manager();\n        f2m.ckey = SoftCredentials_1.default.getCOSEPublicKey(attestation);\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.fid = buffer_1.Buffer.from(attestation.id, \"base64\");\n        // fix for firefox, getTransports not available ! https://developer.mozilla.org/en-US/docs/Web/API/AuthenticatorAttestationResponse/getTransports\n        const response = attestation.response;\n        const transports = response.getTransports ? response.getTransports() : [\"usb\"];\n        f2m._transports = fromTransports(transports);\n        // signing\n        f2m.signer = getSignerFromCkey(f2m.ckey);\n        //encrypting\n        const entropy = (0, crypto_1.randomBytes)(32);\n        const seed = sha512(entropy);\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(seed.slice(0, 32));\n        f2m.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        f2m.entropy = entropy;\n        return f2m;\n    }\n    get id() {\n        if (this.version == 0)\n            return serializeID_v0(this);\n        else\n            return buffer_1.Buffer.from((0, msgpack_1.encode)({\n                v: this.version,\n                c: this.ckey,\n                e: this.cypher.publicKey,\n            }));\n    }\n    get id_v0() {\n        return serializeID_v0(this);\n    }\n    getSecret() {\n        return buffer_1.Buffer.from((0, msgpack_1.encode)({\n            v: this.version,\n            f: this.fid,\n            t: this._transports,\n            c: this.ckey,\n            e: this.cypher.secretKey,\n        }));\n    }\n    static fromSecret(secret) {\n        const data = (0, msgpack_1.decode)(secret);\n        const f2m = new Fido2Manager();\n        f2m.version = data.v ?? 0;\n        f2m.capability = \"private\";\n        f2m.fid = typeof data.f === \"string\" ? buffer_1.Buffer.from(data.f, \"base64\") : data.f;\n        f2m._transports = data.t ? data.t : 15;\n        f2m.ckey = data.c;\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.signer = getSignerFromCkey(data.c);\n        const cypher = tweetnacl_1.default.box.keyPair.fromSecretKey(data.e);\n        f2m.cypher = {\n            publicKey: buffer_1.Buffer.from(cypher.publicKey),\n            secretKey: buffer_1.Buffer.from(cypher.secretKey),\n        };\n        return f2m;\n    }\n    static instantiate(obj) {\n        const f2m = new Fido2Manager();\n        f2m.version = obj.version ?? 0;\n        f2m.level = obj.level;\n        f2m.fid = typeof obj.fid === \"string\" ? buffer_1.Buffer.from(obj.fid, \"base64\") : obj.fid;\n        f2m._transports = obj.t ? obj.t : 15;\n        f2m.ckey = obj.ckey.data ? buffer_1.Buffer.from(obj.ckey.data) : buffer_1.Buffer.from(obj.ckey);\n        f2m.signer = getSignerFromCkey(f2m.ckey);\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.cypher = {\n            publicKey: obj.cypher.publicKey.data ? buffer_1.Buffer.from(obj.cypher.publicKey.data) : buffer_1.Buffer.from(obj.cypher.publicKey),\n        };\n        return f2m;\n    }\n    static fromId(id) {\n        const data = (0, msgpack_1.decode)(id);\n        const f2m = new Fido2Manager();\n        f2m.version = data.v ?? 0;\n        f2m.capability = \"public\";\n        f2m.fid = typeof data.f === \"string\" ? buffer_1.Buffer.from(data.f, \"base64\") : data.f;\n        f2m.ckey = data.c;\n        f2m.signer = getSignerFromCkey(data.c);\n        f2m.authType = getAuthTypeFromCkey(f2m.ckey);\n        f2m.cypher = {\n            publicKey: data.e,\n        };\n        return f2m;\n    }\n    async getSigner() {\n        return {\n            sign: async (data) => {\n                if (!navigator.credentials)\n                    return null;\n                // ugly request userinteraction (needed for Safari and iOS)\n                try {\n                    await window?.CredentialUserInteractionRequest();\n                }\n                catch (error) { }\n                const challenge = (0, crypto_1.hash)(\"sha256\", data);\n                const publicKey = {\n                    challenge,\n                    userVerification: \"preferred\",\n                    allowCredentials: [\n                        {\n                            type: \"public-key\",\n                            id: this.fid,\n                            transports: getTransports(this._transports),\n                        },\n                    ],\n                };\n                const { response } = (await this.webAuthn.get(publicKey));\n                const publicKeyResponse = response;\n                const output = {\n                    s: buffer_1.Buffer.from(publicKeyResponse.signature),\n                    c: buffer_1.Buffer.from(publicKeyResponse.clientDataJSON),\n                    a: buffer_1.Buffer.from(publicKeyResponse.authenticatorData),\n                };\n                return buffer_1.Buffer.from((0, msgpack_1.encode)(output));\n            },\n        };\n    }\n    verify(data, signature, userVerification = false) {\n        const signatureBuffer = buffer_1.Buffer.from(signature);\n        const decoded = (0, msgpack_1.decode)(signatureBuffer);\n        const response = {\n            signature: decoded.s,\n            clientDataJSON: decoded.c,\n            authenticatorData: decoded.a,\n            userHandle: buffer_1.Buffer.from([]).buffer,\n        };\n        const challenge = (0, crypto_1.hash)(\"sha256\", data).toString(\"base64\");\n        const extractedChallenge = SoftCredentials_1.default.extractChallenge(response.clientDataJSON);\n        if (challenge !== extractedChallenge) {\n            return false;\n        }\n        return SoftCredentials_1.default.simpleVerify(this.ckey, response, userVerification);\n    }\n    verifyCredentials(credentials, userVerification = false) {\n        if (credentials.id !== this.fid.toString(\"base64\")) {\n            return false;\n        }\n        const response = credentials.response;\n        const rpIdHash = buffer_1.Buffer.from(response.authenticatorData.slice(0, 32)).toString(\"hex\");\n        const myIdHash = sha256(buffer_1.Buffer.from(credentials.id, \"base64\")).toString(\"hex\");\n        if (rpIdHash !== myIdHash) {\n            return false;\n        }\n        return SoftCredentials_1.default.simpleVerify(this.ckey, response, userVerification);\n    }\n    async createRevocationCertificate() {\n        // TODO use an external id\n        return null;\n    }\n}\nexports.default = Fido2Manager;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shake256 = exports.shake128 = exports.keccak_512 = exports.keccak_384 = exports.keccak_256 = exports.keccak_224 = exports.sha3_512 = exports.sha3_384 = exports.sha3_256 = exports.sha3_224 = exports.Keccak = void 0;\nexports.keccakP = keccakP;\n/**\n * SHA3 (keccak) hash function, based on a new \"Sponge function\" design.\n * Different from older hashes, the internal state is bigger than output size.\n *\n * Check out [FIPS-202](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf),\n * [Website](https://keccak.team/keccak.html),\n * [the differences between SHA-3 and Keccak](https://crypto.stackexchange.com/questions/15727/what-are-the-key-differences-between-the-draft-sha-3-standard-and-the-keccak-sub).\n *\n * Check out `sha3-addons` module for cSHAKE, k12, and others.\n * @module\n */\nconst _u64_ts_1 = require(\"./_u64.js\");\n// prettier-ignore\nconst utils_ts_1 = require(\"./utils.js\");\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst IOTAS = (0, _u64_ts_1.split)(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? (0, _u64_ts_1.rotlBH)(h, l, s) : (0, _u64_ts_1.rotlSH)(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? (0, _u64_ts_1.rotlBL)(h, l, s) : (0, _u64_ts_1.rotlSL)(h, l, s));\n/** `keccakf1600` internal function, additionally allows to adjust round count. */\nfunction keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    (0, utils_ts_1.clean)(B);\n}\n/** Keccak sponge function. */\nclass Keccak extends utils_ts_1.Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        this.enableXOF = false;\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        // Can be passed from user as dkLen\n        (0, utils_ts_1.anumber)(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        // 0 < blockLen < 200\n        if (!(0 < blockLen && blockLen < 200))\n            throw new Error('only keccak-f1600 function is supported');\n        this.state = new Uint8Array(200);\n        this.state32 = (0, utils_ts_1.u32)(this.state);\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    keccak() {\n        (0, utils_ts_1.swap32IfBE)(this.state32);\n        keccakP(this.state32, this.rounds);\n        (0, utils_ts_1.swap32IfBE)(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        (0, utils_ts_1.aexists)(this);\n        data = (0, utils_ts_1.toBytes)(data);\n        (0, utils_ts_1.abytes)(data);\n        const { blockLen, state } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        (0, utils_ts_1.aexists)(this, false);\n        (0, utils_ts_1.abytes)(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        (0, utils_ts_1.anumber)(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        (0, utils_ts_1.aoutput)(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        (0, utils_ts_1.clean)(this.state);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nexports.Keccak = Keccak;\nconst gen = (suffix, blockLen, outputLen) => (0, utils_ts_1.createHasher)(() => new Keccak(blockLen, suffix, outputLen));\n/** SHA3-224 hash function. */\nexports.sha3_224 = (() => gen(0x06, 144, 224 / 8))();\n/** SHA3-256 hash function. Different from keccak-256. */\nexports.sha3_256 = (() => gen(0x06, 136, 256 / 8))();\n/** SHA3-384 hash function. */\nexports.sha3_384 = (() => gen(0x06, 104, 384 / 8))();\n/** SHA3-512 hash function. */\nexports.sha3_512 = (() => gen(0x06, 72, 512 / 8))();\n/** keccak-224 hash function. */\nexports.keccak_224 = (() => gen(0x01, 144, 224 / 8))();\n/** keccak-256 hash function. Different from SHA3-256. */\nexports.keccak_256 = (() => gen(0x01, 136, 256 / 8))();\n/** keccak-384 hash function. */\nexports.keccak_384 = (() => gen(0x01, 104, 384 / 8))();\n/** keccak-512 hash function. */\nexports.keccak_512 = (() => gen(0x01, 72, 512 / 8))();\nconst genShake = (suffix, blockLen, outputLen) => (0, utils_ts_1.createXOFer)((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\n/** SHAKE128 XOF with 128-bit security. */\nexports.shake128 = (() => genShake(0x1f, 168, 128 / 8))();\n/** SHAKE256 XOF with 256-bit security. */\nexports.shake256 = (() => genShake(0x1f, 136, 256 / 8))();\n//# sourceMappingURL=sha3.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getHash = getHash;\nexports.createCurve = createCurve;\n/**\n * Utilities for short weierstrass curves, combined with noble-hashes.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst weierstrass_ts_1 = require(\"./abstract/weierstrass.js\");\n/** connects noble-curves to noble-hashes */\nfunction getHash(hash) {\n    return { hash };\n}\nfunction createCurve(curveDef, defHash) {\n    const create = (hash) => (0, weierstrass_ts_1.weierstrass)({ ...curveDef, hash: hash });\n    return { ...create(defHash), create };\n}\n//# sourceMappingURL=_shortw_utils.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeToCurve = exports.hashToCurve = exports.secp521r1 = exports.p521 = void 0;\nconst nist_ts_1 = require(\"./nist.js\");\nexports.p521 = nist_ts_1.p521;\nexports.secp521r1 = nist_ts_1.p521;\nexports.hashToCurve = (() => nist_ts_1.p521_hasher.hashToCurve)();\nexports.encodeToCurve = (() => nist_ts_1.p521_hasher.encodeToCurve)();\n//# sourceMappingURL=p521.js.map","'use strict';\n\n/**\n * Record objects that pass by in a stream.  If the same object is used more\n * than once, it can be value-shared using shared values.\n *\n * @see {@link http://cbor.schmorp.de/value-sharing}\n */\nclass ObjectRecorder {\n  constructor() {\n    this.clear();\n  }\n\n  /**\n   * Clear all of the objects that have been seen.  Revert to recording mode.\n   */\n  clear() {\n    this.map = new WeakMap();\n    this.count = 0;\n    this.recording = true;\n  }\n\n  /**\n   * Stop recording.\n   */\n  stop() {\n    this.recording = false;\n  }\n\n  /**\n   * Determine if wrapping a tag 28 or 29 around an object that has been\n   * reused is appropriate.  This method stores state for which objects have\n   * been seen.\n   *\n   * @param {object} obj Any object about to be serialized.\n   * @returns {number} If recording: -1 for first use, index for second use.\n   *   If not recording, -1 for never-duplicated, -2 for first use, index for\n   *   subsequent uses.\n   * @throws {Error} Recording does not match playback.\n   */\n  check(obj) {\n    const val = this.map.get(obj);\n    if (val) {\n      if (val.length > 1) {\n        if (val[0] || this.recording) {\n          return val[1];\n        }\n\n        val[0] = true;\n        return ObjectRecorder.FIRST;\n      }\n      if (!this.recording) {\n        return ObjectRecorder.NEVER;\n      }\n      val.push(this.count++);\n      // Second use while recording\n      return val[1];\n    }\n    if (!this.recording) {\n      throw new Error('New object detected when not recording');\n    }\n    this.map.set(obj, [false]);\n    // First use while recording\n    return ObjectRecorder.NEVER;\n  }\n}\n\nObjectRecorder.NEVER = -1;\nObjectRecorder.FIRST = -2;\n\nmodule.exports = ObjectRecorder;\n","'use strict';\n\nconst {Buffer} = require('buffer');\nconst encoder = require('./encoder');\nconst decoder = require('./decoder');\nconst {MT} = require('./constants');\n\n/**\n * Wrapper around a JavaScript Map object that allows the keys to be\n * any complex type.  The base Map object allows this, but will only\n * compare the keys by identity, not by value.  CborMap translates keys\n * to CBOR first (and base64's them to ensure by-value comparison).\n *\n * This is not a subclass of Object, because it would be tough to get\n * the semantics to be an exact match.\n *\n * @extends Map\n */\nclass CborMap extends Map {\n  /**\n   * Creates an instance of CborMap.\n   *\n   * @param {Iterable<any>} [iterable] An Array or other iterable\n   *   object whose elements are key-value pairs (arrays with two elements, e.g.\n   *   <code>[[ 1, 'one' ],[ 2, 'two' ]]</code>). Each key-value pair is added\n   *   to the new CborMap; null values are treated as undefined.\n   */\n  constructor(iterable) {\n    super(iterable);\n  }\n\n  /**\n   * @ignore\n   * @param {unknown} key\n   * @returns {string}\n   */\n  static _encode(key) {\n    return encoder.encodeCanonical(key).toString('base64');\n  }\n\n  /**\n   * @ignore\n   * @param {string} key\n   * @returns {unknown}\n   */\n  static _decode(key) {\n    return decoder.decodeFirstSync(key, 'base64');\n  }\n\n  /**\n   * Retrieve a specified element.\n   *\n   * @param {any} key The key identifying the element to retrieve.\n   *   Can be any type, which will be serialized into CBOR and compared by\n   *   value.\n   * @returns {any} The element if it exists, or <code>undefined</code>.\n   */\n  get(key) {\n    return super.get(CborMap._encode(key));\n  }\n\n  /**\n   * Adds or updates an element with a specified key and value.\n   *\n   * @param {any} key The key identifying the element to store.\n   *   Can be any type, which will be serialized into CBOR and compared by\n   *   value.\n   * @param {any} val The element to store.\n   * @returns {this} This object.\n   */\n  set(key, val) {\n    return super.set(CborMap._encode(key), val);\n  }\n\n  /**\n   * Removes the specified element.\n   *\n   * @param {any} key The key identifying the element to delete. Can be any\n   *   type, which will be serialized into CBOR and compared by value.\n   * @returns {boolean} True if an element in the Map object existed and has\n   *   been removed, or false if the element does not exist.\n   */\n  delete(key) {\n    return super.delete(CborMap._encode(key));\n  }\n\n  /**\n   * Does an element with the specified key exist?\n   *\n   * @param {any} key The key identifying the element to check.\n   *   Can be any type, which will be serialized into CBOR and compared by\n   *   value.\n   * @returns {boolean} True if an element with the specified key exists in\n   *   the Map object; otherwise false.\n   */\n  has(key) {\n    return super.has(CborMap._encode(key));\n  }\n\n  /**\n   * Returns a new Iterator object that contains the keys for each element\n   * in the Map object in insertion order.  The keys are decoded into their\n   * original format.\n   *\n   * @returns {MapIterator<any>}\n   */\n  *keys() {\n    for (const k of super.keys()) {\n      yield CborMap._decode(k);\n    }\n  }\n\n  /**\n   * Returns a new Iterator object that contains the [key, value] pairs for\n   * each element in the Map object in insertion order.\n   *\n   * @returns {IterableIterator<any>} Key value pairs.\n   * @yields {any[]} Key value pairs.\n   */\n  *entries() {\n    for (const kv of super.entries()) {\n      yield [CborMap._decode(kv[0]), kv[1]];\n    }\n  }\n\n  /**\n   * Returns a new Iterator object that contains the [key, value] pairs for\n   * each element in the Map object in insertion order.\n   *\n   * @returns {IterableIterator<any>} Key value pairs.\n   */\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n\n  /**\n   * Executes a provided function once per each key/value pair in the Map\n   * object, in insertion order.\n   *\n   * @param {function(any, any, Map<any,any>): undefined} fun Function to\n   *   execute for each element, which takes a value, a key, and the Map\n   *   being traversed.\n   * @param {any} thisArg Value to use as this when executing callback.\n   * @throws {TypeError} Invalid function.\n   */\n  forEach(fun, thisArg = this) {\n    if (typeof fun !== 'function') {\n      throw new TypeError('Must be function');\n    }\n    for (const kv of super.entries()) {\n      fun.call(thisArg, kv[1], CborMap._decode(kv[0]), this);\n    }\n  }\n\n  /**\n   * Push the simple value onto the CBOR stream.\n   *\n   * @param {import('./encoder.js')} gen The generator to push onto.\n   * @returns {boolean} True on success.\n   */\n  encodeCBOR(gen) {\n    if (!gen._pushInt(this.size, MT.MAP)) {\n      return false;\n    }\n    if (gen.canonical) {\n      const entries = Array.from(super.entries())\n        .map(kv => [Buffer.from(kv[0], 'base64'), kv[1]]);\n      entries.sort((a, b) => a[0].compare(b[0]));\n      for (const kv of entries) {\n        if (!(gen.push(kv[0]) && gen.pushAny(kv[1]))) {\n          return false;\n        }\n      }\n    } else {\n      for (const kv of super.entries()) {\n        if (!(gen.push(Buffer.from(kv[0], 'base64')) && gen.pushAny(kv[1]))) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n}\n\nmodule.exports = CborMap;\n","'use strict';\n\nconst BinaryParseStream = require('../vendor/binary-parse-stream');\nconst Tagged = require('./tagged');\nconst Simple = require('./simple');\nconst utils = require('./utils');\nconst NoFilter = require('nofilter');\nconst constants = require('./constants');\nconst {MT, NUMBYTES, SYMS, BI} = constants;\nconst {Buffer} = require('buffer');\n\nconst COUNT = Symbol('count');\nconst MAJOR = Symbol('major type');\nconst ERROR = Symbol('error');\nconst NOT_FOUND = Symbol('not found');\n\nfunction parentArray(parent, typ, count) {\n  const a = [];\n\n  a[COUNT] = count;\n  a[SYMS.PARENT] = parent;\n  a[MAJOR] = typ;\n  return a;\n}\n\nfunction parentBufferStream(parent, typ) {\n  const b = new NoFilter();\n\n  b[COUNT] = -1;\n  b[SYMS.PARENT] = parent;\n  b[MAJOR] = typ;\n  return b;\n}\n\nclass UnexpectedDataError extends Error {\n  constructor(byte, value) {\n    super(`Unexpected data: 0x${byte.toString(16)}`);\n    this.name = 'UnexpectedDataError';\n    this.byte = byte;\n    this.value = value;\n  }\n}\n\n/**\n * Things that can act as inputs, from which a NoFilter can be created.\n *\n * @typedef {string|Buffer|ArrayBuffer|ArrayBufferView\n *   |DataView|import('stream').Readable} BufferLike\n */\n/**\n * @typedef ExtendedResults\n * @property {any} value The value that was found.\n * @property {number} length The number of bytes of the original input that\n *   were read.\n * @property {Buffer} bytes The bytes of the original input that were used\n *   to produce the value.\n * @property {Buffer} [unused] The bytes that were left over from the original\n *   input.  This property only exists if {@linkcode Decoder.decodeFirst} or\n *   {@linkcode Decoder.decodeFirstSync} was called.\n */\n/**\n * @typedef DecoderOptions\n * @property {number} [max_depth=-1] The maximum depth to parse.\n *   Use -1 for \"until you run out of memory\".  Set this to a finite\n *   positive number for un-trusted inputs.  Most standard inputs won't nest\n *   more than 100 or so levels; I've tested into the millions before\n *   running out of memory.\n * @property {Tagged.TagMap} [tags] Mapping from tag number to function(v),\n *   where v is the decoded value that comes after the tag, and where the\n *   function returns the correctly-created value for that tag.\n * @property {boolean} [preferMap=false] If true, prefer to generate Map\n *   instances to plain objects, even if there are no entries in the map\n *   or if all of the keys are strings.\n * @property {boolean} [preferWeb=false] If true, prefer Uint8Arrays to\n *   be generated instead of node Buffers.  This might turn on some more\n *   changes in the future, so forward-compatibility is not guaranteed yet.\n * @property {BufferEncoding} [encoding='hex'] The encoding of the input.\n *   Ignored if input is a Buffer.\n * @property {boolean} [required=false] Should an error be thrown when no\n *   data is in the input?\n * @property {boolean} [extendedResults=false] If true, emit extended\n *   results, which will be an object with shape {@link ExtendedResults}.\n *   The value will already have been null-checked.\n * @property {boolean} [preventDuplicateKeys=false] If true, error is\n *   thrown if a map has duplicate keys.\n */\n/**\n * @callback decodeCallback\n * @param {Error} [error] If one was generated.\n * @param {any} [value] The decoded value.\n * @returns {void}\n */\n/**\n * @param {DecoderOptions|decodeCallback|string} opts Options,\n *   the callback, or input incoding.\n * @param {decodeCallback} [cb] Called on completion.\n * @returns {{options: DecoderOptions, cb: decodeCallback}} Normalized.\n * @throws {TypeError} On unknown option type.\n * @private\n */\nfunction normalizeOptions(opts, cb) {\n  switch (typeof opts) {\n    case 'function':\n      return {options: {}, cb: /** @type {decodeCallback} */ (opts)};\n    case 'string':\n      return {options: {encoding: /** @type {BufferEncoding} */ (opts)}, cb};\n    case 'object':\n      return {options: opts || {}, cb};\n    default:\n      throw new TypeError('Unknown option type');\n  }\n}\n\n/**\n * Decode a stream of CBOR bytes by transforming them into equivalent\n * JavaScript data.  Because of the limitations of Node object streams,\n * special symbols are emitted instead of NULL or UNDEFINED.  Fix those\n * up by calling {@link Decoder.nullcheck}.\n *\n * @extends BinaryParseStream\n */\nclass Decoder extends BinaryParseStream {\n  /**\n   * Create a parsing stream.\n   *\n   * @param {DecoderOptions} [options={}] Options.\n   */\n  constructor(options = {}) {\n    const {\n      tags = {},\n      max_depth = -1,\n      preferMap = false,\n      preferWeb = false,\n      required = false,\n      encoding = 'hex',\n      extendedResults = false,\n      preventDuplicateKeys = false,\n      ...superOpts\n    } = options;\n\n    super({defaultEncoding: encoding, ...superOpts});\n\n    this.running = true;\n    this.max_depth = max_depth;\n    this.tags = tags;\n    this.preferMap = preferMap;\n    this.preferWeb = preferWeb;\n    this.extendedResults = extendedResults;\n    this.required = required;\n    this.preventDuplicateKeys = preventDuplicateKeys;\n\n    if (extendedResults) {\n      this.bs.on('read', this._onRead.bind(this));\n      this.valueBytes = /** @type {NoFilter} */ (new NoFilter());\n    }\n  }\n\n  /**\n   * Check the given value for a symbol encoding a NULL or UNDEFINED value in\n   * the CBOR stream.\n   *\n   * @param {any} val The value to check.\n   * @returns {any} The corrected value.\n   * @throws {Error} Nothing was found.\n   * @static\n   * @example\n   * myDecoder.on('data', val => {\n   *   val = Decoder.nullcheck(val)\n   *   // ...\n   * })\n   */\n  static nullcheck(val) {\n    switch (val) {\n      case SYMS.NULL:\n        return null;\n      case SYMS.UNDEFINED:\n        return undefined;\n      // Leaving this in for now as belt-and-suspenders, but I'm pretty sure\n      // it can't happen.\n      /* istanbul ignore next */\n      case NOT_FOUND:\n        /* istanbul ignore next */\n        throw new Error('Value not found');\n      default:\n        return val;\n    }\n  }\n\n  /**\n   * Decode the first CBOR item in the input, synchronously.  This will throw\n   * an exception if the input is not valid CBOR, or if there are more bytes\n   * left over at the end (if options.extendedResults is not true).\n   *\n   * @param {BufferLike} input If a Readable stream, must have\n   *   received the `readable` event already, or you will get an error\n   *   claiming \"Insufficient data\".\n   * @param {DecoderOptions|string} [options={}] Options or encoding for input.\n   * @returns {ExtendedResults|any} The decoded value.\n   * @throws {UnexpectedDataError} Data is left over after decoding.\n   * @throws {Error} Insufficient data.\n   */\n  static decodeFirstSync(input, options = {}) {\n    if (input == null) {\n      throw new TypeError('input required');\n    }\n    ({options} = normalizeOptions(options));\n    const {encoding = 'hex', ...opts} = options;\n    const c = new Decoder(opts);\n    const s = utils.guessEncoding(input, encoding);\n\n    // For/of doesn't work when you need to call next() with a value\n    // generator created by parser will be \"done\" after each CBOR entity\n    // parser will yield numbers of bytes that it wants\n    const parser = c._parse();\n    let state = parser.next();\n\n    while (!state.done) {\n      const b = s.read(state.value);\n\n      if ((b == null) || (b.length !== state.value)) {\n        throw new Error('Insufficient data');\n      }\n      if (c.extendedResults) {\n        c.valueBytes.write(b);\n      }\n      state = parser.next(b);\n    }\n\n    let val = null;\n    if (c.extendedResults) {\n      val = state.value;\n      val.unused = s.read();\n    } else {\n      val = Decoder.nullcheck(state.value);\n      if (s.length > 0) {\n        const nextByte = s.read(1);\n\n        s.unshift(nextByte);\n        throw new UnexpectedDataError(nextByte[0], val);\n      }\n    }\n    return val;\n  }\n\n  /**\n   * Decode all of the CBOR items in the input into an array.  This will throw\n   * an exception if the input is not valid CBOR; a zero-length input will\n   * return an empty array.\n   *\n   * @param {BufferLike} input What to parse?\n   * @param {DecoderOptions|string} [options={}] Options or encoding\n   *   for input.\n   * @returns {Array<ExtendedResults>|Array<any>} Array of all found items.\n   * @throws {TypeError} No input provided.\n   * @throws {Error} Insufficient data provided.\n   */\n  static decodeAllSync(input, options = {}) {\n    if (input == null) {\n      throw new TypeError('input required');\n    }\n    ({options} = normalizeOptions(options));\n    const {encoding = 'hex', ...opts} = options;\n    const c = new Decoder(opts);\n    const s = utils.guessEncoding(input, encoding);\n    const res = [];\n\n    while (s.length > 0) {\n      const parser = c._parse();\n      let state = parser.next();\n\n      while (!state.done) {\n        const b = s.read(state.value);\n\n        if ((b == null) || (b.length !== state.value)) {\n          throw new Error('Insufficient data');\n        }\n        if (c.extendedResults) {\n          c.valueBytes.write(b);\n        }\n        state = parser.next(b);\n      }\n      res.push(Decoder.nullcheck(state.value));\n    }\n    return res;\n  }\n\n  /**\n   * Decode the first CBOR item in the input.  This will error if there are\n   * more bytes left over at the end (if options.extendedResults is not true),\n   * and optionally if there were no valid CBOR bytes in the input.  Emits the\n   * {Decoder.NOT_FOUND} Symbol in the callback if no data was found and the\n   * `required` option is false.\n   *\n   * @param {BufferLike} input What to parse?\n   * @param {DecoderOptions|decodeCallback|string} [options={}] Options, the\n   *   callback, or input encoding.\n   * @param {decodeCallback} [cb] Callback.\n   * @returns {Promise<ExtendedResults|any>} Returned even if callback is\n   *   specified.\n   * @throws {TypeError} No input provided.\n   */\n  static decodeFirst(input, options = {}, cb = null) {\n    if (input == null) {\n      throw new TypeError('input required');\n    }\n    ({options, cb} = normalizeOptions(options, cb));\n    const {encoding = 'hex', required = false, ...opts} = options;\n\n    const c = new Decoder(opts);\n    let v = /** @type {any} */ (NOT_FOUND);\n    const s = utils.guessEncoding(input, encoding);\n    const p = new Promise((resolve, reject) => {\n      c.on('data', val => {\n        v = Decoder.nullcheck(val);\n        c.close();\n      });\n      c.once('error', er => {\n        if (c.extendedResults && (er instanceof UnexpectedDataError)) {\n          v.unused = c.bs.slice();\n          return resolve(v);\n        }\n        if (v !== NOT_FOUND) {\n          // Typescript work-around\n          // eslint-disable-next-line dot-notation\n          er['value'] = v;\n        }\n        v = ERROR;\n        c.close();\n        return reject(er);\n      });\n      c.once('end', () => {\n        switch (v) {\n          case NOT_FOUND:\n            if (required) {\n              return reject(new Error('No CBOR found'));\n            }\n            return resolve(v);\n          // Pretty sure this can't happen, but not *certain*.\n          /* istanbul ignore next */\n          case ERROR:\n            /* istanbul ignore next */\n            return undefined;\n          default:\n            return resolve(v);\n        }\n      });\n    });\n\n    if (typeof cb === 'function') {\n      p.then(val => cb(null, val), cb);\n    }\n    s.pipe(c);\n    return p;\n  }\n\n  /**\n   * @callback decodeAllCallback\n   * @param {Error} error If one was generated.\n   * @param {Array<ExtendedResults>|Array<any>} value All of the decoded\n   *   values, wrapped in an Array.\n   */\n\n  /**\n   * Decode all of the CBOR items in the input.  This will error if there are\n   * more bytes left over at the end.\n   *\n   * @param {BufferLike} input What to parse?\n   * @param {DecoderOptions|decodeAllCallback|string} [options={}]\n   *   Decoding options, the callback, or the input encoding.\n   * @param {decodeAllCallback} [cb] Callback.\n   * @returns {Promise<Array<ExtendedResults>|Array<any>>} Even if callback\n   *   is specified.\n   * @throws {TypeError} No input specified.\n   */\n  static decodeAll(input, options = {}, cb = null) {\n    if (input == null) {\n      throw new TypeError('input required');\n    }\n    ({options, cb} = normalizeOptions(options, cb));\n    const {encoding = 'hex', ...opts} = options;\n\n    const c = new Decoder(opts);\n    const vals = [];\n\n    c.on('data', val => vals.push(Decoder.nullcheck(val)));\n\n    const p = new Promise((resolve, reject) => {\n      c.on('error', reject);\n      c.on('end', () => resolve(vals));\n    });\n\n    if (typeof cb === 'function') {\n      p.then(v => cb(undefined, v), er => cb(er, undefined));\n    }\n    utils.guessEncoding(input, encoding).pipe(c);\n    return p;\n  }\n\n  /**\n   * Stop processing.\n   */\n  close() {\n    this.running = false;\n    this.__fresh = true;\n  }\n\n  /**\n   * Only called if extendedResults is true.\n   *\n   * @ignore\n   */\n  _onRead(data) {\n    this.valueBytes.write(data);\n  }\n\n  /**\n   * @returns {Generator<number, any, Buffer>} Yields a number of bytes,\n   *   returns anything, next returns a Buffer.\n   * @throws {Error} Maximum depth exceeded.\n   * @yields {number} Number of bytes to read.\n   * @ignore\n   */\n  *_parse() {\n    let parent = null;\n    let depth = 0;\n    let val = null;\n\n    while (true) {\n      if ((this.max_depth >= 0) && (depth > this.max_depth)) {\n        throw new Error(`Maximum depth ${this.max_depth} exceeded`);\n      }\n\n      const [octet] = yield 1;\n      if (!this.running) {\n        this.bs.unshift(Buffer.from([octet]));\n        throw new UnexpectedDataError(octet);\n      }\n      const mt = octet >> 5;\n      const ai = octet & 0x1f;\n      const parent_major = (parent == null) ? undefined : parent[MAJOR];\n      const parent_length = (parent == null) ? undefined : parent.length;\n\n      switch (ai) {\n        case NUMBYTES.ONE:\n          this.emit('more-bytes', mt, 1, parent_major, parent_length);\n          [val] = yield 1;\n          break;\n        case NUMBYTES.TWO:\n        case NUMBYTES.FOUR:\n        case NUMBYTES.EIGHT: {\n          const numbytes = 1 << (ai - 24);\n\n          this.emit('more-bytes', mt, numbytes, parent_major, parent_length);\n          const buf = yield numbytes;\n          val = (mt === MT.SIMPLE_FLOAT) ?\n            buf :\n            utils.parseCBORint(ai, buf);\n          break;\n        }\n        case 28:\n        case 29:\n        case 30:\n          this.running = false;\n          throw new Error(`Additional info not implemented: ${ai}`);\n        case NUMBYTES.INDEFINITE:\n          switch (mt) {\n            case MT.POS_INT:\n            case MT.NEG_INT:\n            case MT.TAG:\n              throw new Error(`Invalid indefinite encoding for MT ${mt}`);\n          }\n          val = -1;\n          break;\n        default:\n          val = ai;\n      }\n      switch (mt) {\n        case MT.POS_INT:\n          // Val already decoded\n          break;\n        case MT.NEG_INT:\n          if (val === Number.MAX_SAFE_INTEGER) {\n            val = BI.NEG_MAX;\n          } else {\n            val = (typeof val === 'bigint') ? BI.MINUS_ONE - val : -1 - val;\n          }\n          break;\n        case MT.BYTE_STRING:\n        case MT.UTF8_STRING:\n          switch (val) {\n            case 0:\n              this.emit('start-string', mt, val, parent_major, parent_length);\n              if (mt === MT.UTF8_STRING) {\n                val = '';\n              } else {\n                val = this.preferWeb ?\n                  new Uint8Array(0) :\n                  Buffer.allocUnsafe(0);\n              }\n              break;\n            case -1:\n              this.emit('start', mt, SYMS.STREAM, parent_major, parent_length);\n              parent = parentBufferStream(parent, mt);\n              depth++;\n              continue;\n            default:\n              this.emit('start-string', mt, val, parent_major, parent_length);\n              val = yield val;\n              if (mt === MT.UTF8_STRING) {\n                val = utils.utf8(val);\n              } else if (this.preferWeb) {\n                val = new Uint8Array(val.buffer, val.byteOffset, val.length);\n              }\n          }\n          break;\n        case MT.ARRAY:\n        case MT.MAP:\n          switch (val) {\n            case 0:\n              if (mt === MT.MAP) {\n                val = (this.preferMap) ? new Map() : {};\n              } else {\n                val = [];\n              }\n              break;\n            case -1:\n              this.emit('start', mt, SYMS.STREAM, parent_major, parent_length);\n              parent = parentArray(parent, mt, -1);\n              depth++;\n              continue;\n            default:\n              this.emit('start', mt, val, parent_major, parent_length);\n              parent = parentArray(parent, mt, val * (mt - 3));\n              depth++;\n              continue;\n          }\n          break;\n        case MT.TAG:\n          this.emit('start', mt, val, parent_major, parent_length);\n          parent = parentArray(parent, mt, 1);\n          parent.push(val);\n          depth++;\n          continue;\n        case MT.SIMPLE_FLOAT:\n          if (typeof val === 'number') {\n            if ((ai === NUMBYTES.ONE) && (val < 32)) {\n              throw new Error(\n                `Invalid two-byte encoding of simple value ${val}`\n              );\n            }\n            const hasParent = (parent != null);\n            val = Simple.decode(\n              val,\n              hasParent,\n              hasParent && (parent[COUNT] < 0)\n            );\n          } else {\n            val = utils.parseCBORfloat(val);\n          }\n      }\n      this.emit('value', val, parent_major, parent_length, ai);\n      let again = false;\n      while (parent != null) {\n        if (val === SYMS.BREAK) {\n          parent[COUNT] = 1;\n        } else if (Array.isArray(parent)) {\n          parent.push(val);\n        } else {\n          // Assert: parent instanceof NoFilter\n          const pm = parent[MAJOR];\n\n          if ((pm != null) && (pm !== mt)) {\n            this.running = false;\n            throw new Error('Invalid major type in indefinite encoding');\n          }\n          parent.write(val);\n        }\n\n        if ((--parent[COUNT]) !== 0) {\n          again = true;\n          break;\n        }\n        --depth;\n        delete parent[COUNT];\n\n        if (Array.isArray(parent)) {\n          switch (parent[MAJOR]) {\n            case MT.ARRAY:\n              val = parent;\n              break;\n            case MT.MAP: {\n              let allstrings = !this.preferMap;\n\n              if ((parent.length % 2) !== 0) {\n                throw new Error(`Invalid map length: ${parent.length}`);\n              }\n              for (\n                let i = 0, len = parent.length;\n                allstrings && (i < len);\n                i += 2\n              ) {\n                if ((typeof parent[i] !== 'string') ||\n                    (parent[i] === '__proto__')) {\n                  allstrings = false;\n                  break;\n                }\n              }\n              if (allstrings) {\n                val = {};\n                for (let i = 0, len = parent.length; i < len; i += 2) {\n                  if (this.preventDuplicateKeys &&\n                    Object.prototype.hasOwnProperty.call(val, parent[i])) {\n                    throw new Error('Duplicate keys in a map');\n                  }\n                  val[parent[i]] = parent[i + 1];\n                }\n              } else {\n                val = new Map();\n                for (let i = 0, len = parent.length; i < len; i += 2) {\n                  if (this.preventDuplicateKeys && val.has(parent[i])) {\n                    throw new Error('Duplicate keys in a map');\n                  }\n                  val.set(parent[i], parent[i + 1]);\n                }\n              }\n              break;\n            }\n            case MT.TAG: {\n              const t = new Tagged(parent[0], parent[1]);\n\n              val = t.convert(this.tags);\n              break;\n            }\n          }\n        } else /* istanbul ignore else */ if (parent instanceof NoFilter) {\n          // Only parent types are Array and NoFilter for (Array/Map) and\n          // (bytes/string) respectively.\n          switch (parent[MAJOR]) {\n            case MT.BYTE_STRING:\n              val = parent.slice();\n              if (this.preferWeb) {\n                val = new Uint8Array(\n                  /** @type {Buffer} */ (val).buffer,\n                  /** @type {Buffer} */ (val).byteOffset,\n                  /** @type {Buffer} */ (val).length\n                );\n              }\n              break;\n            case MT.UTF8_STRING:\n              val = parent.toString('utf-8');\n              break;\n          }\n        }\n        this.emit('stop', parent[MAJOR]);\n\n        const old = parent;\n        parent = parent[SYMS.PARENT];\n        delete old[SYMS.PARENT];\n        delete old[MAJOR];\n      }\n      if (!again) {\n        if (this.extendedResults) {\n          const bytes = this.valueBytes.slice();\n          const ret = {\n            value: Decoder.nullcheck(val),\n            bytes,\n            length: bytes.length,\n          };\n\n          this.valueBytes = new NoFilter();\n          return ret;\n        }\n        return val;\n      }\n    }\n  }\n}\n\nDecoder.NOT_FOUND = NOT_FOUND;\nmodule.exports = Decoder;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// TODO: to revamp and optimize\n// import crypto from \"crypto\";\nconst buffer_1 = require(\"buffer/\");\nconst crypto_1 = require(\"../crypto\");\nconst cbor_1 = __importDefault(require(\"cbor\"));\nconst ed25519_1 = require(\"@noble/curves/ed25519\");\nconst p256_1 = require(\"@noble/curves/p256\");\nconst p384_1 = require(\"@noble/curves/p384\");\nconst p521_1 = require(\"@noble/curves/p521\");\n// import { BasicConstraintsExtension, X509Certificate } from \"@peculiar/x509\";\nconst pqCrypto_1 = require(\"../pqCrypto\");\nconst credentials = {};\n//const subtle = crypto.webcrypto ? crypto.webcrypto.subtle : crypto.subtle;\nconst COSEKEYS = {\n    kty: 1,\n    alg: 3,\n    crv: -1,\n    x: -2,\n    y: -3,\n    n: -1,\n    e: -2,\n};\nconst COSEKTY = {\n    OKP: 1,\n    EC2: 2,\n    RSA: 3,\n    DILITHIUM: pqCrypto_1.PQ_COSE_KEY_TYPE.DILITHIUM,\n};\nconst COSERSASCHEME = {\n    \"-3\": \"pss-sha256\",\n    \"-39\": \"pss-sha512\",\n    \"-38\": \"pss-sha384\",\n    \"-65535\": \"pkcs1-sha1\",\n    \"-257\": \"pkcs1-sha256\",\n    \"-258\": \"pkcs1-sha384\",\n    \"-259\": \"pkcs1-sha512\",\n};\nconst COSECRV = {\n    1: p256_1.p256,\n    2: p384_1.p384,\n    3: p521_1.p521,\n};\nconst COSEALGHASH = {\n    \"-257\": \"SHA-256\",\n    \"-258\": \"SHA-384\",\n    \"-259\": \"SHA-512\",\n    \"-65535\": \"SHA-1\",\n    \"-39\": \"SHA-512\",\n    \"-38\": \"SHA-384\",\n    \"-37\": \"SHA-256\",\n    \"-260\": \"SHA-256\",\n    \"-261\": \"SHA-512\",\n    \"-7\": \"SHA-256\",\n    \"-36\": \"SHA-512\",\n    [pqCrypto_1.PQ_COSE_ALG.DILITHIUM2.toString()]: \"SHA-256\", // DILITHIUM2 uses SHA-256 for hashing\n};\nconst hash = (alg, message) => (0, crypto_1.hash)(alg.replace(\"-\", \"\"), message);\nconst base64ToPem = (b64cert) => {\n    let pemcert = \"\";\n    for (let i = 0; i < b64cert.length; i += 64)\n        pemcert += b64cert.slice(i, i + 64) + \"\\n\";\n    return \"-----BEGIN CERTIFICATE-----\\n\" + pemcert + \"-----END CERTIFICATE-----\";\n};\n// const getCertificateInfo = (certificate: Buffer) => {\n//   const x509 = new X509Certificate(certificate);\n//   const subjectString = x509.subject;\n//   const issuer = x509.issuer;\n//   const issuerName = x509.issuerName.toString();\n//   const subjectParts = subjectString.split(\",\");\n//   const subject: Record<string, string> = {};\n//   for (const field of subjectParts) {\n//     const kv = field.split(\"=\");\n//     subject[kv[0].trim()] = kv[1];\n//   }\n//   // console.log(subject);\n//   const { Version } = x509.toTextObject().Data as unknown as { Version: string };\n//   const bc = x509.getExtension(BasicConstraintsExtension);\n//   const basicConstraintsCA = bc ? bc.ca : false;\n//   return {\n//     issuer,\n//     issuerName,\n//     subject,\n//     version: Version,\n//     basicConstraintsCA,\n//   };\n// };\nconst parseAuthData = (buffer) => {\n    const rpIdHash = buffer.slice(0, 32);\n    buffer = buffer.slice(32);\n    const flagsBuf = buffer.slice(0, 1);\n    buffer = buffer.slice(1);\n    const flagsInt = flagsBuf[0];\n    const flags = {\n        up: !!(flagsInt & 0x01),\n        uv: !!(flagsInt & 0x04),\n        at: !!(flagsInt & 0x40),\n        ed: !!(flagsInt & 0x80),\n        flagsInt,\n    };\n    const counterBuf = buffer.slice(0, 4);\n    buffer = buffer.slice(4);\n    const counter = counterBuf.readUInt32BE(0);\n    let aaguid = undefined;\n    let credID = undefined;\n    let COSEPublicKey = undefined;\n    if (flags.at) {\n        aaguid = buffer.slice(0, 16);\n        buffer = buffer.slice(16);\n        const credIDLenBuf = buffer.slice(0, 2);\n        buffer = buffer.slice(2);\n        const credIDLen = credIDLenBuf.readUInt16BE(0);\n        credID = buffer.slice(0, credIDLen);\n        buffer = buffer.slice(credIDLen);\n        COSEPublicKey = buffer;\n    }\n    //console.log(aaguid);\n    return {\n        rpIdHash,\n        flagsBuf,\n        flags,\n        counter,\n        counterBuf,\n        aaguid,\n        credID,\n        COSEPublicKey,\n    };\n};\nconst verifyPackedAttestation = (response, userVerification = false) => {\n    const attestationBuffer = buffer_1.Buffer.from(response.attestationObject);\n    const attestationStruct = cbor_1.default.decodeAllSync(attestationBuffer)[0];\n    if (attestationStruct.fmt == \"none\")\n        return false;\n    const authDataStruct = parseAuthData(attestationStruct.authData);\n    // check if user has actually touched the device\n    if (!authDataStruct.flags.up)\n        return false;\n    // check if did enter PIN code\n    if (userVerification && !authDataStruct.flags.uv)\n        return false;\n    const clientDataHashBuf = hash(\"sha256\", buffer_1.Buffer.from(response.clientDataJSON));\n    const dataBuffer = buffer_1.Buffer.concat([attestationStruct.authData, clientDataHashBuf]);\n    const signature = attestationStruct.attStmt.sig;\n    let signatureIsValid = false;\n    /* ----- Verify FULL attestation ----- */\n    // if (attestationStruct.attStmt.x5c) {\n    //   const leafCert = base64ToPem(attestationStruct.attStmt.x5c[0].toString(\"base64\"));\n    //   const certInfo = getCertificateInfo(attestationStruct.attStmt.x5c[0]);\n    //   const subject = certInfo.subject as {\n    //     OU: string;\n    //     O: string;\n    //     C: string;\n    //     CN: string;\n    //   };\n    //   // console.log(certInfo);\n    //   if (subject.OU !== \"Authenticator Attestation\") throw new Error('Batch certificate OU MUST be set strictly to \"Authenticator Attestation\"!');\n    //   if (!subject.CN) throw new Error(\"Batch certificate CN MUST no be empty!\");\n    //   if (!subject.O) throw new Error(\"Batch certificate O MUST no be empty!\");\n    //   if (!subject.C || subject.C.length !== 2) throw new Error(\"Batch certificate C MUST be set to two character ISO 3166 code!\");\n    //   if (certInfo.basicConstraintsCA) throw new Error(\"Batch certificate basic constraints CA MUST be false!\");\n    //   if (certInfo.version !== \"v3 (2)\") throw new Error(\"Batch certificate version MUST be 3(ASN1 2)!\");\n    //   signatureIsValid = crypto.createVerify(\"sha256\").update(dataBuffer).verify(leafCert, signature);\n    //   /* ----- Verify FULL attestation ENDS ----- */\n    // } else\n    if (attestationStruct.attStmt.ecdaaKeyId) {\n        throw new Error(\"ECDAA IS NOT SUPPORTED!\");\n    }\n    else {\n        /* ----- Verify SURROGATE attestation ----- */\n        const pubKeyCose = cbor_1.default.decodeAllSync(authDataStruct.COSEPublicKey)[0];\n        const hashAlg = COSEALGHASH[pubKeyCose.get(COSEKEYS.alg)];\n        const data = hash(hashAlg, dataBuffer);\n        if (pubKeyCose.get(COSEKEYS.kty) === COSEKTY.EC2) {\n            // ECDSA\n            const x = pubKeyCose.get(COSEKEYS.x);\n            const y = pubKeyCose.get(COSEKEYS.y);\n            const pubKey = buffer_1.Buffer.concat([buffer_1.Buffer.from([0x04]), x, y]);\n            const ec = COSECRV[pubKeyCose.get(COSEKEYS.crv)];\n            const sig = ec.Signature.fromDER(signature);\n            signatureIsValid = ec.verify(sig, data, pubKey);\n        }\n        else if (pubKeyCose.get(COSEKEYS.kty) === COSEKTY.OKP) {\n            // EdDSA\n            const x = pubKeyCose.get(COSEKEYS.x);\n            signatureIsValid = ed25519_1.ed25519.verify(signature, data, x);\n        }\n        else {\n            return false;\n        }\n        /* ----- Verify SURROGATE attestation ENDS ----- */\n    }\n    if (!signatureIsValid)\n        throw new Error(\"Failed to verify the signature!\");\n    return true;\n};\nclass MyPublicKeyCredential {\n    constructor(creds) {\n        this.type = \"public-key\";\n        this.clientExtensionResults = {};\n        const keys = [\"id\", \"rawId\", \"response\"];\n        this.id = creds.id;\n        this.rawId = buffer_1.Buffer.from(creds.rawId);\n        this.response = creds.response;\n    }\n    getClientExtensionResults() {\n        return {};\n    }\n}\nconst verifyECDSA = (data, publicKey, signature) => {\n    return p256_1.p256.verify(p256_1.p256.Signature.fromDER(signature).toCompactHex(), data, publicKey);\n};\nconst verifyEdDSA = (data, publicKey, signature) => {\n    return ed25519_1.ed25519.verify(signature, data, publicKey);\n};\n// Webauthn Partial Implementation for testing\nclass SoftCredentials {\n    constructor() {\n        this.signCount = 0;\n        this.rawId = (0, crypto_1.randomBytes)(32);\n        this.aaguid = buffer_1.Buffer.alloc(16);\n    }\n    // credentials request payload\n    static createRequest(alg, prf = false) {\n        const challenge = buffer_1.Buffer.from((0, crypto_1.randomBytes)(32).toString(\"base64\"));\n        const result = {\n            publicKey: {\n                challenge,\n                rp: {\n                    name: \"Vaultys ID\",\n                    id: \"Vaultys ID\",\n                },\n                user: {\n                    id: buffer_1.Buffer.from(\"Vaultys Wallet ID\", \"utf8\"),\n                    name: \"Vaultys Wallet ID\",\n                    displayName: \"Vaultys Wallet ID\",\n                },\n                pubKeyCredParams: [\n                    {\n                        type: \"public-key\",\n                        alg,\n                    },\n                ],\n            },\n        };\n        if (prf) {\n            result.publicKey.extensions = { prf: { eval: { first: (0, crypto_1.randomBytes)(32) } } };\n        }\n        return result;\n    }\n    // static getCertificateInfo(response: AuthenticatorAttestationResponse) {\n    //   const attestationBuffer = Buffer.from(response.attestationObject);\n    //   const attestationStruct = cbor.decodeAllSync(attestationBuffer)[0];\n    //   if (attestationStruct.attStmt.x5c) {\n    //     return getCertificateInfo(attestationStruct.attStmt.x5c[0]);\n    //   } else {\n    //     return null;\n    //   }\n    // }\n    static async create(options, origin = \"test\") {\n        const credential = new SoftCredentials();\n        const publicKey = options.publicKey;\n        credential.options = publicKey;\n        credential.rpId = publicKey.rp.id || publicKey.rp.name;\n        credential.userHandle = buffer_1.Buffer.from(publicKey.user.id.toString(), \"base64\");\n        credentials[credential.rawId.toString(\"base64\")] = credential; // erase previous instance\n        // Get the algorithm from pubKeyCredParams\n        const pubKeyCredParams = publicKey.pubKeyCredParams;\n        // Check if DILITHIUM is supported (look for PQ_COSE_ALG.DILITHIUM2 in the params)\n        const supportsDilithium = pubKeyCredParams.some((param) => param.alg === pqCrypto_1.PQ_COSE_ALG.DILITHIUM2);\n        // Set algorithm, prioritizing DILITHIUM if it's supported\n        if (supportsDilithium) {\n            credential.alg = pqCrypto_1.PQ_COSE_ALG.DILITHIUM2;\n        }\n        else {\n            credential.alg = publicKey.pubKeyCredParams[0].alg;\n        }\n        if (credential.alg === -8) {\n            const random = ed25519_1.ed25519.utils.randomPrivateKey();\n            credential.keyPair = {\n                privateKey: random,\n                publicKey: ed25519_1.ed25519.getPublicKey(random),\n                algorithm: \"EdDSA\",\n            };\n            credential.coseKey = new Map();\n            credential.coseKey.set(1, 1);\n            credential.coseKey.set(3, -8);\n            credential.coseKey.set(-1, 6);\n            const x = credential.keyPair.publicKey.slice(0, 32);\n            credential.coseKey.set(-2, x);\n        }\n        else if (credential.alg === -7) {\n            const random = p256_1.p256.utils.randomPrivateKey();\n            credential.keyPair = {\n                privateKey: random,\n                publicKey: p256_1.p256.getPublicKey(random, false),\n                algorithm: \"ES256\",\n            };\n            credential.coseKey = new Map();\n            credential.coseKey.set(1, 2);\n            credential.coseKey.set(3, -7);\n            credential.coseKey.set(-1, 6);\n            const x = credential.keyPair.publicKey.slice(1, 33);\n            const y = credential.keyPair.publicKey.slice(33);\n            credential.coseKey.set(-2, x);\n            credential.coseKey.set(-3, y);\n            // console.log(extpk,x,y)\n        }\n        else if (credential.alg === pqCrypto_1.PQ_COSE_ALG.DILITHIUM2) {\n            // Generate DILITHIUM key pair\n            const { publicKey: dilithiumPk, secretKey: dilithiumSk } = (0, pqCrypto_1.generateDilithiumKeyPair)();\n            //console.log(\"PQC\", dilithiumPk, dilithiumSk);\n            credential.keyPair = {\n                privateKey: dilithiumSk,\n                publicKey: dilithiumPk,\n                algorithm: \"DILITHIUM2\",\n                isDILITHIUM: true,\n            };\n            // Create COSE key representation\n            credential.coseKey = (0, pqCrypto_1.createDilithiumCoseKey)(dilithiumPk);\n            //console.log(\"PQC\", credential);\n        }\n        const clientData = {\n            type: \"webauthn.create\",\n            challenge: publicKey.challenge,\n            origin,\n        };\n        const rpIdHash = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.from(credential.rpId, \"ascii\"));\n        const flags = buffer_1.Buffer.from(\"41\", \"hex\"); // attested_data + user_present\n        const signCount = buffer_1.Buffer.allocUnsafe(4);\n        signCount.writeUInt32BE(credential.signCount, 0);\n        const rawIdLength = buffer_1.Buffer.allocUnsafe(2);\n        rawIdLength.writeUInt16BE(credential.rawId.length, 0);\n        const coseKey = cbor_1.default.encode(credential.coseKey);\n        const attestationObject = {\n            authData: buffer_1.Buffer.concat([rpIdHash, flags, signCount, credential.aaguid, rawIdLength, credential.rawId, coseKey]),\n            fmt: \"none\",\n            attStmt: {},\n        };\n        const pkCredentials = {\n            id: credential.rawId.toString(\"base64\"),\n            rawId: credential.rawId,\n            authenticatorAttachment: null,\n            type: \"public-key\",\n            getClientExtensionResults: () => {\n                if (publicKey.extensions?.prf?.eval?.first) {\n                    return { prf: { enabled: true } };\n                }\n                else {\n                    return {};\n                }\n            },\n            toJSON() { },\n            response: {\n                clientDataJSON: buffer_1.Buffer.from(JSON.stringify(clientData), \"utf-8\"),\n                attestationObject: cbor_1.default.encode(attestationObject),\n                getTransports: () => [\"usb\", \"hybrid\"],\n                getAuthenticatorData: () => attestationObject.authData,\n                getPublicKey: () => coseKey,\n                getPublicKeyAlgorithm: () => -7,\n            },\n        };\n        return pkCredentials;\n    }\n    static simpleVerify(COSEPublicKey, response, userVerification = false) {\n        const ckey = cbor_1.default.decode(COSEPublicKey, { extendedResults: true }).value;\n        const rpIdHash = response.authenticatorData.slice(0, 32);\n        const flagsInt = buffer_1.Buffer.from(response.authenticatorData)[32];\n        const counter = response.authenticatorData.slice(33, 37);\n        const goodflags = userVerification ? !!(flagsInt & 0x04) : !!(flagsInt & 0x01);\n        if (!goodflags)\n            return false;\n        const hash = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.from(response.clientDataJSON));\n        let data = buffer_1.Buffer.concat([buffer_1.Buffer.from(response.authenticatorData), hash]);\n        if (ckey.get(3) == -7) {\n            data = (0, crypto_1.hash)(\"sha256\", data);\n        }\n        if (ckey.get(1) == 1) {\n            // EdDSA\n            const x = ckey.get(-2);\n            return verifyEdDSA(data, x, buffer_1.Buffer.from(response.signature));\n        }\n        else if (ckey.get(1) == 2) {\n            // ECDSA\n            const x = ckey.get(-2);\n            const y = ckey.get(-3);\n            const pubKey = buffer_1.Buffer.concat([buffer_1.Buffer.from(\"04\", \"hex\"), x, y]);\n            return verifyECDSA(data, pubKey, buffer_1.Buffer.from(response.signature));\n        }\n        else if (ckey.get(1) === COSEKTY.DILITHIUM) {\n            // DILITHIUM\n            const publicKey = ckey.get(pqCrypto_1.PQ_COSE_KEY_PARAMS.DILITHIUM_PK);\n            // Verify DILITHIUM signature asynchronously\n            //console.log(data, publicKey, Buffer.from(response.signature));\n            return (0, pqCrypto_1.verifyDilithium)(data, buffer_1.Buffer.from(response.signature), publicKey);\n        }\n        return false;\n    }\n    static getCOSEPublicKey(attestation) {\n        const response = attestation.response;\n        const ato = cbor_1.default.decode(response.attestationObject);\n        //console.log(\"getCOSEPublicKey\", ato, parseAuthData(ato.authData));\n        return parseAuthData(ato.authData).COSEPublicKey;\n    }\n    static verifyPackedAttestation(attestation, userVerification = false) {\n        return verifyPackedAttestation(attestation, userVerification);\n    }\n    static async verify(attestation, assertion, userVerifiation = false) {\n        //if (assertion.id !== attestation.id) return false;\n        const hash = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.from(assertion.response.clientDataJSON));\n        const ass = assertion.response;\n        const att = attestation.response;\n        let data = buffer_1.Buffer.concat([buffer_1.Buffer.from(ass.authenticatorData), hash]);\n        const ato = cbor_1.default.decode(att.attestationObject);\n        const authData = parseAuthData(ato.authData);\n        // check if user has actually touched the device\n        if (!authData.flags.up)\n            return false;\n        // check if the user has entered his PIN code or used biometric sensor\n        if ((userVerifiation && !authData.flags.uv) || !authData.COSEPublicKey)\n            return false;\n        const ckey = cbor_1.default.decode(authData.COSEPublicKey);\n        // Hash data for ES256\n        if (ckey.get(3) == -7) {\n            data = (0, crypto_1.hash)(\"sha256\", data);\n        }\n        // Get key type\n        const keyType = ckey.get(1);\n        if (keyType === 1) {\n            // EdDSA\n            const x = ckey.get(-2);\n            return verifyEdDSA(data, x, buffer_1.Buffer.from(ass.signature));\n        }\n        else if (keyType === 2) {\n            // ECDSA\n            const x = ckey.get(-2);\n            const y = ckey.get(-3);\n            const pubKey = buffer_1.Buffer.concat([buffer_1.Buffer.from(\"04\", \"hex\"), x, y]);\n            return verifyECDSA(data, pubKey, buffer_1.Buffer.from(ass.signature));\n        }\n        else if (keyType === COSEKTY.DILITHIUM) {\n            // DILITHIUM\n            const publicKey = ckey.get(pqCrypto_1.PQ_COSE_KEY_PARAMS.DILITHIUM_PK);\n            // Verify DILITHIUM signature asynchronously\n            //console.log(data, publicKey, Buffer.from(ass.signature));\n            return (0, pqCrypto_1.verifyDilithium)(data, buffer_1.Buffer.from(ass.signature), publicKey);\n        }\n        return false;\n    }\n    static extractChallenge(clientDataJSON) {\n        const clientData = JSON.parse(clientDataJSON.toString());\n        const m = clientData.challenge.length % 4;\n        return clientData.challenge\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(clientData.challenge.length + (m === 0 ? 0 : 4 - m), \"=\");\n    }\n    static async get({ publicKey }, origin = \"test\") {\n        if (!publicKey.allowCredentials)\n            throw new Error();\n        const id = buffer_1.Buffer.from(publicKey.allowCredentials[0].id).toString(\"base64\");\n        const credential = credentials[id];\n        credential.signCount += 1;\n        // prepare signature\n        const clientData = {\n            type: \"webauthn.get\",\n            challenge: buffer_1.Buffer.from(publicKey.challenge).toString(\"base64\"),\n            origin,\n        };\n        const clientDataHash = (0, crypto_1.hash)(\"sha256\", (0, crypto_1.fromUTF8)(JSON.stringify(clientData)));\n        const rpIdHash = (0, crypto_1.hash)(\"sha256\", buffer_1.Buffer.from(credential.rpId, \"utf-8\"));\n        const flags = buffer_1.Buffer.from(\"05\", \"hex\"); // user verification\n        const signCount = buffer_1.Buffer.allocUnsafe(4);\n        signCount.writeUInt32BE(credential.signCount, 0);\n        const authenticatorData = buffer_1.Buffer.concat([rpIdHash, flags, signCount]);\n        const toSign = buffer_1.Buffer.concat([authenticatorData, clientDataHash]);\n        let signature = new Uint8Array();\n        if (credential.alg === -7) {\n            signature = p256_1.p256.sign(toSign, credential.keyPair.privateKey, { prehash: true }).toDERRawBytes();\n        }\n        else if (credential.alg === -8) {\n            signature = ed25519_1.ed25519.sign(toSign, credential.keyPair.privateKey);\n        }\n        else if (credential.alg === pqCrypto_1.PQ_COSE_ALG.DILITHIUM2) {\n            // DILITHIUM signing - this returns a Promise so we need to await it\n            signature = (0, pqCrypto_1.signDilithium)(toSign, credential.keyPair.privateKey);\n        }\n        const pkCredentials = {\n            id,\n            rawId: buffer_1.Buffer.from(id, \"base64\").buffer,\n            type: \"public-key\",\n            authenticatorAttachment: null,\n            getClientExtensionResults: () => {\n                if (publicKey.extensions?.prf?.eval?.first) {\n                    // unsafe and not following w3c recommendation. for testing purpose only\n                    return { prf: { results: { first: hash(\"sha256\", publicKey.extensions?.prf?.eval?.first) } } };\n                }\n                else {\n                    return {};\n                }\n            },\n            toJSON() { },\n            response: {\n                authenticatorData,\n                clientDataJSON: buffer_1.Buffer.from(JSON.stringify(clientData), \"utf-8\"),\n                signature: signature,\n                userHandle: credential.userHandle,\n            },\n        };\n        return pkCredentials;\n    }\n}\nexports.default = SoftCredentials;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeWebAuthn = exports.BrowserWebAuthn = void 0;\nexports.getWebAuthnProvider = getWebAuthnProvider;\nexports.createCredentialRequest = createCredentialRequest;\nconst SoftCredentials_1 = __importDefault(require(\"./SoftCredentials\"));\n// Browser implementation\nclass BrowserWebAuthn {\n    isAvailable() {\n        return typeof window !== \"undefined\" && typeof window.PublicKeyCredential !== \"undefined\";\n    }\n    async create(options) {\n        if (!this.isAvailable()) {\n            throw new Error(\"WebAuthn is not available in this environment\");\n        }\n        return (await navigator.credentials.create({ publicKey: options }));\n    }\n    async get(options) {\n        if (!this.isAvailable()) {\n            throw new Error(\"WebAuthn is not available in this environment\");\n        }\n        return (await navigator.credentials.get({ publicKey: options }));\n    }\n}\nexports.BrowserWebAuthn = BrowserWebAuthn;\n// Node.js implementation using SoftCredentials\nclass NodeWebAuthn {\n    constructor(origin = \"test\") {\n        this.origin = origin;\n    }\n    isAvailable() {\n        return true; // Always available in mock mode\n    }\n    async create(options) {\n        return await SoftCredentials_1.default.create({\n            publicKey: options,\n        }, this.origin);\n    }\n    async get(options) {\n        return await SoftCredentials_1.default.get({\n            publicKey: options,\n        }, this.origin);\n    }\n}\nexports.NodeWebAuthn = NodeWebAuthn;\n// Factory function\nfunction getWebAuthnProvider(options) {\n    if (typeof window !== \"undefined\") {\n        return new BrowserWebAuthn();\n    }\n    return new NodeWebAuthn(options?.origin);\n}\n// Helper to create credential request\nfunction createCredentialRequest(alg, prf = false) {\n    return SoftCredentials_1.default.createRequest(alg, prf);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hash_to_ristretto255 = exports.hashToRistretto255 = exports.RistrettoPoint = exports.encodeToCurve = exports.hashToCurve = exports.ed25519_hasher = exports.edwardsToMontgomery = exports.x25519 = exports.ed25519ph = exports.ed25519ctx = exports.ed25519 = exports.ED25519_TORSION_SUBGROUP = void 0;\nexports.edwardsToMontgomeryPub = edwardsToMontgomeryPub;\nexports.edwardsToMontgomeryPriv = edwardsToMontgomeryPriv;\n/**\n * ed25519 Twisted Edwards curve with following addons:\n * - X25519 ECDH\n * - Ristretto cofactor elimination\n * - Elligator hash-to-group / point indistinguishability\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst sha2_js_1 = require(\"@noble/hashes/sha2.js\");\nconst utils_js_1 = require(\"@noble/hashes/utils.js\");\nconst curve_ts_1 = require(\"./abstract/curve.js\");\nconst edwards_ts_1 = require(\"./abstract/edwards.js\");\nconst hash_to_curve_ts_1 = require(\"./abstract/hash-to-curve.js\");\nconst modular_ts_1 = require(\"./abstract/modular.js\");\nconst montgomery_ts_1 = require(\"./abstract/montgomery.js\");\nconst utils_ts_1 = require(\"./utils.js\");\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _5n = BigInt(5), _8n = BigInt(8);\n// 2n**255n - 19n\n// Removing Fp.create() will still work, and is 10% faster on sign\n//     a: Fp.create(BigInt(-1)),\n// d is -121665/121666 a.k.a. Fp.neg(121665 * Fp.inv(121666))\n// Finite field 2n**255n - 19n\n// Subgroup order 2n**252n + 27742317777372353535851937790883648493n;\nconst ed25519_CURVE = {\n    p: BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed'),\n    n: BigInt('0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed'),\n    h: _8n,\n    a: BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec'),\n    d: BigInt('0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3'),\n    Gx: BigInt('0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a'),\n    Gy: BigInt('0x6666666666666666666666666666666666666666666666666666666666666658'),\n};\nfunction ed25519_pow_2_252_3(x) {\n    // prettier-ignore\n    const _10n = BigInt(10), _20n = BigInt(20), _40n = BigInt(40), _80n = BigInt(80);\n    const P = ed25519_CURVE.p;\n    const x2 = (x * x) % P;\n    const b2 = (x2 * x) % P; // x^3, 11\n    const b4 = ((0, modular_ts_1.pow2)(b2, _2n, P) * b2) % P; // x^15, 1111\n    const b5 = ((0, modular_ts_1.pow2)(b4, _1n, P) * x) % P; // x^31\n    const b10 = ((0, modular_ts_1.pow2)(b5, _5n, P) * b5) % P;\n    const b20 = ((0, modular_ts_1.pow2)(b10, _10n, P) * b10) % P;\n    const b40 = ((0, modular_ts_1.pow2)(b20, _20n, P) * b20) % P;\n    const b80 = ((0, modular_ts_1.pow2)(b40, _40n, P) * b40) % P;\n    const b160 = ((0, modular_ts_1.pow2)(b80, _80n, P) * b80) % P;\n    const b240 = ((0, modular_ts_1.pow2)(b160, _80n, P) * b80) % P;\n    const b250 = ((0, modular_ts_1.pow2)(b240, _10n, P) * b10) % P;\n    const pow_p_5_8 = ((0, modular_ts_1.pow2)(b250, _2n, P) * x) % P;\n    // ^ To pow to (p+3)/8, multiply it by x.\n    return { pow_p_5_8, b2 };\n}\nfunction adjustScalarBytes(bytes) {\n    // Section 5: For X25519, in order to decode 32 random bytes as an integer scalar,\n    // set the three least significant bits of the first byte\n    bytes[0] &= 248; // 0b1111_1000\n    // and the most significant bit of the last to zero,\n    bytes[31] &= 127; // 0b0111_1111\n    // set the second most significant bit of the last byte to 1\n    bytes[31] |= 64; // 0b0100_0000\n    return bytes;\n}\n// (-1) aka (a) aka 2^((p-1)/4)\n// Fp.sqrt(Fp.neg(1))\nconst ED25519_SQRT_M1 = /* @__PURE__ */ BigInt('19681161376707505956807079304988542015446066515923890162744021073123829784752');\n// sqrt(u/v)\nfunction uvRatio(u, v) {\n    const P = ed25519_CURVE.p;\n    const v3 = (0, modular_ts_1.mod)(v * v * v, P); // v\n    const v7 = (0, modular_ts_1.mod)(v3 * v3 * v, P); // v\n    // (p+3)/8 and (p-5)/8\n    const pow = ed25519_pow_2_252_3(u * v7).pow_p_5_8;\n    let x = (0, modular_ts_1.mod)(u * v3 * pow, P); // (uv)(uv)^(p-5)/8\n    const vx2 = (0, modular_ts_1.mod)(v * x * x, P); // vx\n    const root1 = x; // First root candidate\n    const root2 = (0, modular_ts_1.mod)(x * ED25519_SQRT_M1, P); // Second root candidate\n    const useRoot1 = vx2 === u; // If vx = u (mod p), x is a square root\n    const useRoot2 = vx2 === (0, modular_ts_1.mod)(-u, P); // If vx = -u, set x <-- x * 2^((p-1)/4)\n    const noRoot = vx2 === (0, modular_ts_1.mod)(-u * ED25519_SQRT_M1, P); // There is no valid root, vx = -u(-1)\n    if (useRoot1)\n        x = root1;\n    if (useRoot2 || noRoot)\n        x = root2; // We return root2 anyway, for const-time\n    if ((0, modular_ts_1.isNegativeLE)(x, P))\n        x = (0, modular_ts_1.mod)(-x, P);\n    return { isValid: useRoot1 || useRoot2, value: x };\n}\n/** Weird / bogus points, useful for debugging. */\nexports.ED25519_TORSION_SUBGROUP = [\n    '0100000000000000000000000000000000000000000000000000000000000000',\n    'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n    '0000000000000000000000000000000000000000000000000000000000000080',\n    '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n    'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n    '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n    '0000000000000000000000000000000000000000000000000000000000000000',\n    'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n];\nconst Fp = /* @__PURE__ */ (() => (0, modular_ts_1.Field)(ed25519_CURVE.p, undefined, true))();\nconst ed25519Defaults = /* @__PURE__ */ (() => ({\n    ...ed25519_CURVE,\n    Fp,\n    hash: sha2_js_1.sha512,\n    adjustScalarBytes,\n    // dom2\n    // Ratio of u to v. Allows us to combine inversion and square root. Uses algo from RFC8032 5.1.3.\n    // Constant-time, u/v\n    uvRatio,\n}))();\n/**\n * ed25519 curve with EdDSA signatures.\n * @example\n * import { ed25519 } from '@noble/curves/ed25519';\n * const priv = ed25519.utils.randomPrivateKey();\n * const pub = ed25519.getPublicKey(priv);\n * const msg = new TextEncoder().encode('hello');\n * const sig = ed25519.sign(msg, priv);\n * ed25519.verify(sig, msg, pub); // Default mode: follows ZIP215\n * ed25519.verify(sig, msg, pub, { zip215: false }); // RFC8032 / FIPS 186-5\n */\nexports.ed25519 = (() => (0, edwards_ts_1.twistedEdwards)(ed25519Defaults))();\nfunction ed25519_domain(data, ctx, phflag) {\n    if (ctx.length > 255)\n        throw new Error('Context is too big');\n    return (0, utils_js_1.concatBytes)((0, utils_js_1.utf8ToBytes)('SigEd25519 no Ed25519 collisions'), new Uint8Array([phflag ? 1 : 0, ctx.length]), ctx, data);\n}\nexports.ed25519ctx = (() => (0, edwards_ts_1.twistedEdwards)({\n    ...ed25519Defaults,\n    domain: ed25519_domain,\n}))();\nexports.ed25519ph = (() => (0, edwards_ts_1.twistedEdwards)(Object.assign({}, ed25519Defaults, {\n    domain: ed25519_domain,\n    prehash: sha2_js_1.sha512,\n})))();\n/**\n * ECDH using curve25519 aka x25519.\n * @example\n * import { x25519 } from '@noble/curves/ed25519';\n * const priv = 'a546e36bf0527c9d3b16154b82465edd62144c0ac1fc5a18506a2244ba449ac4';\n * const pub = 'e6db6867583030db3594c1a424b15f7c726624ec26b3353b10a903a6d0ab1c4c';\n * x25519.getSharedSecret(priv, pub) === x25519.scalarMult(priv, pub); // aliases\n * x25519.getPublicKey(priv) === x25519.scalarMultBase(priv);\n * x25519.getPublicKey(x25519.utils.randomPrivateKey());\n */\nexports.x25519 = (() => {\n    const P = ed25519_CURVE.p;\n    return (0, montgomery_ts_1.montgomery)({\n        P,\n        type: 'x25519',\n        powPminus2: (x) => {\n            // x^(p-2) aka x^(2^255-21)\n            const { pow_p_5_8, b2 } = ed25519_pow_2_252_3(x);\n            return (0, modular_ts_1.mod)((0, modular_ts_1.pow2)(pow_p_5_8, _3n, P) * b2, P);\n        },\n        adjustScalarBytes,\n    });\n})();\n/**\n * Converts ed25519 public key to x25519 public key. Uses formula:\n * * `(u, v) = ((1+y)/(1-y), sqrt(-486664)*u/x)`\n * * `(x, y) = (sqrt(-486664)*u/v, (u-1)/(u+1))`\n * @example\n *   const someonesPub = ed25519.getPublicKey(ed25519.utils.randomPrivateKey());\n *   const aPriv = x25519.utils.randomPrivateKey();\n *   x25519.getSharedSecret(aPriv, edwardsToMontgomeryPub(someonesPub))\n */\nfunction edwardsToMontgomeryPub(edwardsPub) {\n    const bpub = (0, utils_ts_1.ensureBytes)('pub', edwardsPub);\n    const { y } = exports.ed25519.Point.fromHex(bpub);\n    const _1n = BigInt(1);\n    return Fp.toBytes(Fp.create((_1n + y) * Fp.inv(_1n - y)));\n}\nexports.edwardsToMontgomery = edwardsToMontgomeryPub; // deprecated\n/**\n * Converts ed25519 secret key to x25519 secret key.\n * @example\n *   const someonesPub = x25519.getPublicKey(x25519.utils.randomPrivateKey());\n *   const aPriv = ed25519.utils.randomPrivateKey();\n *   x25519.getSharedSecret(edwardsToMontgomeryPriv(aPriv), someonesPub)\n */\nfunction edwardsToMontgomeryPriv(edwardsPriv) {\n    const hashed = ed25519Defaults.hash(edwardsPriv.subarray(0, 32));\n    return ed25519Defaults.adjustScalarBytes(hashed).subarray(0, 32);\n}\n// Hash To Curve Elligator2 Map (NOTE: different from ristretto255 elligator)\n// NOTE: very important part is usage of FpSqrtEven for ELL2_C1_EDWARDS, since\n// SageMath returns different root first and everything falls apart\nconst ELL2_C1 = /* @__PURE__ */ (() => (Fp.ORDER + _3n) / _8n)(); // 1. c1 = (q + 3) / 8       # Integer arithmetic\nconst ELL2_C2 = /* @__PURE__ */ (() => Fp.pow(_2n, ELL2_C1))(); // 2. c2 = 2^c1\nconst ELL2_C3 = /* @__PURE__ */ (() => Fp.sqrt(Fp.neg(Fp.ONE)))(); // 3. c3 = sqrt(-1)\n// prettier-ignore\nfunction map_to_curve_elligator2_curve25519(u) {\n    const ELL2_C4 = (Fp.ORDER - _5n) / _8n; // 4. c4 = (q - 5) / 8       # Integer arithmetic\n    const ELL2_J = BigInt(486662);\n    let tv1 = Fp.sqr(u); //  1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, _2n); //  2.  tv1 = 2 * tv1\n    let xd = Fp.add(tv1, Fp.ONE); //  3.   xd = tv1 + 1         # Nonzero: -1 is square (mod p), tv1 is not\n    let x1n = Fp.neg(ELL2_J); //  4.  x1n = -J              # x1 = x1n / xd = -J / (1 + 2 * u^2)\n    let tv2 = Fp.sqr(xd); //  5.  tv2 = xd^2\n    let gxd = Fp.mul(tv2, xd); //  6.  gxd = tv2 * xd        # gxd = xd^3\n    let gx1 = Fp.mul(tv1, ELL2_J); //  7.  gx1 = J * tv1         # x1n + J * xd\n    gx1 = Fp.mul(gx1, x1n); //  8.  gx1 = gx1 * x1n       # x1n^2 + J * x1n * xd\n    gx1 = Fp.add(gx1, tv2); //  9.  gx1 = gx1 + tv2       # x1n^2 + J * x1n * xd + xd^2\n    gx1 = Fp.mul(gx1, x1n); //  10. gx1 = gx1 * x1n       # x1n^3 + J * x1n^2 * xd + x1n * xd^2\n    let tv3 = Fp.sqr(gxd); //  11. tv3 = gxd^2\n    tv2 = Fp.sqr(tv3); //  12. tv2 = tv3^2           # gxd^4\n    tv3 = Fp.mul(tv3, gxd); //  13. tv3 = tv3 * gxd       # gxd^3\n    tv3 = Fp.mul(tv3, gx1); //  14. tv3 = tv3 * gx1       # gx1 * gxd^3\n    tv2 = Fp.mul(tv2, tv3); //  15. tv2 = tv2 * tv3       # gx1 * gxd^7\n    let y11 = Fp.pow(tv2, ELL2_C4); //  16. y11 = tv2^c4        # (gx1 * gxd^7)^((p - 5) / 8)\n    y11 = Fp.mul(y11, tv3); //  17. y11 = y11 * tv3       # gx1*gxd^3*(gx1*gxd^7)^((p-5)/8)\n    let y12 = Fp.mul(y11, ELL2_C3); //  18. y12 = y11 * c3\n    tv2 = Fp.sqr(y11); //  19. tv2 = y11^2\n    tv2 = Fp.mul(tv2, gxd); //  20. tv2 = tv2 * gxd\n    let e1 = Fp.eql(tv2, gx1); //  21.  e1 = tv2 == gx1\n    let y1 = Fp.cmov(y12, y11, e1); //  22.  y1 = CMOV(y12, y11, e1)  # If g(x1) is square, this is its sqrt\n    let x2n = Fp.mul(x1n, tv1); //  23. x2n = x1n * tv1       # x2 = x2n / xd = 2 * u^2 * x1n / xd\n    let y21 = Fp.mul(y11, u); //  24. y21 = y11 * u\n    y21 = Fp.mul(y21, ELL2_C2); //  25. y21 = y21 * c2\n    let y22 = Fp.mul(y21, ELL2_C3); //  26. y22 = y21 * c3\n    let gx2 = Fp.mul(gx1, tv1); //  27. gx2 = gx1 * tv1       # g(x2) = gx2 / gxd = 2 * u^2 * g(x1)\n    tv2 = Fp.sqr(y21); //  28. tv2 = y21^2\n    tv2 = Fp.mul(tv2, gxd); //  29. tv2 = tv2 * gxd\n    let e2 = Fp.eql(tv2, gx2); //  30.  e2 = tv2 == gx2\n    let y2 = Fp.cmov(y22, y21, e2); //  31.  y2 = CMOV(y22, y21, e2)  # If g(x2) is square, this is its sqrt\n    tv2 = Fp.sqr(y1); //  32. tv2 = y1^2\n    tv2 = Fp.mul(tv2, gxd); //  33. tv2 = tv2 * gxd\n    let e3 = Fp.eql(tv2, gx1); //  34.  e3 = tv2 == gx1\n    let xn = Fp.cmov(x2n, x1n, e3); //  35.  xn = CMOV(x2n, x1n, e3)  # If e3, x = x1, else x = x2\n    let y = Fp.cmov(y2, y1, e3); //  36.   y = CMOV(y2, y1, e3)    # If e3, y = y1, else y = y2\n    let e4 = Fp.isOdd(y); //  37.  e4 = sgn0(y) == 1        # Fix sign of y\n    y = Fp.cmov(y, Fp.neg(y), e3 !== e4); //  38.   y = CMOV(y, -y, e3 XOR e4)\n    return { xMn: xn, xMd: xd, yMn: y, yMd: _1n }; //  39. return (xn, xd, y, 1)\n}\nconst ELL2_C1_EDWARDS = /* @__PURE__ */ (() => (0, modular_ts_1.FpSqrtEven)(Fp, Fp.neg(BigInt(486664))))(); // sgn0(c1) MUST equal 0\nfunction map_to_curve_elligator2_edwards25519(u) {\n    const { xMn, xMd, yMn, yMd } = map_to_curve_elligator2_curve25519(u); //  1.  (xMn, xMd, yMn, yMd) =\n    // map_to_curve_elligator2_curve25519(u)\n    let xn = Fp.mul(xMn, yMd); //  2.  xn = xMn * yMd\n    xn = Fp.mul(xn, ELL2_C1_EDWARDS); //  3.  xn = xn * c1\n    let xd = Fp.mul(xMd, yMn); //  4.  xd = xMd * yMn    # xn / xd = c1 * xM / yM\n    let yn = Fp.sub(xMn, xMd); //  5.  yn = xMn - xMd\n    let yd = Fp.add(xMn, xMd); //  6.  yd = xMn + xMd    # (n / d - 1) / (n / d + 1) = (n - d) / (n + d)\n    let tv1 = Fp.mul(xd, yd); //  7. tv1 = xd * yd\n    let e = Fp.eql(tv1, Fp.ZERO); //  8.   e = tv1 == 0\n    xn = Fp.cmov(xn, Fp.ZERO, e); //  9.  xn = CMOV(xn, 0, e)\n    xd = Fp.cmov(xd, Fp.ONE, e); //  10. xd = CMOV(xd, 1, e)\n    yn = Fp.cmov(yn, Fp.ONE, e); //  11. yn = CMOV(yn, 1, e)\n    yd = Fp.cmov(yd, Fp.ONE, e); //  12. yd = CMOV(yd, 1, e)\n    const [xd_inv, yd_inv] = (0, modular_ts_1.FpInvertBatch)(Fp, [xd, yd], true); // batch division\n    return { x: Fp.mul(xn, xd_inv), y: Fp.mul(yn, yd_inv) }; //  13. return (xn, xd, yn, yd)\n}\nexports.ed25519_hasher = (() => (0, hash_to_curve_ts_1.createHasher)(exports.ed25519.Point, (scalars) => map_to_curve_elligator2_edwards25519(scalars[0]), {\n    DST: 'edwards25519_XMD:SHA-512_ELL2_RO_',\n    encodeDST: 'edwards25519_XMD:SHA-512_ELL2_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha2_js_1.sha512,\n}))();\nexports.hashToCurve = (() => exports.ed25519_hasher.hashToCurve)();\nexports.encodeToCurve = (() => exports.ed25519_hasher.encodeToCurve)();\nfunction aristp(other) {\n    if (!(other instanceof RistPoint))\n        throw new Error('RistrettoPoint expected');\n}\n// (-1) aka (a) aka 2^((p-1)/4)\nconst SQRT_M1 = ED25519_SQRT_M1;\n// (ad - 1)\nconst SQRT_AD_MINUS_ONE = /* @__PURE__ */ BigInt('25063068953384623474111414158702152701244531502492656460079210482610430750235');\n// 1 / (a-d)\nconst INVSQRT_A_MINUS_D = /* @__PURE__ */ BigInt('54469307008909316920995813868745141605393597292927456921205312896311721017578');\n// 1-d\nconst ONE_MINUS_D_SQ = /* @__PURE__ */ BigInt('1159843021668779879193775521855586647937357759715417654439879720876111806838');\n// (d-1)\nconst D_MINUS_ONE_SQ = /* @__PURE__ */ BigInt('40440834346308536858101042469323190826248399146238708352240133220865137265952');\n// Calculates 1/(number)\nconst invertSqrt = (number) => uvRatio(_1n, number);\nconst MAX_255B = /* @__PURE__ */ BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\nconst bytes255ToNumberLE = (bytes) => exports.ed25519.CURVE.Fp.create((0, utils_ts_1.bytesToNumberLE)(bytes) & MAX_255B);\n/**\n * Computes Elligator map for Ristretto255.\n * Described in [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#appendix-B) and on\n * the [website](https://ristretto.group/formulas/elligator.html).\n */\nfunction calcElligatorRistrettoMap(r0) {\n    const { d } = exports.ed25519.CURVE;\n    const P = exports.ed25519.CURVE.Fp.ORDER;\n    const mod = exports.ed25519.CURVE.Fp.create;\n    const r = mod(SQRT_M1 * r0 * r0); // 1\n    const Ns = mod((r + _1n) * ONE_MINUS_D_SQ); // 2\n    let c = BigInt(-1); // 3\n    const D = mod((c - d * r) * mod(r + d)); // 4\n    let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D); // 5\n    let s_ = mod(s * r0); // 6\n    if (!(0, modular_ts_1.isNegativeLE)(s_, P))\n        s_ = mod(-s_);\n    if (!Ns_D_is_sq)\n        s = s_; // 7\n    if (!Ns_D_is_sq)\n        c = r; // 8\n    const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D); // 9\n    const s2 = s * s;\n    const W0 = mod((s + s) * D); // 10\n    const W1 = mod(Nt * SQRT_AD_MINUS_ONE); // 11\n    const W2 = mod(_1n - s2); // 12\n    const W3 = mod(_1n + s2); // 13\n    return new exports.ed25519.Point(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n}\n/**\n * Each ed25519/ExtendedPoint has 8 different equivalent points. This can be\n * a source of bugs for protocols like ring signatures. Ristretto was created to solve this.\n * Ristretto point operates in X:Y:Z:T extended coordinates like ExtendedPoint,\n * but it should work in its own namespace: do not combine those two.\n * See [RFC9496](https://www.rfc-editor.org/rfc/rfc9496).\n */\nclass RistPoint {\n    // Private property to discourage combining ExtendedPoint + RistrettoPoint\n    // Always use Ristretto encoding/decoding instead.\n    constructor(ep) {\n        this.ep = ep;\n    }\n    static fromAffine(ap) {\n        return new RistPoint(exports.ed25519.Point.fromAffine(ap));\n    }\n    /**\n     * Takes uniform output of 64-byte hash function like sha512 and converts it to `RistrettoPoint`.\n     * The hash-to-group operation applies Elligator twice and adds the results.\n     * **Note:** this is one-way map, there is no conversion from point to hash.\n     * Described in [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#appendix-B) and on\n     * the [website](https://ristretto.group/formulas/elligator.html).\n     * @param hex 64-byte output of a hash function\n     */\n    static hashToCurve(hex) {\n        hex = (0, utils_ts_1.ensureBytes)('ristrettoHash', hex, 64);\n        const r1 = bytes255ToNumberLE(hex.slice(0, 32));\n        const R1 = calcElligatorRistrettoMap(r1);\n        const r2 = bytes255ToNumberLE(hex.slice(32, 64));\n        const R2 = calcElligatorRistrettoMap(r2);\n        return new RistPoint(R1.add(R2));\n    }\n    static fromBytes(bytes) {\n        (0, utils_js_1.abytes)(bytes);\n        return this.fromHex(bytes);\n    }\n    /**\n     * Converts ristretto-encoded string to ristretto point.\n     * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-decode).\n     * @param hex Ristretto-encoded 32 bytes. Not every 32-byte string is valid ristretto encoding\n     */\n    static fromHex(hex) {\n        hex = (0, utils_ts_1.ensureBytes)('ristrettoHex', hex, 32);\n        const { a, d } = exports.ed25519.CURVE;\n        const P = Fp.ORDER;\n        const mod = Fp.create;\n        const emsg = 'RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint';\n        const s = bytes255ToNumberLE(hex);\n        // 1. Check that s_bytes is the canonical encoding of a field element, or else abort.\n        // 3. Check that s is non-negative, or else abort\n        if (!(0, utils_ts_1.equalBytes)((0, utils_ts_1.numberToBytesLE)(s, 32), hex) || (0, modular_ts_1.isNegativeLE)(s, P))\n            throw new Error(emsg);\n        const s2 = mod(s * s);\n        const u1 = mod(_1n + a * s2); // 4 (a is -1)\n        const u2 = mod(_1n - a * s2); // 5\n        const u1_2 = mod(u1 * u1);\n        const u2_2 = mod(u2 * u2);\n        const v = mod(a * d * u1_2 - u2_2); // 6\n        const { isValid, value: I } = invertSqrt(mod(v * u2_2)); // 7\n        const Dx = mod(I * u2); // 8\n        const Dy = mod(I * Dx * v); // 9\n        let x = mod((s + s) * Dx); // 10\n        if ((0, modular_ts_1.isNegativeLE)(x, P))\n            x = mod(-x); // 10\n        const y = mod(u1 * Dy); // 11\n        const t = mod(x * y); // 12\n        if (!isValid || (0, modular_ts_1.isNegativeLE)(t, P) || y === _0n)\n            throw new Error(emsg);\n        return new RistPoint(new exports.ed25519.Point(x, y, _1n, t));\n    }\n    static msm(points, scalars) {\n        const Fn = (0, modular_ts_1.Field)(exports.ed25519.CURVE.n, exports.ed25519.CURVE.nBitLength);\n        return (0, curve_ts_1.pippenger)(RistPoint, Fn, points, scalars);\n    }\n    /**\n     * Encodes ristretto point to Uint8Array.\n     * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-encode).\n     */\n    toBytes() {\n        let { ex: x, ey: y, ez: z, et: t } = this.ep;\n        const P = Fp.ORDER;\n        const mod = Fp.create;\n        const u1 = mod(mod(z + y) * mod(z - y)); // 1\n        const u2 = mod(x * y); // 2\n        // Square root always exists\n        const u2sq = mod(u2 * u2);\n        const { value: invsqrt } = invertSqrt(mod(u1 * u2sq)); // 3\n        const D1 = mod(invsqrt * u1); // 4\n        const D2 = mod(invsqrt * u2); // 5\n        const zInv = mod(D1 * D2 * t); // 6\n        let D; // 7\n        if ((0, modular_ts_1.isNegativeLE)(t * zInv, P)) {\n            let _x = mod(y * SQRT_M1);\n            let _y = mod(x * SQRT_M1);\n            x = _x;\n            y = _y;\n            D = mod(D1 * INVSQRT_A_MINUS_D);\n        }\n        else {\n            D = D2; // 8\n        }\n        if ((0, modular_ts_1.isNegativeLE)(x * zInv, P))\n            y = mod(-y); // 9\n        let s = mod((z - y) * D); // 10 (check footer's note, no sqrt(-a))\n        if ((0, modular_ts_1.isNegativeLE)(s, P))\n            s = mod(-s);\n        return (0, utils_ts_1.numberToBytesLE)(s, 32); // 11\n    }\n    /** @deprecated use `toBytes` */\n    toRawBytes() {\n        return this.toBytes();\n    }\n    toHex() {\n        return (0, utils_ts_1.bytesToHex)(this.toBytes());\n    }\n    toString() {\n        return this.toHex();\n    }\n    /**\n     * Compares two Ristretto points.\n     * Described in [RFC9496](https://www.rfc-editor.org/rfc/rfc9496#name-equals).\n     */\n    equals(other) {\n        aristp(other);\n        const { ex: X1, ey: Y1 } = this.ep;\n        const { ex: X2, ey: Y2 } = other.ep;\n        const mod = Fp.create;\n        // (x1 * y2 == y1 * x2) | (y1 * y2 == x1 * x2)\n        const one = mod(X1 * Y2) === mod(Y1 * X2);\n        const two = mod(Y1 * Y2) === mod(X1 * X2);\n        return one || two;\n    }\n    add(other) {\n        aristp(other);\n        return new RistPoint(this.ep.add(other.ep));\n    }\n    subtract(other) {\n        aristp(other);\n        return new RistPoint(this.ep.subtract(other.ep));\n    }\n    multiply(scalar) {\n        return new RistPoint(this.ep.multiply(scalar));\n    }\n    multiplyUnsafe(scalar) {\n        return new RistPoint(this.ep.multiplyUnsafe(scalar));\n    }\n    double() {\n        return new RistPoint(this.ep.double());\n    }\n    negate() {\n        return new RistPoint(this.ep.negate());\n    }\n}\n/**\n * Wrapper over Edwards Point for ristretto255 from\n * [RFC9496](https://www.rfc-editor.org/rfc/rfc9496).\n */\nexports.RistrettoPoint = (() => {\n    if (!RistPoint.BASE)\n        RistPoint.BASE = new RistPoint(exports.ed25519.Point.BASE);\n    if (!RistPoint.ZERO)\n        RistPoint.ZERO = new RistPoint(exports.ed25519.Point.ZERO);\n    return RistPoint;\n})();\n/**\n * hash-to-curve for ristretto255.\n * Described in [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#appendix-B).\n */\nconst hashToRistretto255 = (msg, options) => {\n    const d = options.DST;\n    const DST = typeof d === 'string' ? (0, utils_js_1.utf8ToBytes)(d) : d;\n    const uniform_bytes = (0, hash_to_curve_ts_1.expand_message_xmd)(msg, DST, 64, sha2_js_1.sha512);\n    const P = RistPoint.hashToCurve(uniform_bytes);\n    return P;\n};\nexports.hashToRistretto255 = hashToRistretto255;\n/** @deprecated */\nexports.hash_to_ristretto255 = exports.hashToRistretto255; // legacy\n//# sourceMappingURL=ed25519.js.map","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EMPTY = exports.utf8ToBytes = exports.concatBytes = exports.randomBytes = exports.ensureBytes = void 0;\nexports.equalBytes = equalBytes;\nexports.splitCoder = splitCoder;\nexports.vecCoder = vecCoder;\nexports.cleanBytes = cleanBytes;\nexports.getMask = getMask;\nexports.getMessage = getMessage;\nexports.getMessagePrehash = getMessagePrehash;\n/**\n * Utilities for hex, bytearray and number handling.\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nconst sha2_1 = require(\"@noble/hashes/sha2\");\nconst sha3_1 = require(\"@noble/hashes/sha3\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nObject.defineProperty(exports, \"concatBytes\", { enumerable: true, get: function () { return utils_1.concatBytes; } });\nObject.defineProperty(exports, \"utf8ToBytes\", { enumerable: true, get: function () { return utils_1.utf8ToBytes; } });\nexports.ensureBytes = utils_1.abytes;\nexports.randomBytes = utils_1.randomBytes;\n// Compares 2 u8a-s in kinda constant time\nfunction equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let diff = 0;\n    for (let i = 0; i < a.length; i++)\n        diff |= a[i] ^ b[i];\n    return diff === 0;\n}\nfunction splitCoder(...lengths) {\n    const getLength = (c) => (typeof c === 'number' ? c : c.bytesLen);\n    const bytesLen = lengths.reduce((sum, a) => sum + getLength(a), 0);\n    return {\n        bytesLen,\n        encode: (bufs) => {\n            const res = new Uint8Array(bytesLen);\n            for (let i = 0, pos = 0; i < lengths.length; i++) {\n                const c = lengths[i];\n                const l = getLength(c);\n                const b = typeof c === 'number' ? bufs[i] : c.encode(bufs[i]);\n                (0, exports.ensureBytes)(b, l);\n                res.set(b, pos);\n                if (typeof c !== 'number')\n                    b.fill(0); // clean\n                pos += l;\n            }\n            return res;\n        },\n        decode: (buf) => {\n            (0, exports.ensureBytes)(buf, bytesLen);\n            const res = [];\n            for (const c of lengths) {\n                const l = getLength(c);\n                const b = buf.subarray(0, l);\n                res.push(typeof c === 'number' ? b : c.decode(b));\n                buf = buf.subarray(l);\n            }\n            return res;\n        },\n    };\n}\n// nano-packed.array (fixed size)\nfunction vecCoder(c, vecLen) {\n    const bytesLen = vecLen * c.bytesLen;\n    return {\n        bytesLen,\n        encode: (u) => {\n            if (u.length !== vecLen)\n                throw new Error(`vecCoder.encode: wrong length=${u.length}. Expected: ${vecLen}`);\n            const res = new Uint8Array(bytesLen);\n            for (let i = 0, pos = 0; i < u.length; i++) {\n                const b = c.encode(u[i]);\n                res.set(b, pos);\n                b.fill(0); // clean\n                pos += b.length;\n            }\n            return res;\n        },\n        decode: (a) => {\n            (0, exports.ensureBytes)(a, bytesLen);\n            const r = [];\n            for (let i = 0; i < a.length; i += c.bytesLen)\n                r.push(c.decode(a.subarray(i, i + c.bytesLen)));\n            return r;\n        },\n    };\n}\n// cleanBytes(new Uint8Array(), [new Uint16Array(), new Uint32Array()])\nfunction cleanBytes(...list) {\n    for (const t of list) {\n        if (Array.isArray(t))\n            for (const b of t)\n                b.fill(0);\n        else\n            t.fill(0);\n    }\n}\nfunction getMask(bits) {\n    return (1 << bits) - 1; // 4 -> 0b1111\n}\nexports.EMPTY = new Uint8Array(0);\nfunction getMessage(msg, ctx = exports.EMPTY) {\n    (0, exports.ensureBytes)(msg);\n    (0, exports.ensureBytes)(ctx);\n    if (ctx.length > 255)\n        throw new Error('context should be less than 255 bytes');\n    return (0, utils_1.concatBytes)(new Uint8Array([0, ctx.length]), ctx, msg);\n}\n// OIDS from https://csrc.nist.gov/projects/computer-security-objects-register/algorithm-registration\n// TODO: maybe add 'OID' property to hashes themselves to improve tree-shaking?\nconst HASHES = {\n    'SHA2-256': { oid: (0, utils_1.hexToBytes)('0609608648016503040201'), hash: sha2_1.sha256 },\n    'SHA2-384': { oid: (0, utils_1.hexToBytes)('0609608648016503040202'), hash: sha2_1.sha384 },\n    'SHA2-512': { oid: (0, utils_1.hexToBytes)('0609608648016503040203'), hash: sha2_1.sha512 },\n    'SHA2-224': { oid: (0, utils_1.hexToBytes)('0609608648016503040204'), hash: sha2_1.sha224 },\n    'SHA2-512/224': { oid: (0, utils_1.hexToBytes)('0609608648016503040205'), hash: sha2_1.sha512_224 },\n    'SHA2-512/256': { oid: (0, utils_1.hexToBytes)('0609608648016503040206'), hash: sha2_1.sha512_256 },\n    'SHA3-224': { oid: (0, utils_1.hexToBytes)('0609608648016503040207'), hash: sha3_1.sha3_224 },\n    'SHA3-256': { oid: (0, utils_1.hexToBytes)('0609608648016503040208'), hash: sha3_1.sha3_256 },\n    'SHA3-384': { oid: (0, utils_1.hexToBytes)('0609608648016503040209'), hash: sha3_1.sha3_384 },\n    'SHA3-512': { oid: (0, utils_1.hexToBytes)('060960864801650304020A'), hash: sha3_1.sha3_512 },\n    'SHAKE-128': {\n        oid: (0, utils_1.hexToBytes)('060960864801650304020B'),\n        hash: (msg) => (0, sha3_1.shake128)(msg, { dkLen: 32 }),\n    },\n    'SHAKE-256': {\n        oid: (0, utils_1.hexToBytes)('060960864801650304020C'),\n        hash: (msg) => (0, sha3_1.shake256)(msg, { dkLen: 64 }),\n    },\n};\nfunction getMessagePrehash(hashName, msg, ctx = exports.EMPTY) {\n    (0, exports.ensureBytes)(msg);\n    (0, exports.ensureBytes)(ctx);\n    if (ctx.length > 255)\n        throw new Error('context should be less than 255 bytes');\n    if (!HASHES[hashName])\n        throw new Error('unknown hash: ' + hashName);\n    const { oid, hash } = HASHES[hashName];\n    const hashed = hash(msg);\n    return (0, utils_1.concatBytes)(new Uint8Array([1, ctx.length]), ctx, oid, hashed);\n}\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.notImplemented = exports.bitMask = exports.utf8ToBytes = exports.randomBytes = exports.isBytes = exports.hexToBytes = exports.concatBytes = exports.bytesToUtf8 = exports.bytesToHex = exports.anumber = exports.abytes = void 0;\nexports.abool = abool;\nexports.numberToHexUnpadded = numberToHexUnpadded;\nexports.hexToNumber = hexToNumber;\nexports.bytesToNumberBE = bytesToNumberBE;\nexports.bytesToNumberLE = bytesToNumberLE;\nexports.numberToBytesBE = numberToBytesBE;\nexports.numberToBytesLE = numberToBytesLE;\nexports.numberToVarBytesBE = numberToVarBytesBE;\nexports.ensureBytes = ensureBytes;\nexports.equalBytes = equalBytes;\nexports.inRange = inRange;\nexports.aInRange = aInRange;\nexports.bitLen = bitLen;\nexports.bitGet = bitGet;\nexports.bitSet = bitSet;\nexports.createHmacDrbg = createHmacDrbg;\nexports.validateObject = validateObject;\nexports.isHash = isHash;\nexports._validateObject = _validateObject;\nexports.memoized = memoized;\n/**\n * Hex, bytes and number utilities.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_js_1 = require(\"@noble/hashes/utils.js\");\nvar utils_js_2 = require(\"@noble/hashes/utils.js\");\nObject.defineProperty(exports, \"abytes\", { enumerable: true, get: function () { return utils_js_2.abytes; } });\nObject.defineProperty(exports, \"anumber\", { enumerable: true, get: function () { return utils_js_2.anumber; } });\nObject.defineProperty(exports, \"bytesToHex\", { enumerable: true, get: function () { return utils_js_2.bytesToHex; } });\nObject.defineProperty(exports, \"bytesToUtf8\", { enumerable: true, get: function () { return utils_js_2.bytesToUtf8; } });\nObject.defineProperty(exports, \"concatBytes\", { enumerable: true, get: function () { return utils_js_2.concatBytes; } });\nObject.defineProperty(exports, \"hexToBytes\", { enumerable: true, get: function () { return utils_js_2.hexToBytes; } });\nObject.defineProperty(exports, \"isBytes\", { enumerable: true, get: function () { return utils_js_2.isBytes; } });\nObject.defineProperty(exports, \"randomBytes\", { enumerable: true, get: function () { return utils_js_2.randomBytes; } });\nObject.defineProperty(exports, \"utf8ToBytes\", { enumerable: true, get: function () { return utils_js_2.utf8ToBytes; } });\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nfunction abool(title, value) {\n    if (typeof value !== 'boolean')\n        throw new Error(title + ' boolean expected, got ' + value);\n}\n// Used in weierstrass, der\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? '0' + hex : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    return hex === '' ? _0n : BigInt('0x' + hex); // Big Endian\n}\n// BE: Big Endian, LE: Little Endian\nfunction bytesToNumberBE(bytes) {\n    return hexToNumber((0, utils_js_1.bytesToHex)(bytes));\n}\nfunction bytesToNumberLE(bytes) {\n    (0, utils_js_1.abytes)(bytes);\n    return hexToNumber((0, utils_js_1.bytesToHex)(Uint8Array.from(bytes).reverse()));\n}\nfunction numberToBytesBE(n, len) {\n    return (0, utils_js_1.hexToBytes)(n.toString(16).padStart(len * 2, '0'));\n}\nfunction numberToBytesLE(n, len) {\n    return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nfunction numberToVarBytesBE(n) {\n    return (0, utils_js_1.hexToBytes)(numberToHexUnpadded(n));\n}\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'private key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nfunction ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = (0, utils_js_1.hexToBytes)(hex);\n        }\n        catch (e) {\n            throw new Error(title + ' must be hex string or Uint8Array, cause: ' + e);\n        }\n    }\n    else if ((0, utils_js_1.isBytes)(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(title + ' must be hex string or Uint8Array');\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(title + ' of length ' + expectedLength + ' expected, got ' + len);\n    return res;\n}\n// Compares 2 u8a-s in kinda constant time\nfunction equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let diff = 0;\n    for (let i = 0; i < a.length; i++)\n        diff |= a[i] ^ b[i];\n    return diff === 0;\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\n// export const utf8ToBytes: typeof utf8ToBytes_ = utf8ToBytes_;\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\n// export const bytesToUtf8: typeof bytesToUtf8_ = bytesToUtf8_;\n// Is positive bigint\nconst isPosBig = (n) => typeof n === 'bigint' && _0n <= n;\nfunction inRange(n, min, max) {\n    return isPosBig(n) && isPosBig(min) && isPosBig(max) && min <= n && n < max;\n}\n/**\n * Asserts min <= n < max. NOTE: It's < max and not <= max.\n * @example\n * aInRange('x', x, 1n, 256n); // would assume x is in (1n..255n)\n */\nfunction aInRange(title, n, min, max) {\n    // Why min <= n < max and not a (min < n < max) OR b (min <= n <= max)?\n    // consider P=256n, min=0n, max=P\n    // - a for min=0 would require -1:          `inRange('x', x, -1n, P)`\n    // - b would commonly require subtraction:  `inRange('x', x, 0n, P - 1n)`\n    // - our way is the cleanest:               `inRange('x', x, 0n, P)\n    if (!inRange(n, min, max))\n        throw new Error('expected valid ' + title + ': ' + min + ' <= n < ' + max + ', got ' + n);\n}\n// Bit operations\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n * TODO: merge with nLength in modular\n */\nfunction bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nfunction bitGet(n, pos) {\n    return (n >> BigInt(pos)) & _1n;\n}\n/**\n * Sets single bit at position.\n */\nfunction bitSet(n, pos, value) {\n    return n | ((value ? _1n : _0n) << BigInt(pos));\n}\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nconst bitMask = (n) => (_1n << BigInt(n)) - _1n;\nexports.bitMask = bitMask;\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nfunction createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    const u8n = (len) => new Uint8Array(len); // creates Uint8Array\n    const u8of = (byte) => Uint8Array.of(byte); // another shortcut\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n(0)) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8of(0x00), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8of(0x01), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return (0, utils_js_1.concatBytes)(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    stringOrUint8Array: (val) => typeof val === 'string' || (0, utils_js_1.isBytes)(val),\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nfunction validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error('invalid validator function');\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error('param ' + String(fieldName) + ' is invalid. Expected ' + type + ', got ' + val);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\nfunction isHash(val) {\n    return typeof val === 'function' && Number.isSafeInteger(val.outputLen);\n}\nfunction _validateObject(object, fields, optFields = {}) {\n    if (!object || typeof object !== 'object')\n        throw new Error('expected valid options object');\n    function checkField(fieldName, expectedType, isOpt) {\n        const val = object[fieldName];\n        if (isOpt && val === undefined)\n            return;\n        const current = typeof val;\n        if (current !== expectedType || val === null)\n            throw new Error(`param \"${fieldName}\" is invalid: expected ${expectedType}, got ${current}`);\n    }\n    Object.entries(fields).forEach(([k, v]) => checkField(k, v, false));\n    Object.entries(optFields).forEach(([k, v]) => checkField(k, v, true));\n}\n/**\n * throws not implemented error\n */\nconst notImplemented = () => {\n    throw new Error('not implemented');\n};\nexports.notImplemented = notImplemented;\n/**\n * Memoizes (caches) computation result.\n * Uses WeakMap: the value is going auto-cleaned by GC after last reference is removed.\n */\nfunction memoized(fn) {\n    const map = new WeakMap();\n    return (arg, ...args) => {\n        const val = map.get(arg);\n        if (val !== undefined)\n            return val;\n        const computed = fn(arg, ...args);\n        map.set(arg, computed);\n        return computed;\n    };\n}\n//# sourceMappingURL=utils.js.map","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Challenger_1 = __importDefault(require(\"./Challenger\"));\nconst Fido2Manager_1 = __importDefault(require(\"./Fido2Manager\"));\nconst KeyManager_1 = __importDefault(require(\"./KeyManager\"));\nconst MemoryChannel_1 = require(\"./MemoryChannel\");\nconst SoftCredentials_1 = __importDefault(require(\"./platform/SoftCredentials\"));\nconst VaultysId_1 = __importDefault(require(\"./VaultysId\"));\nconst crypto_1 = require(\"./crypto\");\nconst Fido2PRFManager_1 = __importDefault(require(\"./Fido2PRFManager\"));\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nconst buffer_1 = require(\"buffer/\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\n// \"vaultys/encryption/\" + version = 0x01\nconst ENCRYPTION_HEADER = buffer_1.Buffer.from(\"7661756c7479732f656e6372797074696f6e2f01\", \"hex\");\nconst PRF_NONCE_LENGTH = 32;\nconst getSignatureType = (challenge) => {\n    if (challenge.startsWith(\"vaultys://connect?\")) {\n        return \"LOGIN\";\n    }\n    else if (challenge.startsWith(\"vaultys://signfile?\")) {\n        return \"DOCUMENT\";\n    }\n    else {\n        return \"UNKNOWN\";\n    }\n};\nconst instanciateContact = (c) => {\n    let vaultysId;\n    if (c.type === 3) {\n        vaultysId = new VaultysId_1.default(Fido2Manager_1.default.instantiate(c.keyManager), c.certificate, c.type);\n    }\n    else if (c.type === 4) {\n        vaultysId = new VaultysId_1.default(Fido2PRFManager_1.default.instantiate(c.keyManager), c.certificate, c.type);\n    }\n    else {\n        vaultysId = new VaultysId_1.default(KeyManager_1.default.instantiate(c.keyManager), c.certificate, c.type);\n    }\n    return vaultysId;\n};\nconst instanciateApp = (a) => {\n    return VaultysId_1.default.fromId(buffer_1.Buffer.from(a.serverId, \"base64\"), a.certificate);\n};\nclass IdManager {\n    constructor(vaultysId, store) {\n        this.protocol_version = 0;\n        // alias since this is symetric key encryption\n        this.acceptEncryptFile = this.acceptDecryptFile;\n        this.vaultysId = vaultysId;\n        this.store = store;\n        if (!this.store.get(\"metadata\")) {\n            this.store.set(\"metadata\", {});\n        }\n        if (this.vaultysId.keyManager.entropy)\n            this.store.set(\"entropy\", this.vaultysId.keyManager.entropy);\n        else\n            this.store.set(\"secret\", this.vaultysId.getSecret());\n        this.store.save();\n    }\n    setProtocolVersion(version) {\n        this.protocol_version = version;\n    }\n    static async fromStore(store) {\n        const entropy = store.get(\"entropy\");\n        const secret = store.get(\"secret\");\n        if (secret) {\n            if (entropy) {\n                const secretBuffer = buffer_1.Buffer.from(secret, \"base64\");\n                const type = secretBuffer[0];\n                const vaultysId = await VaultysId_1.default.fromEntropy(entropy, type);\n                return new IdManager(vaultysId, store);\n            }\n            else {\n                const vaultysId = VaultysId_1.default.fromSecret(secret);\n                return new IdManager(vaultysId, store);\n            }\n        }\n        else if (entropy) {\n            const vaultysId = await VaultysId_1.default.machineFromEntropy(entropy);\n            return new IdManager(vaultysId, store);\n        }\n        else {\n            const vaultysId = await VaultysId_1.default.generateMachine();\n            return new IdManager(vaultysId, store);\n        }\n    }\n    merge(otherStore, master = true) {\n        // TODO: check if same profile ?\n        // TODO: revamp contact metadata and sync\n        const master_store = master ? otherStore : this.store;\n        const slave_store = master ? this.store : otherStore;\n        this.store.set(\"metadata\", { ...slave_store.get(\"metadata\"), ...master_store.get(\"metadata\") });\n        [\"signatures\", \"wot\"].forEach((table) => {\n            const other = otherStore.substore(table);\n            const me = this.store.substore(table);\n            other.list().forEach((k) => {\n                if (!me.get(k)) {\n                    me.set(k, other.get(k));\n                }\n            });\n        });\n        const other = otherStore.substore(\"contacts\");\n        const me = this.store.substore(\"contacts\");\n        const m = master ? other : me;\n        const s = master ? me : other;\n        other.list().forEach((did) => {\n            if (!me.get(did)) {\n                me.set(did, other.get(did));\n            }\n            else {\n                const contact = me.get(did);\n                contact.metadata = { ...s.get(did).metadata, ...m.get(did).metadata };\n                me.set(did, contact);\n            }\n        });\n        this.store.save();\n    }\n    isHardware() {\n        return this.vaultysId.isHardware();\n    }\n    async signIn() {\n        if (!this.vaultysId.isHardware())\n            return true;\n        await window.CredentialUserInteractionRequest();\n        const challenge = (0, crypto_1.randomBytes)(PRF_NONCE_LENGTH);\n        const keyManager = this.vaultysId.keyManager;\n        const creds = (await navigator.credentials.get({\n            publicKey: {\n                challenge,\n                allowCredentials: [\n                    {\n                        type: \"public-key\",\n                        id: keyManager.fid,\n                        transports: keyManager.transports,\n                    },\n                ],\n                userVerification: \"discouraged\",\n            },\n        }));\n        if (creds == null)\n            return false;\n        const response = creds.response;\n        const extractedChallenge = SoftCredentials_1.default.extractChallenge(response.clientDataJSON);\n        if (challenge.toString(\"base64\") !== extractedChallenge) {\n            return false;\n        }\n        return keyManager.verifyCredentials(creds);\n    }\n    get contacts() {\n        const s = this.store.substore(\"contacts\");\n        return s\n            .list()\n            .map((did) => s.get(did))\n            .map(instanciateContact)\n            .map((contact) => contact.toVersion(this.vaultysId.version));\n    }\n    get apps() {\n        const s = this.store.substore(\"registrations\");\n        return s\n            .list()\n            .map((did) => s.get(did))\n            .map(instanciateApp)\n            .map((app) => app.toVersion(this.vaultysId.version));\n    }\n    getContact(did) {\n        const c = this.store.substore(\"contacts\").get(did);\n        if (!c)\n            return null;\n        return instanciateContact(c).toVersion(this.vaultysId.version);\n    }\n    getApp(did) {\n        const app = this.store.substore(\"registrations\").get(did);\n        if (!app)\n            return null;\n        return instanciateApp(app).toVersion(this.vaultysId.version);\n    }\n    setContactMetadata(did, name, value) {\n        const c = this.store.substore(\"contacts\").get(did);\n        if (c) {\n            if (!c.metadata) {\n                c.metadata = {};\n            }\n            c.metadata[name] = value;\n        }\n    }\n    getContactMetadata(did, name) {\n        const c = this.store.substore(\"contacts\").get(did);\n        if (c && c.metadata) {\n            return c.metadata[name];\n        }\n        return null;\n    }\n    getContactMetadatas(did) {\n        const c = this.store.substore(\"contacts\").get(did);\n        if (c && c.metadata) {\n            return c.metadata;\n        }\n        return null;\n    }\n    async verifyRelationshipCertificate(did) {\n        const c = this.store.substore(\"contacts\").get(did) || this.store.substore(\"registrations\").get(did);\n        return Challenger_1.default.verifyCertificate(c.certificate);\n    }\n    set name(n) {\n        this.store.get(\"metadata\").name = n;\n    }\n    get name() {\n        return this.store.get(\"metadata\").name;\n    }\n    get displayName() {\n        const metadata = this.store.get(\"metadata\");\n        const result = metadata.firstname ? metadata.firstname + \" \" + (metadata.name ?? \"\") : metadata.name;\n        return result?.length > 0 ? result : \"Anonymous \" + this.vaultysId.fingerprint?.slice(-4);\n    }\n    set phone(n) {\n        this.store.get(\"metadata\").phone = n;\n    }\n    get phone() {\n        return this.store.get(\"metadata\").phone;\n    }\n    set email(n) {\n        this.store.get(\"metadata\").email = n;\n    }\n    get email() {\n        return this.store.get(\"metadata\").email;\n    }\n    // set avatar(n) {\n    //   this.store.get(\"metadata\").avatar = {\n    //     data: Buffer.from(n.data).toString(\"base64\"),\n    //     type: n.type,\n    //   };\n    // }\n    // get avatar() {\n    //   const temp = this.store.get(\"metadata\").avatar;\n    //   if (!temp) return null;\n    //   return {\n    //     data: Buffer.from(temp.data, \"base64\"),\n    //     type: temp.type,\n    //   };\n    // }\n    async signChallenge(challenge) {\n        const signature = await this.vaultysId.signChallenge(challenge);\n        this.store.substore(\"signatures\").set(\"\" + Date.now(), {\n            signature,\n            challenge,\n        });\n        this.store.save();\n        return signature;\n    }\n    async signFile(file) {\n        const h = (0, crypto_1.hash)(\"sha256\", file.arrayBuffer).toString(\"hex\");\n        const challenge = buffer_1.Buffer.from(`vaultys://signfile?hash=${h}&timestamp=${Date.now()}`, \"utf-8\");\n        const payload = {\n            challenge,\n            signature: await this.vaultysId.signChallenge(challenge),\n        };\n        this.store.substore(\"signatures\").set(Date.now() + \"\", payload);\n        this.store.save();\n        return payload;\n    }\n    verifyFile(file, fileSignature, contactId, userVerifiation = true) {\n        const data = fileSignature.challenge.toString(\"utf8\");\n        if (!data.startsWith(\"vaultys://signfile?\")) {\n            return false;\n        }\n        const h = (0, crypto_1.hash)(\"sha256\", file.arrayBuffer).toString(\"hex\");\n        const url = new URL(data);\n        const fileHash = url.searchParams.get(\"hash\");\n        if (h !== fileHash) {\n            return false;\n        }\n        if (url.search.match(/[a-z\\d]+=[a-z\\d]+/gi)?.length === 2 && url.searchParams.get(\"timestamp\")) {\n            return contactId.verifyChallenge(fileSignature.challenge, fileSignature.signature, userVerifiation);\n        }\n        return false;\n    }\n    async decryptFile(toDecrypt, channel) {\n        // Extract nonce and ciphertext from arrayBuffer\n        const data = new Uint8Array(toDecrypt.arrayBuffer);\n        const header = data.slice(0, ENCRYPTION_HEADER.length);\n        if (buffer_1.Buffer.from(header).toString(\"hex\") !== ENCRYPTION_HEADER.toString(\"hex\")) {\n            throw new Error(\"Invalid header for encrypted file\");\n        }\n        const prfNonceBytes = data.slice(ENCRYPTION_HEADER.length, ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH);\n        const nonceBytes = data.slice(ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH, ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH + tweetnacl_1.default.secretbox.nonceLength);\n        const ciphertext = data.slice(ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH + tweetnacl_1.default.secretbox.nonceLength);\n        const prf = channel ? await this.requestPRF(channel, \"encryption/\" + buffer_1.Buffer.from(prfNonceBytes).toString(\"hex\") + \"/encryption\") : await this.vaultysId.hmac(\"prf|encryption/\" + buffer_1.Buffer.from(prfNonceBytes).toString(\"hex\") + \"/encryption|prf\");\n        if (prf?.length !== PRF_NONCE_LENGTH) {\n            throw new Error(\"Invalid PRF generated\");\n        }\n        // Use sha256 hash of the PRF as the secretbox key (must be 32 bytes)\n        const secretKey = (0, crypto_1.hash)(\"sha256\", prf);\n        (0, crypto_1.secureErase)(prf);\n        // Decrypt using nacl.secretbox.open\n        const decrypted = tweetnacl_1.default.secretbox.open(ciphertext, nonceBytes, secretKey);\n        (0, crypto_1.secureErase)(secretKey);\n        if (!decrypted) {\n            throw new Error(\"Decryption failed\");\n        }\n        return {\n            name: toDecrypt.name,\n            type: toDecrypt.type,\n            arrayBuffer: buffer_1.Buffer.from(decrypted),\n        };\n    }\n    async encryptFile(toEncrypt, channel) {\n        // Generate a secure random nonce for both the PRF and the secretbox\n        const prfNonceBytes = (0, crypto_1.randomBytes)(PRF_NONCE_LENGTH);\n        const prf = channel ? await this.requestPRF(channel, \"encryption/\" + buffer_1.Buffer.from(prfNonceBytes).toString(\"hex\") + \"/encryption\") : await this.vaultysId.hmac(\"prf|encryption/\" + prfNonceBytes.toString(\"hex\") + \"/encryption|prf\");\n        if (prf?.length !== PRF_NONCE_LENGTH) {\n            return null;\n        }\n        // Use sha256 hash of the PRF as the secretbox key (must be 32 bytes)\n        const secretKey = (0, crypto_1.hash)(\"sha256\", prf);\n        (0, crypto_1.secureErase)(prf);\n        // Generate a random nonce for secretbox encryption\n        const nonceBytes = tweetnacl_1.default.randomBytes(tweetnacl_1.default.secretbox.nonceLength);\n        // Encrypt using nacl.secretbox\n        const ciphertext = tweetnacl_1.default.secretbox(new Uint8Array(toEncrypt.arrayBuffer), nonceBytes, secretKey);\n        (0, crypto_1.secureErase)(secretKey);\n        // Combine encryption nonce and ciphertext into a single buffer\n        const result = new Uint8Array(ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH + nonceBytes.length + ciphertext.length);\n        result.set(ENCRYPTION_HEADER);\n        result.set(prfNonceBytes, ENCRYPTION_HEADER.length);\n        result.set(nonceBytes, ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH);\n        result.set(ciphertext, ENCRYPTION_HEADER.length + PRF_NONCE_LENGTH + nonceBytes.length);\n        return {\n            name: toEncrypt.name,\n            type: toEncrypt.type,\n            arrayBuffer: buffer_1.Buffer.from(result), // Buffer contains secretbox nonce + ciphertext\n        };\n    }\n    getSignatures() {\n        const store = this.store.substore(\"signatures\");\n        return store\n            .list()\n            .sort()\n            .map((date) => {\n            const payload = store.get(date);\n            const challenge = buffer_1.Buffer.from(payload.challenge).toString(\"utf-8\");\n            return {\n                date,\n                payload,\n                challenge,\n                type: getSignatureType(challenge),\n            };\n        });\n    }\n    migrate(version) {\n        this.vaultysId.toVersion(version);\n        const s = this.store.substore(\"contacts\");\n        for (const did of s.list()) {\n            const data = s.get(did);\n            const contact = instanciateContact(data);\n            const newContact = contact.toVersion(version);\n            if (newContact.did !== did) {\n                s.set(newContact.did, { ...contact, ...newContact, metadata: data.metadata, oldDid: did });\n                s.delete(did);\n                //console.log(did, \"->\", newContact.did);\n            }\n        }\n        const apps = this.store.substore(\"registrations\");\n        for (const did of apps.list()) {\n            const data = apps.get(did);\n            const site = instanciateApp(data);\n            if (site) {\n                const newSite = site.toVersion(version);\n                if (newSite.did !== did) {\n                    const name = data.site === did ? newSite.did : data.site;\n                    apps.set(newSite.did, { site: name, oldDid: did, serverId: newSite.id.toString(\"base64\"), certificate: data.certificate, timestamp: data.timestamp });\n                    apps.delete(did);\n                    // console.log(did, \"->\", newSite.did);\n                }\n            }\n        }\n        this.store.save();\n    }\n    async verifyChallenge(challenge, signature) {\n        return this.vaultysId.verifyChallenge(challenge, signature, true);\n    }\n    async upload(channel, stream) {\n        const challenger = await this.startSRP(channel, \"p2p\", \"transfer\");\n        if (challenger.isComplete()) {\n            const { upload } = (0, MemoryChannel_1.StreamChannel)(channel);\n            await upload(stream);\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async download(channel, stream) {\n        const challenger = await this.acceptSRP(channel, \"p2p\", \"transfer\");\n        if (challenger.isComplete()) {\n            const { download } = (0, MemoryChannel_1.StreamChannel)(channel);\n            await download(stream);\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async requestDecrypt(channel, toDecrypt) {\n        const challenger = await this.acceptSRP(channel, \"p2p\", \"decrypt\");\n        if (challenger.isComplete()) {\n            channel.send(toDecrypt);\n            const new_encrypted = await channel.receive();\n            const decrypted = await this.vaultysId.dhiesDecrypt(new_encrypted, challenger.getContactId().id);\n            return decrypted;\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async acceptDecrypt(channel, accept) {\n        const challenger = await this.startSRP(channel, \"p2p\", \"decrypt\", {}, accept);\n        if (challenger.isComplete()) {\n            const toDecrypt = await channel.receive();\n            const decrypted = await this.vaultysId.decrypt(toDecrypt.toString(\"utf-8\"));\n            if (decrypted) {\n                const encrypted = await this.vaultysId.dhiesEncrypt(decrypted, challenger.getContactId().id);\n                channel.send(encrypted ?? buffer_1.Buffer.from([0]));\n            }\n            else\n                channel.send(buffer_1.Buffer.from([0]));\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async requestDecryptFile(channel, toDecrypt) {\n        return this.decryptFile(toDecrypt, channel);\n    }\n    async requestEncryptFile(channel, toEncrypt) {\n        return this.encryptFile(toEncrypt, channel);\n    }\n    async acceptDecryptFile(channel, accept) {\n        let result_contact = null;\n        await this.acceptPRF(channel, (contact, appid) => {\n            if (appid.length > 63 && appid.startsWith(\"encryption/\") && appid.endsWith(\"/encryption\")) {\n                result_contact = contact;\n                //TODO: maybe by default should be in web of trust?\n                return accept?.(contact) || Promise.resolve(true);\n            }\n            else\n                return Promise.resolve(false);\n        });\n        return result_contact;\n    }\n    async requestSignFile(channel, file) {\n        const challenger = await this.acceptSRP(channel, \"p2p\", \"signfile\");\n        if (challenger.isComplete()) {\n            channel.send(buffer_1.Buffer.from((0, msgpack_1.encode)(file)));\n            const result = await channel.receive();\n            const fileSignature = (0, msgpack_1.decode)(result);\n            if (this.verifyFile(file, fileSignature, challenger.getContactId().toVersion(1))) {\n                return fileSignature;\n            }\n            else\n                return undefined;\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async acceptSignFile(channel, accept) {\n        const challenger = await this.startSRP(channel, \"p2p\", \"signfile\");\n        if (challenger.isComplete()) {\n            const result = await channel.receive();\n            const file = (0, msgpack_1.decode)(result);\n            if (!accept || (await accept(challenger.getContactId(), file))) {\n                const result = await this.signFile(file);\n                channel.send(buffer_1.Buffer.from((0, msgpack_1.encode)(result)));\n            }\n            else\n                channel.send(buffer_1.Buffer.from([0]));\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async requestPRF(channel, appid) {\n        if (appid.length < 3) {\n            throw new Error(\"appid is too short, less than 3 characters\");\n        }\n        if (appid.split(\"|\").length > 1) {\n            throw new Error(\"appid contains illegal character |\");\n        }\n        const challenger = await this.acceptSRP(channel, \"p2p\", \"prf\");\n        if (challenger.isComplete()) {\n            channel.send(buffer_1.Buffer.from(appid, \"utf-8\"));\n            const prf = await channel.receive();\n            return buffer_1.Buffer.from(prf);\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    async acceptPRF(channel, accept) {\n        const challenger = await this.startSRP(channel, \"p2p\", \"prf\");\n        if (challenger.isComplete()) {\n            const result = await channel.receive();\n            const appid = result.toString(\"utf-8\");\n            if (appid.length < 3 || appid.split(\"|\").length > 1) {\n                // error if appid is too short or contains illegal character\n                channel.send(buffer_1.Buffer.from([0]));\n            }\n            else if (!accept || (await accept(challenger.getContactId(), appid))) {\n                const hmac = (await this.vaultysId.hmac(\"prf|\" + appid + \"|prf\")) ?? buffer_1.Buffer.from([0]);\n                channel.send(hmac);\n                (0, crypto_1.secureErase)(hmac);\n            }\n            else\n                channel.send(buffer_1.Buffer.from([0]));\n        }\n        else\n            channel.send(buffer_1.Buffer.from([0]));\n    }\n    /***************************/\n    /*   SIGNING PARTY HERE!   */\n    /***************************/\n    listCertificates() {\n        const wot = this.store.substore(\"wot\");\n        return wot.list().map((timestamp) => {\n            const c = wot.get(timestamp);\n            if (c.timestamp) {\n                return c;\n            }\n            else {\n                const result = {\n                    ...Challenger_1.default.deserializeCertificate(wot.get(timestamp)),\n                    raw: c,\n                };\n                wot.set(timestamp, result);\n                return result;\n            }\n        });\n    }\n    async startSRP(channel, protocol, service, metadata = {}, accept) {\n        const challenger = new Challenger_1.default(this.vaultysId);\n        challenger.createChallenge(protocol, service, this.protocol_version, metadata);\n        //console.log(challenger);\n        const cert = challenger.getCertificate();\n        if (!cert) {\n            channel.close();\n            channel.send(buffer_1.Buffer.from([0]));\n            throw new Error(\"Error processing challenge\");\n        }\n        channel.send(cert);\n        try {\n            const message = await channel.receive();\n            // console.log(\"startSRP\", message)\n            const contact = Challenger_1.default.deserializeCertificate(message).pk2;\n            if (!contact) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"Contact pk2 is not sent\");\n            }\n            if (accept && !(await accept(VaultysId_1.default.fromId(contact)))) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"Contact refused\");\n            }\n            await challenger.update(message);\n        }\n        catch (error) {\n            channel.send(buffer_1.Buffer.from([0]));\n            throw new Error(error);\n        }\n        if (challenger.isComplete()) {\n            const certificate = challenger.getCertificate();\n            if (!certificate) {\n                channel.close();\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"Error processing challenge\");\n            }\n            // there is a caveat here, we are not sure that the last bit of information has been received\n            channel.send(certificate);\n            this.store.substore(\"wot\").set(Date.now() + \"\", certificate);\n            // TODO create/update merkle tree + sign it\n            return challenger;\n        }\n        else {\n            channel.send(buffer_1.Buffer.from([0]));\n            throw new Error(\"Can't add a new contact if the protocol is not complete\");\n        }\n    }\n    async acceptSRP(channel, protocol, service, metadata = {}, accept) {\n        const challenger = new Challenger_1.default(this.vaultysId);\n        try {\n            const message = await channel.receive();\n            const chal = Challenger_1.default.deserializeCertificate(message);\n            if (!chal.pk1) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"Contact pk1 is not sent\");\n            }\n            if (chal.protocol !== protocol) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"protocol is not the one expected: \" + chal.protocol + \" !=\" + protocol);\n            }\n            if (chal.service !== service) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"service is not the one expected: \" + chal.service + \" !=\" + service);\n            }\n            if (accept && !(await accept(VaultysId_1.default.fromId(chal.pk1)))) {\n                channel.send(buffer_1.Buffer.from([0]));\n                throw new Error(\"Contact refused\");\n            }\n            await challenger.update(message, metadata);\n        }\n        catch (error) {\n            channel.send(buffer_1.Buffer.from([0]));\n            throw new Error(error);\n        }\n        const cert = challenger.getCertificate();\n        if (!cert) {\n            channel.send(buffer_1.Buffer.from([0]));\n            await channel.close();\n            throw new Error(\"Error processing challenge\");\n        }\n        // console.log(\"acceptSRP sending 1\")\n        channel.send(cert);\n        // console.log(\"acceptSRP sending 2\")\n        try {\n            const message = await channel.receive();\n            // console.log(\"acceptSRP 2\", message)\n            await challenger.update(message);\n        }\n        catch (error) {\n            await channel.close();\n            //console.log(challenger);\n            throw new Error(error);\n        }\n        if (challenger.isComplete()) {\n            const certificate = challenger.getCertificate();\n            this.store.substore(\"wot\").set(Date.now() + \"\", certificate);\n            // TODO create/update merkle tree + sign it\n            return challenger;\n        }\n        else {\n            await channel.close();\n            throw new Error(\"Can't add a new contact if the protocol is not complete\");\n        }\n    }\n    saveApp(app, name) {\n        app.toVersion(this.vaultysId.version);\n        if (!app.isMachine()) {\n            this.saveContact(app);\n        }\n        else {\n            const appstore = this.store.substore(\"registrations\");\n            if (!appstore.get(app.did)) {\n                appstore.set(app.did, {\n                    site: name ?? app.did,\n                    serverId: app.id.toString(\"base64\"),\n                    certificate: app.certificate,\n                });\n            }\n        }\n    }\n    saveContact(contact) {\n        contact.toVersion(this.vaultysId.version);\n        if (contact.isMachine()) {\n            this.saveApp(contact);\n        }\n        else {\n            const contactstore = this.store.substore(\"contacts\");\n            if (!contactstore.get(contact.did)) {\n                contactstore.set(contact.did, contact);\n                this.store.save();\n            }\n        }\n    }\n    async askContact(channel, metadata = {}, accept) {\n        const challenger = await this.startSRP(channel, \"p2p\", \"auth\", metadata, accept);\n        const contact = challenger.getContactId();\n        this.saveContact(contact);\n        return contact;\n    }\n    async acceptContact(channel, metadata = {}, accept) {\n        const challenger = await this.acceptSRP(channel, \"p2p\", \"auth\", metadata, accept);\n        const contact = challenger.getContactId();\n        this.saveContact(contact);\n        return contact;\n    }\n}\nexports.default = IdManager;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n","'use strict'\n\nconst stream = require('stream')\nconst {Buffer} = require('buffer')\nconst td = new TextDecoder('utf8', {fatal: true, ignoreBOM: true})\n\n/**\n * @typedef {object} NoFilterOptions\n * @property {string|Buffer} [input=null] Input source data.\n * @property {BufferEncoding} [inputEncoding=null] Encoding name for input,\n *   ignored if input is not a String.\n * @property {number} [highWaterMark=16384] The maximum number of bytes to\n *   store in the internal buffer before ceasing to read from the underlying\n *   resource. Default=16kb, or 16 for objectMode streams.\n * @property {BufferEncoding} [encoding=null] If specified, then buffers\n *   will be decoded to strings using the specified encoding.\n * @property {boolean} [objectMode=false] Whether this stream should behave\n *   as a stream of objects. Meaning that stream.read(n) returns a single\n *   value instead of a Buffer of size n.\n * @property {boolean} [decodeStrings=true] Whether or not to decode\n *   strings into Buffers before passing them to _write().\n * @property {boolean} [watchPipe=true] Whether to watch for 'pipe' events,\n *   setting this stream's objectMode based on the objectMode of the input\n *   stream.\n * @property {boolean} [readError=false] If true, when a read() underflows,\n *   throw an error.\n * @property {boolean} [allowHalfOpen=true] If set to false, then the\n *   stream will automatically end the writable side when the readable side\n *   ends.\n * @property {boolean} [autoDestroy=true] Whether this stream should\n *   automatically call .destroy() on itself after ending.\n * @property {BufferEncoding} [defaultEncoding='utf8'] The default encoding\n *   that is used when no encoding is specified as an argument to\n *   stream.write().\n * @property {boolean} [emitClose=true] Whether or not the stream should\n *   emit 'close' after it has been destroyed.\n * @property {number} [readableHighWaterMark] Sets highWaterMark for the\n *   readable side of the stream. Has no effect if highWaterMark is provided.\n * @property {boolean} [readableObjectMode=false] Sets objectMode for\n *   readable side of the stream. Has no effect if objectMode is true.\n * @property {number} [writableHighWaterMark] Sets highWaterMark for the\n *   writable side of the stream. Has no effect if highWaterMark is provided.\n * @property {boolean} [writableObjectMode=false] Sets objectMode for\n *   writable side of the stream. Has no effect if objectMode is true.\n */\n\n/**\n * NoFilter stream.  Can be used to sink or source data to and from\n * other node streams.  Implemented as the \"identity\" Transform stream\n * (hence the name), but allows for inspecting data that is in-flight.\n *\n * Allows passing in source data (input, inputEncoding) at creation\n * time.  Source data can also be passed in the options object.\n *\n * @example <caption>source and sink</caption>\n * const source = new NoFilter('Zm9v', 'base64')\n * source.pipe(process.stdout)\n * const sink = new Nofilter()\n * // NOTE: 'finish' fires when the input is done writing\n * sink.on('finish', () => console.log(n.toString('base64')))\n * process.stdin.pipe(sink)\n */\nclass NoFilter extends stream.Transform {\n  /**\n   * Create an instance of NoFilter.\n   *\n   * @param {string|Buffer|BufferEncoding|NoFilterOptions} [input] Source data.\n   * @param {BufferEncoding|NoFilterOptions} [inputEncoding] Encoding\n   *   name for input, ignored if input is not a String.\n   * @param {NoFilterOptions} [options] Other options.\n   */\n  constructor(input, inputEncoding, options = {}) {\n    let inp = null\n    let inpE = /** @type {BufferEncoding?} */ (null)\n    switch (typeof input) {\n      case 'object':\n        if (Buffer.isBuffer(input)) {\n          inp = input\n        } else if (input) {\n          options = input\n        }\n        break\n      case 'string':\n        inp = input\n        break\n      case 'undefined':\n        break\n      default:\n        throw new TypeError('Invalid input')\n    }\n    switch (typeof inputEncoding) {\n      case 'object':\n        if (inputEncoding) {\n          options = inputEncoding\n        }\n        break\n      case 'string':\n        inpE = /** @type {BufferEncoding} */ (inputEncoding)\n        break\n      case 'undefined':\n        break\n      default:\n        throw new TypeError('Invalid inputEncoding')\n    }\n    if (!options || typeof options !== 'object') {\n      throw new TypeError('Invalid options')\n    }\n    if (inp == null) {\n      inp = options.input\n    }\n    if (inpE == null) {\n      inpE = options.inputEncoding\n    }\n    delete options.input\n    delete options.inputEncoding\n    const watchPipe = options.watchPipe == null ? true : options.watchPipe\n    delete options.watchPipe\n    const readError = Boolean(options.readError)\n    delete options.readError\n    super(options)\n\n    this.readError = readError\n\n    if (watchPipe) {\n      this.on('pipe', readable => {\n        // @ts-ignore: TS2339 (using internal interface)\n        const om = readable._readableState.objectMode\n        // @ts-ignore: TS2339 (using internal interface)\n        if ((this.length > 0) && (om !== this._readableState.objectMode)) {\n          throw new Error(\n            'Do not switch objectMode in the middle of the stream'\n          )\n        }\n\n        // @ts-ignore: TS2339 (using internal interface)\n        this._readableState.objectMode = om\n        // @ts-ignore: TS2339 (using internal interface)\n        this._writableState.objectMode = om\n      })\n    }\n\n    if (inp != null) {\n      this.end(inp, inpE)\n    }\n  }\n\n  /**\n   * Is the given object a {NoFilter}?\n   *\n   * @param {object} obj The object to test.\n   * @returns {boolean} True if obj is a NoFilter.\n   */\n  static isNoFilter(obj) {\n    return obj instanceof this\n  }\n\n  /**\n   * The same as nf1.compare(nf2). Useful for sorting an Array of NoFilters.\n   *\n   * @param {NoFilter} nf1 The first object to compare.\n   * @param {NoFilter} nf2 The second object to compare.\n   * @returns {number} -1, 0, 1 for less, equal, greater.\n   * @throws {TypeError} Arguments not NoFilter instances.\n   * @example\n   * const arr = [new NoFilter('1234'), new NoFilter('0123')]\n   * arr.sort(NoFilter.compare)\n   */\n  static compare(nf1, nf2) {\n    if (!(nf1 instanceof this)) {\n      throw new TypeError('Arguments must be NoFilters')\n    }\n    if (nf1 === nf2) {\n      return 0\n    }\n    return nf1.compare(nf2)\n  }\n\n  /**\n   * Returns a buffer which is the result of concatenating all the\n   * NoFilters in the list together. If the list has no items, or if\n   * the totalLength is 0, then it returns a zero-length buffer.\n   *\n   * If length is not provided, it is read from the buffers in the\n   * list. However, this adds an additional loop to the function, so\n   * it is faster to provide the length explicitly if you already know it.\n   *\n   * @param {Array<NoFilter>} list Inputs.  Must not be all either in object\n   *   mode, or all not in object mode.\n   * @param {number} [length=null] Number of bytes or objects to read.\n   * @returns {Buffer|Array} The concatenated values as an array if in object\n   *   mode, otherwise a Buffer.\n   * @throws {TypeError} List not array of NoFilters.\n   */\n  static concat(list, length) {\n    if (!Array.isArray(list)) {\n      throw new TypeError('list argument must be an Array of NoFilters')\n    }\n    if ((list.length === 0) || (length === 0)) {\n      return Buffer.alloc(0)\n    }\n    if ((length == null)) {\n      length = list.reduce((tot, nf) => {\n        if (!(nf instanceof NoFilter)) {\n          throw new TypeError('list argument must be an Array of NoFilters')\n        }\n        return tot + nf.length\n      }, 0)\n    }\n    let allBufs = true\n    let allObjs = true\n    const bufs = list.map(nf => {\n      if (!(nf instanceof NoFilter)) {\n        throw new TypeError('list argument must be an Array of NoFilters')\n      }\n      const buf = nf.slice()\n      if (Buffer.isBuffer(buf)) {\n        allObjs = false\n      } else {\n        allBufs = false\n      }\n      return buf\n    })\n    if (allBufs) {\n      // @ts-ignore: TS2322, tsc can't see the type checking above\n      return Buffer.concat(bufs, length)\n    }\n    if (allObjs) {\n      return [].concat(...bufs).slice(0, length)\n    }\n    // TODO: maybe coalesce buffers, counting bytes, and flatten in arrays\n    // counting objects?  I can't imagine why that would be useful.\n    throw new Error('Concatenating mixed object and byte streams not supported')\n  }\n\n  /**\n   * @ignore\n   */\n  _transform(chunk, encoding, callback) {\n    // @ts-ignore: TS2339 (using internal interface)\n    if (!this._readableState.objectMode && !Buffer.isBuffer(chunk)) {\n      chunk = Buffer.from(chunk, encoding)\n    }\n    this.push(chunk)\n    callback()\n  }\n\n  /**\n   * @returns {Buffer[]} The current internal buffers.  They are layed out\n   *   end to end.\n   * @ignore\n   */\n  _bufArray() {\n    // @ts-ignore: TS2339 (using internal interface)\n    let bufs = this._readableState.buffer\n    // HACK: replace with something else one day.  This is what I get for\n    // relying on internals.\n    if (!Array.isArray(bufs)) {\n      let b = bufs.head\n      bufs = []\n      while (b != null) {\n        bufs.push(b.data)\n        b = b.next\n      }\n    }\n    return bufs\n  }\n\n  /**\n   * Pulls some data out of the internal buffer and returns it.\n   * If there is no data available, then it will return null.\n   *\n   * If you pass in a size argument, then it will return that many bytes. If\n   * size bytes are not available, then it will return null, unless we've\n   * ended, in which case it will return the data remaining in the buffer.\n   *\n   * If you do not specify a size argument, then it will return all the data in\n   * the internal buffer.\n   *\n   * @param {number} [size=null] Number of bytes to read.\n   * @returns {string|Buffer|null} If no data or not enough data, null.  If\n   *   decoding output a string, otherwise a Buffer.\n   * @throws Error If readError is true and there was underflow.\n   * @fires NoFilter#read When read from.\n   */\n  read(size) {\n    const buf = super.read(size)\n    if (buf != null) {\n      /**\n       * Read event. Fired whenever anything is read from the stream.\n       *\n       * @event NoFilter#read\n       * @param {Buffer|string|object} buf What was read.\n       */\n      this.emit('read', buf)\n      if (this.readError && (buf.length < size)) {\n        throw new Error(`Read ${buf.length}, wanted ${size}`)\n      }\n    } else if (this.readError) {\n      throw new Error(`No data available, wanted ${size}`)\n    }\n    return buf\n  }\n\n  /**\n   * Read the full number of bytes asked for, no matter how long it takes.\n   * Fail if an error occurs in the meantime, or if the stream finishes before\n   * enough data is available.\n   *\n   * Note: This function won't work fully correctly if you are using\n   * stream-browserify (for example, on the Web).\n   *\n   * @param {number} size The number of bytes to read.\n   * @returns {Promise<string|Buffer>} A promise for the data read.\n   */\n  readFull(size) {\n    let onReadable = null\n    let onFinish = null\n    let onError = null\n    return new Promise((resolve, reject) => {\n      if (this.length >= size) {\n        resolve(this.read(size))\n        return\n      }\n\n      // Added in Node 12.19.  This won't work with stream-browserify yet.\n      // If it's needed, file a bug, and I'll do a work-around.\n      if (this.writableFinished) {\n        // Already finished writing, so no more coming.\n        reject(new Error(`Stream finished before ${size} bytes were available`))\n        return\n      }\n\n      onReadable = chunk => {\n        if (this.length >= size) {\n          resolve(this.read(size))\n        }\n      }\n      onFinish = () => {\n        reject(new Error(`Stream finished before ${size} bytes were available`))\n      }\n      onError = reject\n      this.on('readable', onReadable)\n      this.on('error', onError)\n      this.on('finish', onFinish)\n    }).finally(() => {\n      if (onReadable) {\n        this.removeListener('readable', onReadable)\n        this.removeListener('error', onError)\n        this.removeListener('finish', onFinish)\n      }\n    })\n  }\n\n  /**\n   * Return a promise fulfilled with the full contents, after the 'finish'\n   * event fires.  Errors on the stream cause the promise to be rejected.\n   *\n   * @param {Function} [cb=null] Finished/error callback used in *addition*\n   *   to the promise.\n   * @returns {Promise<Buffer|string>} Fulfilled when complete.\n   */\n  promise(cb) {\n    let done = false\n    return new Promise((resolve, reject) => {\n      this.on('finish', () => {\n        const data = this.read()\n        if ((cb != null) && !done) {\n          done = true\n          cb(null, data)\n        }\n        resolve(data)\n      })\n      this.on('error', er => {\n        if ((cb != null) && !done) {\n          done = true\n          cb(er)\n        }\n        reject(er)\n      })\n    })\n  }\n\n  /**\n   * Returns a number indicating whether this comes before or after or is the\n   * same as the other NoFilter in sort order.\n   *\n   * @param {NoFilter} other The other object to compare.\n   * @returns {number} -1, 0, 1 for less, equal, greater.\n   * @throws {TypeError} Arguments must be NoFilters.\n   */\n  compare(other) {\n    if (!(other instanceof NoFilter)) {\n      throw new TypeError('Arguments must be NoFilters')\n    }\n    if (this === other) {\n      return 0\n    }\n\n    const buf1 = this.slice()\n    const buf2 = other.slice()\n    // These will both be buffers because of the check above.\n    if (Buffer.isBuffer(buf1) && Buffer.isBuffer(buf2)) {\n      return buf1.compare(buf2)\n    }\n    throw new Error('Cannot compare streams in object mode')\n  }\n\n  /**\n   * Do these NoFilter's contain the same bytes?  Doesn't work if either is\n   * in object mode.\n   *\n   * @param {NoFilter} other Other NoFilter to compare against.\n   * @returns {boolean} Equal?\n   */\n  equals(other) {\n    return this.compare(other) === 0\n  }\n\n  /**\n   * Read bytes or objects without consuming them.  Useful for diagnostics.\n   * Note: as a side-effect, concatenates multiple writes together into what\n   * looks like a single write, so that this concat doesn't have to happen\n   * multiple times when you're futzing with the same NoFilter.\n   *\n   * @param {number} [start=0] Beginning offset.\n   * @param {number} [end=length] Ending offset.\n   * @returns {Buffer|Array} If in object mode, an array of objects.  Otherwise,\n   *   concatenated array of contents.\n   */\n  slice(start, end) {\n    // @ts-ignore: TS2339 (using internal interface)\n    if (this._readableState.objectMode) {\n      return this._bufArray().slice(start, end)\n    }\n    const bufs = this._bufArray()\n    switch (bufs.length) {\n      case 0: return Buffer.alloc(0)\n      case 1: return bufs[0].slice(start, end)\n      default: {\n        const b = Buffer.concat(bufs)\n        // TODO: store the concatented bufs back\n        // @_readableState.buffer = [b]\n        return b.slice(start, end)\n      }\n    }\n  }\n\n  /**\n   * Get a byte by offset.  I didn't want to get into metaprogramming\n   * to give you the `NoFilter[0]` syntax.\n   *\n   * @param {number} index The byte to retrieve.\n   * @returns {number} 0-255.\n   */\n  get(index) {\n    return this.slice()[index]\n  }\n\n  /**\n   * Return an object compatible with Buffer's toJSON implementation, so that\n   * round-tripping will produce a Buffer.\n   *\n   * @returns {string|Array|{type: 'Buffer',data: number[]}} If in object mode,\n   *   the objects.  Otherwise, JSON text.\n   * @example <caption>output for 'foo', not in object mode</caption>\n   * ({\n   *   type: 'Buffer',\n   *   data: [102, 111, 111],\n   * })\n   */\n  toJSON() {\n    const b = this.slice()\n    if (Buffer.isBuffer(b)) {\n      return b.toJSON()\n    }\n    return b\n  }\n\n  /**\n   * Decodes and returns a string from buffer data encoded using the specified\n   * character set encoding. If encoding is undefined or null, then encoding\n   * defaults to 'utf8'. The start and end parameters default to 0 and\n   * NoFilter.length when undefined.\n   *\n   * @param {BufferEncoding} [encoding='utf8'] Which to use for decoding?\n   * @param {number} [start=0] Start offset.\n   * @param {number} [end=length] End offset.\n   * @returns {string} String version of the contents.\n   */\n  toString(encoding, start, end) {\n    const buf = this.slice(start, end)\n    if (!Buffer.isBuffer(buf)) {\n      return JSON.stringify(buf)\n    }\n    if (!encoding || (encoding === 'utf8')) {\n      return td.decode(buf)\n    }\n    return buf.toString(encoding)\n  }\n\n  /**\n   * @ignore\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](depth, options) {\n    const bufs = this._bufArray()\n    const hex = bufs.map(b => {\n      if (Buffer.isBuffer(b)) {\n        return options.stylize(b.toString('hex'), 'string')\n      }\n      return JSON.stringify(b)\n    }).join(', ')\n    return `${this.constructor.name} [${hex}]`\n  }\n\n  /**\n   * Current readable length, in bytes.\n   *\n   * @returns {number} Length of the contents.\n   */\n  get length() {\n    // @ts-ignore: TS2339 (using internal interface)\n    return this._readableState.length\n  }\n\n  /**\n   * Write a JavaScript BigInt to the stream.  Negative numbers will be\n   * written as their 2's complement version.\n   *\n   * @param {bigint} val The value to write.\n   * @returns {boolean} True on success.\n   */\n  writeBigInt(val) {\n    let str = val.toString(16)\n    if (val < 0) {\n      // Two's complement\n      // Note: str always starts with '-' here.\n      const sz = BigInt(Math.floor(str.length / 2))\n      const mask = BigInt(1) << (sz * BigInt(8))\n      val = mask + val\n      str = val.toString(16)\n    }\n    if (str.length % 2) {\n      str = `0${str}`\n    }\n    return this.push(Buffer.from(str, 'hex'))\n  }\n\n  /**\n   * Read a variable-sized JavaScript unsigned BigInt from the stream.\n   *\n   * @param {number} [len=null] Number of bytes to read or all remaining\n   *   if null.\n   * @returns {bigint} A BigInt.\n   */\n  readUBigInt(len) {\n    const b = this.read(len)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return BigInt(`0x${b.toString('hex')}`)\n  }\n\n  /**\n   * Read a variable-sized JavaScript signed BigInt from the stream in 2's\n   * complement format.\n   *\n   * @param {number} [len=null] Number of bytes to read or all remaining\n   *   if null.\n   * @returns {bigint} A BigInt.\n   */\n  readBigInt(len) {\n    const b = this.read(len)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    let ret = BigInt(`0x${b.toString('hex')}`)\n    // Negative?\n    if (b[0] & 0x80) {\n      // Two's complement\n      const mask = BigInt(1) << (BigInt(b.length) * BigInt(8))\n      ret -= mask\n    }\n    return ret\n  }\n\n  /**\n   * Write an 8-bit unsigned integer to the stream.  Adds 1 byte.\n   *\n   * @param {number} value 0..255.\n   * @returns {boolean} True on success.\n   */\n  writeUInt8(value) {\n    const b = Buffer.from([value])\n    return this.push(b)\n  }\n\n  /**\n   * Write a little-endian 16-bit unsigned integer to the stream.  Adds\n   * 2 bytes.\n   *\n   * @param {number} value 0..65535.\n   * @returns {boolean} True on success.\n   */\n  writeUInt16LE(value) {\n    const b = Buffer.alloc(2)\n    b.writeUInt16LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a big-endian 16-bit unsigned integer to the stream.  Adds\n   * 2 bytes.\n   *\n   * @param {number} value 0..65535.\n   * @returns {boolean} True on success.\n   */\n  writeUInt16BE(value) {\n    const b = Buffer.alloc(2)\n    b.writeUInt16BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a little-endian 32-bit unsigned integer to the stream.  Adds\n   * 4 bytes.\n   *\n   * @param {number} value 0..2**32-1.\n   * @returns {boolean} True on success.\n   */\n  writeUInt32LE(value) {\n    const b = Buffer.alloc(4)\n    b.writeUInt32LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a big-endian 32-bit unsigned integer to the stream.  Adds\n   * 4 bytes.\n   *\n   * @param {number} value 0..2**32-1.\n   * @returns {boolean} True on success.\n   */\n  writeUInt32BE(value) {\n    const b = Buffer.alloc(4)\n    b.writeUInt32BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed 8-bit integer to the stream.  Adds 1 byte.\n   *\n   * @param {number} value (-128)..127.\n   * @returns {boolean} True on success.\n   */\n  writeInt8(value) {\n    const b = Buffer.from([value])\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed little-endian 16-bit integer to the stream.  Adds 2 bytes.\n   *\n   * @param {number} value (-32768)..32767.\n   * @returns {boolean} True on success.\n   */\n  writeInt16LE(value) {\n    const b = Buffer.alloc(2)\n    b.writeUInt16LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed big-endian 16-bit integer to the stream.  Adds 2 bytes.\n   *\n   * @param {number} value (-32768)..32767.\n   * @returns {boolean} True on success.\n   */\n  writeInt16BE(value) {\n    const b = Buffer.alloc(2)\n    b.writeUInt16BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed little-endian 32-bit integer to the stream.  Adds 4 bytes.\n   *\n   * @param {number} value (-2**31)..(2**31-1).\n   * @returns {boolean} True on success.\n   */\n  writeInt32LE(value) {\n    const b = Buffer.alloc(4)\n    b.writeUInt32LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed big-endian 32-bit integer to the stream.  Adds 4 bytes.\n   *\n   * @param {number} value (-2**31)..(2**31-1).\n   * @returns {boolean} True on success.\n   */\n  writeInt32BE(value) {\n    const b = Buffer.alloc(4)\n    b.writeUInt32BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a little-endian 32-bit float to the stream.  Adds 4 bytes.\n   *\n   * @param {number} value 32-bit float.\n   * @returns {boolean} True on success.\n   */\n  writeFloatLE(value) {\n    const b = Buffer.alloc(4)\n    b.writeFloatLE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a big-endian 32-bit float to the stream.  Adds 4 bytes.\n   *\n   * @param {number} value 32-bit float.\n   * @returns {boolean} True on success.\n   */\n  writeFloatBE(value) {\n    const b = Buffer.alloc(4)\n    b.writeFloatBE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a little-endian 64-bit double to the stream.  Adds 8 bytes.\n   *\n   * @param {number} value 64-bit float.\n   * @returns {boolean} True on success.\n   */\n  writeDoubleLE(value) {\n    const b = Buffer.alloc(8)\n    b.writeDoubleLE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a big-endian 64-bit float to the stream.  Adds 8 bytes.\n   *\n   * @param {number} value 64-bit float.\n   * @returns {boolean} True on success.\n   */\n  writeDoubleBE(value) {\n    const b = Buffer.alloc(8)\n    b.writeDoubleBE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed little-endian 64-bit BigInt to the stream.  Adds 8 bytes.\n   *\n   * @param {bigint} value BigInt.\n   * @returns {boolean} True on success.\n   */\n  writeBigInt64LE(value) {\n    const b = Buffer.alloc(8)\n    b.writeBigInt64LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write a signed big-endian 64-bit BigInt to the stream.  Adds 8 bytes.\n   *\n   * @param {bigint} value BigInt.\n   * @returns {boolean} True on success.\n   */\n  writeBigInt64BE(value) {\n    const b = Buffer.alloc(8)\n    b.writeBigInt64BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write an unsigned little-endian 64-bit BigInt to the stream.  Adds 8 bytes.\n   *\n   * @param {bigint} value Non-negative BigInt.\n   * @returns {boolean} True on success.\n   */\n  writeBigUInt64LE(value) {\n    const b = Buffer.alloc(8)\n    b.writeBigUInt64LE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Write an unsigned big-endian 64-bit BigInt to the stream.  Adds 8 bytes.\n   *\n   * @param {bigint} value Non-negative BigInt.\n   * @returns {boolean} True on success.\n   */\n  writeBigUInt64BE(value) {\n    const b = Buffer.alloc(8)\n    b.writeBigUInt64BE(value)\n    return this.push(b)\n  }\n\n  /**\n   * Read an unsigned 8-bit integer from the stream.  Consumes 1 byte.\n   *\n   * @returns {number} Value read.\n   */\n  readUInt8() {\n    const b = this.read(1)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readUInt8()\n  }\n\n  /**\n   * Read a little-endian unsigned 16-bit integer from the stream.\n   * Consumes 2 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readUInt16LE() {\n    const b = this.read(2)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readUInt16LE()\n  }\n\n  /**\n   * Read a little-endian unsigned 16-bit integer from the stream.\n   * Consumes 2 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readUInt16BE() {\n    const b = this.read(2)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readUInt16BE()\n  }\n\n  /**\n   * Read a little-endian unsigned 32-bit integer from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readUInt32LE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readUInt32LE()\n  }\n\n  /**\n   * Read a little-endian unsigned 16-bit integer from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readUInt32BE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readUInt32BE()\n  }\n\n  /**\n   * Read a signed 8-bit integer from the stream.  Consumes 1 byte.\n   *\n   * @returns {number} Value read.\n   */\n  readInt8() {\n    const b = this.read(1)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readInt8()\n  }\n\n  /**\n   * Read a little-endian signed 16-bit integer from the stream.\n   * Consumes 2 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readInt16LE() {\n    const b = this.read(2)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readInt16LE()\n  }\n\n  /**\n   * Read a little-endian signed 16-bit integer from the stream.\n   * Consumes 2 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readInt16BE() {\n    const b = this.read(2)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readInt16BE()\n  }\n\n  /**\n   * Read a little-endian signed 32-bit integer from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readInt32LE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readInt32LE()\n  }\n\n  /**\n   * Read a little-endian signed 16-bit integer from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readInt32BE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readInt32BE()\n  }\n\n  /**\n   * Read a 32-bit little-endian float from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readFloatLE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readFloatLE()\n  }\n\n  /**\n   * Read a 32-bit big-endian float from the stream.\n   * Consumes 4 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readFloatBE() {\n    const b = this.read(4)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readFloatBE()\n  }\n\n  /**\n   * Read a 64-bit little-endian float from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readDoubleLE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readDoubleLE()\n  }\n\n  /**\n   * Read a 64-bit big-endian float from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {number} Value read.\n   */\n  readDoubleBE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readDoubleBE()\n  }\n\n  /**\n   * Read a signed 64-bit little-endian BigInt from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {bigint} Value read.\n   */\n  readBigInt64LE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readBigInt64LE()\n  }\n\n  /**\n   * Read a signed 64-bit big-endian BigInt from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {bigint} Value read.\n   */\n  readBigInt64BE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readBigInt64BE()\n  }\n\n  /**\n   * Read an unsigned 64-bit little-endian BigInt from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {bigint} Value read.\n   */\n  readBigUInt64LE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readBigUInt64LE()\n  }\n\n  /**\n   * Read an unsigned 64-bit big-endian BigInt from the stream.\n   * Consumes 8 bytes.\n   *\n   * @returns {bigint} Value read.\n   */\n  readBigUInt64BE() {\n    const b = this.read(8)\n    if (!Buffer.isBuffer(b)) {\n      return null\n    }\n    return b.readBigUInt64BE()\n  }\n}\n\nmodule.exports = NoFilter\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeToCurve = exports.hashToCurve = exports.secp384r1 = exports.p384 = void 0;\nconst nist_ts_1 = require(\"./nist.js\");\nexports.p384 = nist_ts_1.p384;\nexports.secp384r1 = nist_ts_1.p384;\nexports.hashToCurve = (() => nist_ts_1.p384_hasher.hashToCurve)();\nexports.encodeToCurve = (() => nist_ts_1.p384_hasher.encodeToCurve)();\n/** @deprecated Use `import { p384_hasher } from \"@noble/curves/nist\"` module. */\n//# sourceMappingURL=p384.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNegativeLE = void 0;\nexports.mod = mod;\nexports.pow = pow;\nexports.pow2 = pow2;\nexports.invert = invert;\nexports.tonelliShanks = tonelliShanks;\nexports.FpSqrt = FpSqrt;\nexports.validateField = validateField;\nexports.FpPow = FpPow;\nexports.FpInvertBatch = FpInvertBatch;\nexports.FpDiv = FpDiv;\nexports.FpLegendre = FpLegendre;\nexports.FpIsSquare = FpIsSquare;\nexports.nLength = nLength;\nexports.Field = Field;\nexports.FpSqrtOdd = FpSqrtOdd;\nexports.FpSqrtEven = FpSqrtEven;\nexports.hashToPrivateScalar = hashToPrivateScalar;\nexports.getFieldBytesLength = getFieldBytesLength;\nexports.getMinHashLength = getMinHashLength;\nexports.mapHashToField = mapHashToField;\n/**\n * Utils for modular division and fields.\n * Field over 11 is a finite (Galois) field is integer number operations `mod 11`.\n * There is no division: it is replaced by modular multiplicative inverse.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_ts_1 = require(\"../utils.js\");\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = /* @__PURE__ */ BigInt(2), _3n = /* @__PURE__ */ BigInt(3);\n// prettier-ignore\nconst _4n = /* @__PURE__ */ BigInt(4), _5n = /* @__PURE__ */ BigInt(5);\nconst _8n = /* @__PURE__ */ BigInt(8);\n// Calculates a modulo b\nfunction mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\nfunction pow(num, power, modulo) {\n    return FpPow(Field(modulo), num, power);\n}\n/** Does `x^(2^power)` mod p. `pow2(30, 4)` == `30^(2^4)` */\nfunction pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n/**\n * Inverses number over modulo.\n * Implemented using [Euclidean GCD](https://brilliant.org/wiki/extended-euclidean-algorithm/).\n */\nfunction invert(number, modulo) {\n    if (number === _0n)\n        throw new Error('invert: expected non-zero number');\n    if (modulo <= _0n)\n        throw new Error('invert: expected positive modulus, got ' + modulo);\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n// Not all roots are possible! Example which will throw:\n// const NUM =\n// n = 72057594037927816n;\n// Fp = Field(BigInt('0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab'));\nfunction sqrt3mod4(Fp, n) {\n    const p1div4 = (Fp.ORDER + _1n) / _4n;\n    const root = Fp.pow(n, p1div4);\n    // Throw if root^2 != n\n    if (!Fp.eql(Fp.sqr(root), n))\n        throw new Error('Cannot find square root');\n    return root;\n}\nfunction sqrt5mod8(Fp, n) {\n    const p5div8 = (Fp.ORDER - _5n) / _8n;\n    const n2 = Fp.mul(n, _2n);\n    const v = Fp.pow(n2, p5div8);\n    const nv = Fp.mul(n, v);\n    const i = Fp.mul(Fp.mul(nv, _2n), v);\n    const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n    if (!Fp.eql(Fp.sqr(root), n))\n        throw new Error('Cannot find square root');\n    return root;\n}\n// TODO: Commented-out for now. Provide test vectors.\n// Tonelli is too slow for extension fields Fp2.\n// That means we can't use sqrt (c1, c2...) even for initialization constants.\n// if (P % _16n === _9n) return sqrt9mod16;\n// // prettier-ignore\n// function sqrt9mod16<T>(Fp: IField<T>, n: T, p7div16?: bigint) {\n//   if (p7div16 === undefined) p7div16 = (Fp.ORDER + BigInt(7)) / _16n;\n//   const c1 = Fp.sqrt(Fp.neg(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n//   const c2 = Fp.sqrt(c1);             //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n//   const c3 = Fp.sqrt(Fp.neg(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n//   const c4 = p7div16;                 //  4. c4 = (q + 7) / 16        # Integer arithmetic\n//   let tv1 = Fp.pow(n, c4);            //  1. tv1 = x^c4\n//   let tv2 = Fp.mul(c1, tv1);          //  2. tv2 = c1 * tv1\n//   const tv3 = Fp.mul(c2, tv1);        //  3. tv3 = c2 * tv1\n//   let tv4 = Fp.mul(c3, tv1);          //  4. tv4 = c3 * tv1\n//   const e1 = Fp.eql(Fp.sqr(tv2), n);  //  5.  e1 = (tv2^2) == x\n//   const e2 = Fp.eql(Fp.sqr(tv3), n);  //  6.  e2 = (tv3^2) == x\n//   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n//   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n//   const e3 = Fp.eql(Fp.sqr(tv2), n);  //  9.  e3 = (tv2^2) == x\n//   return Fp.cmov(tv1, tv2, e3); // 10.  z = CMOV(tv1, tv2, e3) # Select the sqrt from tv1 and tv2\n// }\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nfunction tonelliShanks(P) {\n    // Initialization (precomputation).\n    // Caching initialization could boost perf by 7%.\n    if (P < BigInt(3))\n        throw new Error('sqrt is not defined for small field');\n    // Factor P - 1 = Q * 2^S, where Q is odd\n    let Q = P - _1n;\n    let S = 0;\n    while (Q % _2n === _0n) {\n        Q /= _2n;\n        S++;\n    }\n    // Find the first quadratic non-residue Z >= 2\n    let Z = _2n;\n    const _Fp = Field(P);\n    while (FpLegendre(_Fp, Z) === 1) {\n        // Basic primality test for P. After x iterations, chance of\n        // not finding quadratic non-residue is 2^x, so 2^1000.\n        if (Z++ > 1000)\n            throw new Error('Cannot find square root: probably non-prime P');\n    }\n    // Fast-path; usually done before Z, but we do \"primality test\".\n    if (S === 1)\n        return sqrt3mod4;\n    // Slow-path\n    // TODO: test on Fp2 and others\n    let cc = _Fp.pow(Z, Q); // c = z^Q\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        if (Fp.is0(n))\n            return n;\n        // Check if n is a quadratic residue using Legendre symbol\n        if (FpLegendre(Fp, n) !== 1)\n            throw new Error('Cannot find square root');\n        // Initialize variables for the main loop\n        let M = S;\n        let c = Fp.mul(Fp.ONE, cc); // c = z^Q, move cc from field _Fp into field Fp\n        let t = Fp.pow(n, Q); // t = n^Q, first guess at the fudge factor\n        let R = Fp.pow(n, Q1div2); // R = n^((Q+1)/2), first guess at the square root\n        // Main loop\n        // while t != 1\n        while (!Fp.eql(t, Fp.ONE)) {\n            if (Fp.is0(t))\n                return Fp.ZERO; // if t=0 return R=0\n            let i = 1;\n            // Find the smallest i >= 1 such that t^(2^i)  1 (mod P)\n            let t_tmp = Fp.sqr(t); // t^(2^1)\n            while (!Fp.eql(t_tmp, Fp.ONE)) {\n                i++;\n                t_tmp = Fp.sqr(t_tmp); // t^(2^2)...\n                if (i === M)\n                    throw new Error('Cannot find square root');\n            }\n            // Calculate the exponent for b: 2^(M - i - 1)\n            const exponent = _1n << BigInt(M - i - 1); // bigint is important\n            const b = Fp.pow(c, exponent); // b = 2^(M - i - 1)\n            // Update variables\n            M = i;\n            c = Fp.sqr(b); // c = b^2\n            t = Fp.mul(t, c); // t = (t * b^2)\n            R = Fp.mul(R, b); // R = R*b\n        }\n        return R;\n    };\n}\n/**\n * Square root for a finite field. Will try optimized versions first:\n *\n * 1. P  3 (mod 4)\n * 2. P  5 (mod 8)\n * 3. Tonelli-Shanks algorithm\n *\n * Different algorithms can give different roots, it is up to user to decide which one they want.\n * For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n */\nfunction FpSqrt(P) {\n    // P  3 (mod 4) => n = n^((P+1)/4)\n    if (P % _4n === _3n)\n        return sqrt3mod4;\n    // P  5 (mod 8) => Atkin algorithm, page 10 of https://eprint.iacr.org/2012/685.pdf\n    if (P % _8n === _5n)\n        return sqrt5mod8;\n    // P  9 (mod 16) not implemented, see above\n    // Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nconst isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\nexports.isNegativeLE = isNegativeLE;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nfunction validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'number',\n        BITS: 'number',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    (0, utils_ts_1._validateObject)(field, opts);\n    // const max = 16384;\n    // if (field.BYTES < 1 || field.BYTES > max) throw new Error('invalid field');\n    // if (field.BITS < 1 || field.BITS > 8 * max) throw new Error('invalid field');\n    return field;\n}\n// Generic field functions\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nfunction FpPow(Fp, num, power) {\n    if (power < _0n)\n        throw new Error('invalid exponent, negatives unsupported');\n    if (power === _0n)\n        return Fp.ONE;\n    if (power === _1n)\n        return num;\n    let p = Fp.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = Fp.mul(p, d);\n        d = Fp.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n/**\n * Efficiently invert an array of Field elements.\n * Exception-free. Will return `undefined` for 0 elements.\n * @param passZero map 0 to 0 (instead of undefined)\n */\nfunction FpInvertBatch(Fp, nums, passZero = false) {\n    const inverted = new Array(nums.length).fill(passZero ? Fp.ZERO : undefined);\n    // Walk from first to last, multiply them by each other MOD p\n    const multipliedAcc = nums.reduce((acc, num, i) => {\n        if (Fp.is0(num))\n            return acc;\n        inverted[i] = acc;\n        return Fp.mul(acc, num);\n    }, Fp.ONE);\n    // Invert last element\n    const invertedAcc = Fp.inv(multipliedAcc);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (Fp.is0(num))\n            return acc;\n        inverted[i] = Fp.mul(acc, inverted[i]);\n        return Fp.mul(acc, num);\n    }, invertedAcc);\n    return inverted;\n}\n// TODO: remove\nfunction FpDiv(Fp, lhs, rhs) {\n    return Fp.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, Fp.ORDER) : Fp.inv(rhs));\n}\n/**\n * Legendre symbol.\n * Legendre constant is used to calculate Legendre symbol (a | p)\n * which denotes the value of a^((p-1)/2) (mod p).\n *\n * * (a | p)  1    if a is a square (mod p), quadratic residue\n * * (a | p)  -1   if a is not a square (mod p), quadratic non residue\n * * (a | p)  0    if a  0 (mod p)\n */\nfunction FpLegendre(Fp, n) {\n    // We can use 3rd argument as optional cache of this value\n    // but seems unneeded for now. The operation is very fast.\n    const p1mod2 = (Fp.ORDER - _1n) / _2n;\n    const powered = Fp.pow(n, p1mod2);\n    const yes = Fp.eql(powered, Fp.ONE);\n    const zero = Fp.eql(powered, Fp.ZERO);\n    const no = Fp.eql(powered, Fp.neg(Fp.ONE));\n    if (!yes && !zero && !no)\n        throw new Error('invalid Legendre symbol result');\n    return yes ? 1 : zero ? 0 : -1;\n}\n// This function returns True whenever the value x is a square in the field F.\nfunction FpIsSquare(Fp, n) {\n    const l = FpLegendre(Fp, n);\n    return l === 1;\n}\n// CURVE.n lengths\nfunction nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    if (nBitLength !== undefined)\n        (0, utils_ts_1.anumber)(nBitLength);\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Creates a finite field. Major performance optimizations:\n * * 1. Denormalized operations like mulN instead of mul.\n * * 2. Identical object shape: never add or remove keys.\n * * 3. `Object.freeze`.\n * Fragile: always run a benchmark on a change.\n * Security note: operations don't check 'isValid' for all elements for performance reasons,\n * it is caller responsibility to check this.\n * This is low-level code, please make sure you know what you're doing.\n *\n * Note about field properties:\n * * CHARACTERISTIC p = prime number, number of elements in main subgroup.\n * * ORDER q = similar to cofactor in curves, may be composite `q = p^m`.\n *\n * @param ORDER field order, probably prime, or could be composite\n * @param bitLen how many bits the field consumes\n * @param isLE (default: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nfunction Field(ORDER, bitLenOrOpts, isLE = false, opts = {}) {\n    if (ORDER <= _0n)\n        throw new Error('invalid field: expected ORDER > 0, got ' + ORDER);\n    let _nbitLength = undefined;\n    let _sqrt = undefined;\n    if (typeof bitLenOrOpts === 'object' && bitLenOrOpts != null) {\n        if (opts.sqrt || isLE)\n            throw new Error('cannot specify opts in two arguments');\n        const _opts = bitLenOrOpts;\n        if (_opts.BITS)\n            _nbitLength = _opts.BITS;\n        if (_opts.sqrt)\n            _sqrt = _opts.sqrt;\n        if (typeof _opts.isLE === 'boolean')\n            isLE = _opts.isLE;\n    }\n    else {\n        if (typeof bitLenOrOpts === 'number')\n            _nbitLength = bitLenOrOpts;\n        if (opts.sqrt)\n            _sqrt = opts.sqrt;\n    }\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, _nbitLength);\n    if (BYTES > 2048)\n        throw new Error('invalid field: expected ORDER of <= 2048 bytes');\n    let sqrtP; // cached sqrtP\n    const f = Object.freeze({\n        ORDER,\n        isLE,\n        BITS,\n        BYTES,\n        MASK: (0, utils_ts_1.bitMask)(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error('invalid field element: expected bigint, got ' + typeof num);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        // is valid and invertible\n        isValidNot0: (num) => !f.is0(num) && f.isValid(num),\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: _sqrt ||\n            ((n) => {\n                if (!sqrtP)\n                    sqrtP = FpSqrt(ORDER);\n                return sqrtP(f, n);\n            }),\n        toBytes: (num) => (isLE ? (0, utils_ts_1.numberToBytesLE)(num, BYTES) : (0, utils_ts_1.numberToBytesBE)(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error('Field.fromBytes: expected ' + BYTES + ' bytes, got ' + bytes.length);\n            return isLE ? (0, utils_ts_1.bytesToNumberLE)(bytes) : (0, utils_ts_1.bytesToNumberBE)(bytes);\n        },\n        // TODO: we don't need it here, move out to separate fn\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // We can't move this out because Fp6, Fp12 implement it\n        // and it's unclear what to return in there.\n        cmov: (a, b, c) => (c ? b : a),\n    });\n    return Object.freeze(f);\n}\nfunction FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(\"Field doesn't have isOdd\");\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nfunction FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(\"Field doesn't have isOdd\");\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use `mapKeyToField` instead\n */\nfunction hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = (0, utils_ts_1.ensureBytes)('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error('hashToPrivateScalar: expected ' + minLen + '-1024 bytes of input, got ' + hashLen);\n    const num = isLE ? (0, utils_ts_1.bytesToNumberLE)(hash) : (0, utils_ts_1.bytesToNumberBE)(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nfunction getFieldBytesLength(fieldOrder) {\n    if (typeof fieldOrder !== 'bigint')\n        throw new Error('field order must be bigint');\n    const bitLength = fieldOrder.toString(2).length;\n    return Math.ceil(bitLength / 8);\n}\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nfunction getMinHashLength(fieldOrder) {\n    const length = getFieldBytesLength(fieldOrder);\n    return length + Math.ceil(length / 2);\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nfunction mapHashToField(key, fieldOrder, isLE = false) {\n    const len = key.length;\n    const fieldLen = getFieldBytesLength(fieldOrder);\n    const minLen = getMinHashLength(fieldOrder);\n    // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n    if (len < 16 || len < minLen || len > 1024)\n        throw new Error('expected ' + minLen + '-1024 bytes of input, got ' + len);\n    const num = isLE ? (0, utils_ts_1.bytesToNumberLE)(key) : (0, utils_ts_1.bytesToNumberBE)(key);\n    // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n    const reduced = mod(num, fieldOrder - _1n) + _1n;\n    return isLE ? (0, utils_ts_1.numberToBytesLE)(reduced, fieldLen) : (0, utils_ts_1.numberToBytesBE)(reduced, fieldLen);\n}\n//# sourceMappingURL=modular.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHA512_IV = exports.SHA384_IV = exports.SHA224_IV = exports.SHA256_IV = exports.HashMD = void 0;\nexports.setBigUint64 = setBigUint64;\nexports.Chi = Chi;\nexports.Maj = Maj;\n/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nconst utils_ts_1 = require(\"./utils.js\");\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */\nfunction Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nfunction Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nclass HashMD extends utils_ts_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_ts_1.createView)(this.buffer);\n    }\n    update(data) {\n        (0, utils_ts_1.aexists)(this);\n        data = (0, utils_ts_1.toBytes)(data);\n        (0, utils_ts_1.abytes)(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_ts_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        (0, utils_ts_1.aexists)(this);\n        (0, utils_ts_1.aoutput)(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        (0, utils_ts_1.clean)(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_ts_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.HashMD = HashMD;\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexports.SHA256_IV = Uint32Array.from([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexports.SHA224_IV = Uint32Array.from([\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexports.SHA384_IV = Uint32Array.from([\n    0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexports.SHA512_IV = Uint32Array.from([\n    0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n//# sourceMappingURL=_md.js.map","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.secureErase = exports.fromUTF8 = exports.fromHex = exports.fromBase64 = exports.toUTF8 = exports.toHex = exports.toBase64 = exports.secretbox = exports.randomBytes = exports.hmac = exports.hash = exports.Buffer = void 0;\nconst tweetnacl_1 = __importStar(require(\"tweetnacl\"));\nconst buffer_1 = require(\"buffer/\");\nObject.defineProperty(exports, \"Buffer\", { enumerable: true, get: function () { return buffer_1.Buffer; } });\nconst sha2_1 = require(\"@noble/hashes/sha2\");\nconst hmac_1 = require(\"@noble/hashes/hmac\");\nconst getAlgorithm = (alg) => {\n    const cleanAlg = alg.replaceAll(\"-\", \"\").toLowerCase();\n    if (cleanAlg === \"sha256\")\n        return sha2_1.sha256;\n    if (cleanAlg === \"sha512\")\n        return sha2_1.sha512;\n    if (cleanAlg === \"sha224\")\n        return sha2_1.sha224;\n    return sha2_1.sha256;\n};\nconst _randomBytes = (size) => buffer_1.Buffer.from((0, tweetnacl_1.randomBytes)(size));\nexports.randomBytes = _randomBytes;\nconst hash = (alg, buffer) => buffer_1.Buffer.from(getAlgorithm(alg).create().update(buffer).digest());\nexports.hash = hash;\nconst _hmac = (alg, key, data) => buffer_1.Buffer.from((0, hmac_1.hmac)(getAlgorithm(alg), key, data));\nexports.hmac = _hmac;\nconst secretbox = tweetnacl_1.default.secretbox;\nexports.secretbox = secretbox;\nconst toBase64 = (bufferLike) => buffer_1.Buffer.from(bufferLike).toString(\"base64\");\nexports.toBase64 = toBase64;\nconst toHex = (bufferLike) => buffer_1.Buffer.from(bufferLike).toString(\"hex\");\nexports.toHex = toHex;\nconst toUTF8 = (bufferLike) => buffer_1.Buffer.from(bufferLike).toString(\"utf-8\");\nexports.toUTF8 = toUTF8;\nconst fromBase64 = (string) => buffer_1.Buffer.from(string, \"base64\");\nexports.fromBase64 = fromBase64;\nconst fromHex = (string) => buffer_1.Buffer.from(string, \"hex\");\nexports.fromHex = fromHex;\nconst fromUTF8 = (string) => buffer_1.Buffer.from(string, \"utf-8\");\nexports.fromUTF8 = fromUTF8;\nconst secureErase = (buffer) => {\n    for (let i = 0; i < buffer.length; i++) {\n        buffer[i] = 0;\n    }\n};\nexports.secureErase = secureErase;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decrypt = exports.encrypt = void 0;\nconst crypto_1 = require(\"./crypto\");\nconst buffer_1 = require(\"buffer/\");\nconst newNonce = () => (0, crypto_1.randomBytes)(crypto_1.secretbox.nonceLength);\nconst encrypt = (buffer, key) => {\n    //console.log(\"encrypting: \", buffer, key)\n    const keyUint8Array = key;\n    const nonce = newNonce();\n    const box = (0, crypto_1.secretbox)(Uint8Array.from(buffer), nonce, keyUint8Array);\n    const fullMessage = new Uint8Array(nonce.length + box.length);\n    fullMessage.set(nonce);\n    fullMessage.set(box, nonce.length);\n    return buffer_1.Buffer.from(fullMessage);\n};\nexports.encrypt = encrypt;\nconst decrypt = (messageWithNonce, key) => {\n    //console.log(\"decrypting: \", messageWithNonce, key)\n    const keyUint8Array = key;\n    const messageWithNonceAsUint8Array = messageWithNonce;\n    const nonce = messageWithNonceAsUint8Array.slice(0, crypto_1.secretbox.nonceLength);\n    const message = messageWithNonceAsUint8Array.slice(crypto_1.secretbox.nonceLength, messageWithNonce.length);\n    const decrypted = crypto_1.secretbox.open(message, nonce, keyUint8Array);\n    if (!decrypted) {\n        throw new Error(\"Could not decrypt message\");\n    }\n    return buffer_1.Buffer.from(decrypted);\n};\nexports.decrypt = decrypt;\n// upgrading a channel api with an encrypting layer. The API shoud be\n// - send(Buffer):null\n// - async receive():Buffer\nconst encryptChannel = (channel, key) => {\n    const sendHandler = {\n        apply(target, that, args) {\n            return target.call(that, (0, exports.encrypt)(args[0], key));\n        },\n    };\n    const receiveHandler = {\n        async apply(target, that, args) {\n            const result = await target.call(that);\n            return (0, exports.decrypt)(result, key);\n        },\n    };\n    channel.send = new Proxy(channel.send, sendHandler);\n    channel.receive = new Proxy(channel.receive, receiveHandler);\n    return channel;\n};\nconst generateKey = () => (0, crypto_1.randomBytes)(32);\nexports.default = {\n    decrypt: exports.decrypt,\n    encrypt: exports.encrypt,\n    encryptChannel,\n    generateKey,\n};\n","'use strict';\n\nconst {Buffer} = require('buffer');\nconst NoFilter = require('nofilter');\nconst stream = require('stream');\nconst constants = require('./constants');\nconst {NUMBYTES, SHIFT32, BI, SYMS} = constants;\nconst MAX_SAFE_HIGH = 0x1fffff;\n\n/**\n * Convert a UTF8-encoded Buffer to a JS string.  If possible, throw an error\n * on invalid UTF8.  Byte Order Marks are not looked at or stripped.\n *\n * @private\n */\nconst td = new TextDecoder('utf8', {fatal: true, ignoreBOM: true});\nexports.utf8 = buf => td.decode(buf);\nexports.utf8.checksUTF8 = true;\n\nfunction isReadable(s) {\n  // Is this a readable stream?  In the webpack version, instanceof isn't\n  // working correctly.\n  if (s instanceof stream.Readable) {\n    return true;\n  }\n  return ['read', 'on', 'pipe'].every(f => typeof s[f] === 'function');\n}\n\nexports.isBufferish = function isBufferish(b) {\n  return b &&\n    (typeof b === 'object') &&\n    ((Buffer.isBuffer(b)) ||\n      (b instanceof Uint8Array) ||\n      (b instanceof Uint8ClampedArray) ||\n      (b instanceof ArrayBuffer) ||\n      (b instanceof DataView));\n};\n\nexports.bufferishToBuffer = function bufferishToBuffer(b) {\n  if (Buffer.isBuffer(b)) {\n    return b;\n  } else if (ArrayBuffer.isView(b)) {\n    return Buffer.from(b.buffer, b.byteOffset, b.byteLength);\n  } else if (b instanceof ArrayBuffer) {\n    return Buffer.from(b);\n  }\n  return null;\n};\n\nexports.parseCBORint = function parseCBORint(ai, buf) {\n  switch (ai) {\n    case NUMBYTES.ONE:\n      return buf.readUInt8(0);\n    case NUMBYTES.TWO:\n      return buf.readUInt16BE(0);\n    case NUMBYTES.FOUR:\n      return buf.readUInt32BE(0);\n    case NUMBYTES.EIGHT: {\n      const f = buf.readUInt32BE(0);\n      const g = buf.readUInt32BE(4);\n      if (f > MAX_SAFE_HIGH) {\n        return (BigInt(f) * BI.SHIFT32) + BigInt(g);\n      }\n      return (f * SHIFT32) + g;\n    }\n    default:\n      throw new Error(`Invalid additional info for int: ${ai}`);\n  }\n};\n\nexports.writeHalf = function writeHalf(buf, half) {\n  // Assume 0, -0, NaN, Infinity, and -Infinity have already been caught\n\n  // HACK: everyone settle in.  This isn't going to be pretty.\n  // Translate cn-cbor's C code (from Carsten Borman):\n\n  // uint32_t be32;\n  // uint16_t be16, u16;\n  // union {\n  //   float f;\n  //   uint32_t u;\n  // } u32;\n  // u32.f = float_val;\n\n  const u32 = Buffer.allocUnsafe(4);\n  u32.writeFloatBE(half, 0);\n  const u = u32.readUInt32BE(0);\n\n  // If ((u32.u & 0x1FFF) == 0) { /* worth trying half */\n\n  // hildjj: If the lower 13 bits aren't 0,\n  // we will lose precision in the conversion.\n  // mant32 = 24bits, mant16 = 11bits, 24-11 = 13\n  if ((u & 0x1FFF) !== 0) {\n    return false;\n  }\n\n  // Sign, exponent, mantissa\n  //   int s16 = (u32.u >> 16) & 0x8000;\n  //   int exp = (u32.u >> 23) & 0xff;\n  //   int mant = u32.u & 0x7fffff;\n\n  let s16 = (u >> 16) & 0x8000; // Top bit is sign\n  const exp = (u >> 23) & 0xff; // Then 5 bits of exponent\n  const mant = u & 0x7fffff;\n\n  // Hildjj: zeros already handled.  Assert if you don't believe me.\n  //   if (exp == 0 && mant == 0)\n  //     ;              /* 0.0, -0.0 */\n\n  //   else if (exp >= 113 && exp <= 142) /* normalized */\n  //     s16 += ((exp - 112) << 10) + (mant >> 13);\n\n  if ((exp >= 113) && (exp <= 142)) {\n    s16 += ((exp - 112) << 10) + (mant >> 13);\n  } else if ((exp >= 103) && (exp < 113)) {\n    // Denormalized numbers\n    //   else if (exp >= 103 && exp < 113) { /* denorm, exp16 = 0 */\n    //     if (mant & ((1 << (126 - exp)) - 1))\n    //       goto float32;         /* loss of precision */\n    //     s16 += ((mant + 0x800000) >> (126 - exp));\n\n    if (mant & ((1 << (126 - exp)) - 1)) {\n      return false;\n    }\n    s16 += ((mant + 0x800000) >> (126 - exp));\n  } else {\n  //   } else if (exp == 255 && mant == 0) { /* Inf */\n  //     s16 += 0x7c00;\n\n    // hildjj: Infinity already handled\n\n    //   } else\n    //     goto float32;           /* loss of range */\n\n    return false;\n  }\n\n  // Done\n  //   ensure_writable(3);\n  //   u16 = s16;\n  //   be16 = hton16p((const uint8_t*)&u16);\n  buf.writeUInt16BE(s16);\n  return true;\n};\n\nexports.parseHalf = function parseHalf(buf) {\n  const sign = buf[0] & 0x80 ? -1 : 1;\n  const exp = (buf[0] & 0x7C) >> 2;\n  const mant = ((buf[0] & 0x03) << 8) | buf[1];\n  if (!exp) {\n    return sign * 5.9604644775390625e-8 * mant;\n  } else if (exp === 0x1f) {\n    return sign * (mant ? NaN : Infinity);\n  }\n  return sign * (2 ** (exp - 25)) * (1024 + mant);\n};\n\nexports.parseCBORfloat = function parseCBORfloat(buf) {\n  switch (buf.length) {\n    case 2:\n      return exports.parseHalf(buf);\n    case 4:\n      return buf.readFloatBE(0);\n    case 8:\n      return buf.readDoubleBE(0);\n    default:\n      throw new Error(`Invalid float size: ${buf.length}`);\n  }\n};\n\nexports.hex = function hex(s) {\n  return Buffer.from(s.replace(/^0x/, ''), 'hex');\n};\n\nexports.bin = function bin(s) {\n  s = s.replace(/\\s/g, '');\n  let start = 0;\n  let end = (s.length % 8) || 8;\n  const chunks = [];\n  while (end <= s.length) {\n    chunks.push(parseInt(s.slice(start, end), 2));\n    start = end;\n    end += 8;\n  }\n  return Buffer.from(chunks);\n};\n\nexports.arrayEqual = function arrayEqual(a, b) {\n  if ((a == null) && (b == null)) {\n    return true;\n  }\n  if ((a == null) || (b == null)) {\n    return false;\n  }\n  return (a.length === b.length) && a.every((elem, i) => elem === b[i]);\n};\n\nexports.bufferToBigInt = function bufferToBigInt(buf) {\n  return BigInt(`0x${buf.toString('hex')}`);\n};\n\nexports.cborValueToString = function cborValueToString(val, float_bytes = -1) {\n  switch (typeof val) {\n    case 'symbol': {\n      switch (val) {\n        case SYMS.NULL:\n          return 'null';\n        case SYMS.UNDEFINED:\n          return 'undefined';\n        case SYMS.BREAK:\n          return 'BREAK';\n      }\n      // Impossible in node 10\n      /* istanbul ignore if */\n      if (val.description) {\n        return val.description;\n      }\n      // On node10, Symbol doesn't have description.  Parse it out of the\n      // toString value, which looks like `Symbol(foo)`.\n      const s = val.toString();\n      const m = s.match(/^Symbol\\((?<name>.*)\\)/);\n      /* istanbul ignore if */\n      if (m && m.groups.name) {\n        // Impossible in node 12+\n        /* istanbul ignore next */\n        return m.groups.name;\n      }\n      return 'Symbol';\n    }\n    case 'string':\n      return JSON.stringify(val);\n    case 'bigint':\n      return val.toString();\n    case 'number': {\n      const s = Object.is(val, -0) ? '-0' : String(val);\n      return (float_bytes > 0) ? `${s}_${float_bytes}` : s;\n    }\n    case 'object': {\n      if (!val) {\n        return 'null';\n      }\n      const buf = exports.bufferishToBuffer(val);\n      if (buf) {\n        const hex = buf.toString('hex');\n        return (float_bytes === -Infinity) ? hex : `h'${hex}'`;\n      }\n      if (val && typeof val[Symbol.for('nodejs.util.inspect.custom')] === 'function') {\n        return val[Symbol.for('nodejs.util.inspect.custom')]();\n      }\n      // Shouldn't get non-empty arrays here\n      if (Array.isArray(val)) {\n        return '[]';\n      }\n      // This should be all that is left\n      return '{}';\n    }\n  }\n  return String(val);\n};\n\nexports.guessEncoding = function guessEncoding(input, encoding) {\n  if (typeof input === 'string') {\n    return new NoFilter(input, (encoding == null) ? 'hex' : encoding);\n  }\n  const buf = exports.bufferishToBuffer(input);\n  if (buf) {\n    return new NoFilter(buf);\n  }\n  if (isReadable(input)) {\n    return input;\n  }\n  throw new Error('Unknown input type');\n};\n\nconst B64URL_SWAPS = {\n  '=': '',\n  '+': '-',\n  '/': '_',\n};\n\n/**\n * @param {Buffer|Uint8Array|Uint8ClampedArray|ArrayBuffer|DataView} buf\n *   Buffer to convert.\n * @returns {string} Base64url string.\n * @private\n */\nexports.base64url = function base64url(buf) {\n  return exports.bufferishToBuffer(buf)\n    .toString('base64')\n    .replace(/[=+/]/g, c => B64URL_SWAPS[c]);\n};\n\n/**\n * @param {Buffer|Uint8Array|Uint8ClampedArray|ArrayBuffer|DataView} buf\n *   Buffer to convert.\n * @returns {string} Base64 string.\n * @private\n */\nexports.base64 = function base64(buf) {\n  return exports.bufferishToBuffer(buf).toString('base64');\n};\n\nexports.isBigEndian = function isBigEndian() {\n  const array = new Uint8Array(4);\n  const view = new Uint32Array(array.buffer);\n  return !((view[0] = 1) & array[0]);\n};\n","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.montgomery = montgomery;\n/**\n * Montgomery curve methods. It's not really whole montgomery curve,\n * just bunch of very specific methods for X25519 / X448 from\n * [RFC 7748](https://www.rfc-editor.org/rfc/rfc7748)\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_ts_1 = require(\"../utils.js\");\nconst modular_ts_1 = require(\"./modular.js\");\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nfunction validateOpts(curve) {\n    (0, utils_ts_1._validateObject)(curve, {\n        adjustScalarBytes: 'function',\n        powPminus2: 'function',\n    });\n    return Object.freeze({ ...curve });\n}\nfunction montgomery(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { P, type, adjustScalarBytes, powPminus2, randomBytes: rand } = CURVE;\n    const is25519 = type === 'x25519';\n    if (!is25519 && type !== 'x448')\n        throw new Error('invalid type');\n    const randomBytes_ = rand || utils_ts_1.randomBytes;\n    const montgomeryBits = is25519 ? 255 : 448;\n    const fieldLen = is25519 ? 32 : 56;\n    const Gu = is25519 ? BigInt(9) : BigInt(5);\n    // RFC 7748 #5:\n    // The constant a24 is (486662 - 2) / 4 = 121665 for curve25519/X25519 and\n    // (156326 - 2) / 4 = 39081 for curve448/X448\n    // const a = is25519 ? 156326n : 486662n;\n    const a24 = is25519 ? BigInt(121665) : BigInt(39081);\n    // RFC: x25519 \"the resulting integer is of the form 2^254 plus\n    // eight times a value between 0 and 2^251 - 1 (inclusive)\"\n    // x448: \"2^447 plus four times a value between 0 and 2^445 - 1 (inclusive)\"\n    const minScalar = is25519 ? _2n ** BigInt(254) : _2n ** BigInt(447);\n    const maxAdded = is25519\n        ? BigInt(8) * _2n ** BigInt(251) - _1n\n        : BigInt(4) * _2n ** BigInt(445) - _1n;\n    const maxScalar = minScalar + maxAdded + _1n; // (inclusive)\n    const modP = (n) => (0, modular_ts_1.mod)(n, P);\n    const GuBytes = encodeU(Gu);\n    function encodeU(u) {\n        return (0, utils_ts_1.numberToBytesLE)(modP(u), fieldLen);\n    }\n    function decodeU(u) {\n        const _u = (0, utils_ts_1.ensureBytes)('u coordinate', u, fieldLen);\n        // RFC: When receiving such an array, implementations of X25519\n        // (but not X448) MUST mask the most significant bit in the final byte.\n        if (is25519)\n            _u[31] &= 127; // 0b0111_1111\n        // RFC: Implementations MUST accept non-canonical values and process them as\n        // if they had been reduced modulo the field prime.  The non-canonical\n        // values are 2^255 - 19 through 2^255 - 1 for X25519 and 2^448 - 2^224\n        // - 1 through 2^448 - 1 for X448.\n        return modP((0, utils_ts_1.bytesToNumberLE)(_u));\n    }\n    function decodeScalar(scalar) {\n        return (0, utils_ts_1.bytesToNumberLE)(adjustScalarBytes((0, utils_ts_1.ensureBytes)('scalar', scalar, fieldLen)));\n    }\n    function scalarMult(scalar, u) {\n        const pu = montgomeryLadder(decodeU(u), decodeScalar(scalar));\n        // Some public keys are useless, of low-order. Curve author doesn't think\n        // it needs to be validated, but we do it nonetheless.\n        // https://cr.yp.to/ecdh.html#validate\n        if (pu === _0n)\n            throw new Error('invalid private or public key received');\n        return encodeU(pu);\n    }\n    // Computes public key from private. By doing scalar multiplication of base point.\n    function scalarMultBase(scalar) {\n        return scalarMult(scalar, GuBytes);\n    }\n    // cswap from RFC7748 \"example code\"\n    function cswap(swap, x_2, x_3) {\n        // dummy = mask(swap) AND (x_2 XOR x_3)\n        // Where mask(swap) is the all-1 or all-0 word of the same length as x_2\n        // and x_3, computed, e.g., as mask(swap) = 0 - swap.\n        const dummy = modP(swap * (x_2 - x_3));\n        x_2 = modP(x_2 - dummy); // x_2 = x_2 XOR dummy\n        x_3 = modP(x_3 + dummy); // x_3 = x_3 XOR dummy\n        return { x_2, x_3 };\n    }\n    /**\n     * Montgomery x-only multiplication ladder.\n     * @param pointU u coordinate (x) on Montgomery Curve 25519\n     * @param scalar by which the point would be multiplied\n     * @returns new Point on Montgomery curve\n     */\n    function montgomeryLadder(u, scalar) {\n        (0, utils_ts_1.aInRange)('u', u, _0n, P);\n        (0, utils_ts_1.aInRange)('scalar', scalar, minScalar, maxScalar);\n        const k = scalar;\n        const x_1 = u;\n        let x_2 = _1n;\n        let z_2 = _0n;\n        let x_3 = u;\n        let z_3 = _1n;\n        let swap = _0n;\n        for (let t = BigInt(montgomeryBits - 1); t >= _0n; t--) {\n            const k_t = (k >> t) & _1n;\n            swap ^= k_t;\n            ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n            ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n            swap = k_t;\n            const A = x_2 + z_2;\n            const AA = modP(A * A);\n            const B = x_2 - z_2;\n            const BB = modP(B * B);\n            const E = AA - BB;\n            const C = x_3 + z_3;\n            const D = x_3 - z_3;\n            const DA = modP(D * A);\n            const CB = modP(C * B);\n            const dacb = DA + CB;\n            const da_cb = DA - CB;\n            x_3 = modP(dacb * dacb);\n            z_3 = modP(x_1 * modP(da_cb * da_cb));\n            x_2 = modP(AA * BB);\n            z_2 = modP(E * (AA + modP(a24 * E)));\n        }\n        ({ x_2, x_3 } = cswap(swap, x_2, x_3));\n        ({ x_2: z_2, x_3: z_3 } = cswap(swap, z_2, z_3));\n        const z2 = powPminus2(z_2); // `Fp.pow(x, P - _2n)` is much slower equivalent\n        return modP(x_2 * z2); // Return x_2 * (z_2^(p - 2))\n    }\n    return {\n        scalarMult,\n        scalarMultBase,\n        getSharedSecret: (privateKey, publicKey) => scalarMult(privateKey, publicKey),\n        getPublicKey: (privateKey) => scalarMultBase(privateKey),\n        utils: { randomPrivateKey: () => randomBytes_(fieldLen) },\n        GuBytes: GuBytes.slice(),\n    };\n}\n//# sourceMappingURL=montgomery.js.map","'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;","'use strict';\n\nconst stream = require('stream');\nconst Decoder = require('./decoder');\nconst utils = require('./utils');\nconst NoFilter = require('nofilter');\nconst {MT, SYMS} = require('./constants');\n\n/**\n * Things that can act as inputs, from which a NoFilter can be created.\n *\n * @typedef {string|Buffer|ArrayBuffer|ArrayBufferView\n *   |DataView|stream.Readable} BufferLike\n */\n\n/**\n * @typedef DiagnoseOptions\n * @property {string} [separator='\\n'] Output between detected objects.\n * @property {boolean} [stream_errors=false] Put error info into the\n *   output stream.\n * @property {number} [max_depth=-1] The maximum depth to parse.\n *   Use -1 for \"until you run out of memory\".  Set this to a finite\n *   positive number for un-trusted inputs.  Most standard inputs won't nest\n *   more than 100 or so levels; I've tested into the millions before\n *   running out of memory.\n * @property {object} [tags] Mapping from tag number to function(v),\n *   where v is the decoded value that comes after the tag, and where the\n *   function returns the correctly-created value for that tag.\n * @property {boolean} [preferWeb=false] If true, prefer Uint8Arrays to\n *   be generated instead of node Buffers.  This might turn on some more\n *   changes in the future, so forward-compatibility is not guaranteed yet.\n * @property {BufferEncoding} [encoding='hex'] The encoding of input, ignored if\n *   input is not string.\n */\n/**\n * @callback diagnoseCallback\n * @param {Error} [error] If one was generated.\n * @param {string} [value] The diagnostic value.\n * @returns {void}\n */\n/**\n * @param {DiagnoseOptions|diagnoseCallback|string} opts Options,\n *   the callback, or input incoding.\n * @param {diagnoseCallback} [cb] Called on completion.\n * @returns {{options: DiagnoseOptions, cb: diagnoseCallback}} Normalized.\n * @throws {TypeError} Unknown option type.\n * @private\n */\nfunction normalizeOptions(opts, cb) {\n  switch (typeof opts) {\n    case 'function':\n      return {options: {}, cb: /** @type {diagnoseCallback} */ (opts)};\n    case 'string':\n      return {options: {encoding: /** @type {BufferEncoding} */ (opts)}, cb};\n    case 'object':\n      return {options: opts || {}, cb};\n    default:\n      throw new TypeError('Unknown option type');\n  }\n}\n\n/**\n * Output the diagnostic format from a stream of CBOR bytes.\n *\n * @extends stream.Transform\n */\nclass Diagnose extends stream.Transform {\n  /**\n   * Creates an instance of Diagnose.\n   *\n   * @param {DiagnoseOptions} [options={}] Options for creation.\n   */\n  constructor(options = {}) {\n    const {\n      separator = '\\n',\n      stream_errors = false,\n      // Decoder options\n      tags,\n      max_depth,\n      preferWeb,\n      encoding,\n      // Stream.Transform options\n      ...superOpts\n    } = options;\n    super({\n      ...superOpts,\n      readableObjectMode: false,\n      writableObjectMode: false,\n    });\n\n    this.float_bytes = -1;\n    this.separator = separator;\n    this.stream_errors = stream_errors;\n    this.parser = new Decoder({\n      tags,\n      max_depth,\n      preferWeb,\n      encoding,\n    });\n    this.parser.on('more-bytes', this._on_more.bind(this));\n    this.parser.on('value', this._on_value.bind(this));\n    this.parser.on('start', this._on_start.bind(this));\n    this.parser.on('stop', this._on_stop.bind(this));\n    this.parser.on('data', this._on_data.bind(this));\n    this.parser.on('error', this._on_error.bind(this));\n  }\n\n  /**\n   * Transforming.\n   *\n   * @param {any} fresh Buffer to transcode.\n   * @param {BufferEncoding} encoding Name of encoding.\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _transform(fresh, encoding, cb) {\n    this.parser.write(fresh, encoding, cb);\n  }\n\n  /**\n   * Flushing.\n   *\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _flush(cb) {\n    this.parser._flush(er => {\n      if (this.stream_errors) {\n        if (er) {\n          this._on_error(er);\n        }\n        return cb();\n      }\n      return cb(er);\n    });\n  }\n\n  /**\n   * Convenience function to return a string in diagnostic format.\n   *\n   * @param {BufferLike} input The CBOR bytes to format.\n   * @param {DiagnoseOptions |diagnoseCallback|string} [options={}]\n   *   Options, the callback, or the input encoding.\n   * @param {diagnoseCallback} [cb] Callback.\n   * @returns {Promise} If callback not specified.\n   * @throws {TypeError} Input not provided.\n   */\n  static diagnose(input, options = {}, cb = null) {\n    if (input == null) {\n      throw new TypeError('input required');\n    }\n    ({options, cb} = normalizeOptions(options, cb));\n    const {encoding = 'hex', ...opts} = options;\n\n    const bs = new NoFilter();\n    const d = new Diagnose(opts);\n    let p = null;\n    if (typeof cb === 'function') {\n      d.on('end', () => cb(null, bs.toString('utf8')));\n      d.on('error', cb);\n    } else {\n      p = new Promise((resolve, reject) => {\n        d.on('end', () => resolve(bs.toString('utf8')));\n        d.on('error', reject);\n      });\n    }\n    d.pipe(bs);\n    utils.guessEncoding(input, encoding).pipe(d);\n    return p;\n  }\n\n  /**\n   * @ignore\n   */\n  _on_error(er) {\n    if (this.stream_errors) {\n      this.push(er.toString());\n    } else {\n      this.emit('error', er);\n    }\n  }\n\n  /** @private */\n  _on_more(mt, len, _parent_mt, _pos) {\n    if (mt === MT.SIMPLE_FLOAT) {\n      this.float_bytes = {\n        2: 1,\n        4: 2,\n        8: 3,\n      }[len];\n    }\n  }\n\n  /** @private */\n  _fore(parent_mt, pos) {\n    switch (parent_mt) {\n      case MT.BYTE_STRING:\n      case MT.UTF8_STRING:\n      case MT.ARRAY:\n        if (pos > 0) {\n          this.push(', ');\n        }\n        break;\n      case MT.MAP:\n        if (pos > 0) {\n          if (pos % 2) {\n            this.push(': ');\n          } else {\n            this.push(', ');\n          }\n        }\n    }\n  }\n\n  /** @private */\n  _on_value(val, parent_mt, pos) {\n    if (val === SYMS.BREAK) {\n      return;\n    }\n    this._fore(parent_mt, pos);\n    const fb = this.float_bytes;\n    this.float_bytes = -1;\n    this.push(utils.cborValueToString(val, fb));\n  }\n\n  /** @private */\n  _on_start(mt, tag, parent_mt, pos) {\n    this._fore(parent_mt, pos);\n    switch (mt) {\n      case MT.TAG:\n        this.push(`${tag}(`);\n        break;\n      case MT.ARRAY:\n        this.push('[');\n        break;\n      case MT.MAP:\n        this.push('{');\n        break;\n      case MT.BYTE_STRING:\n      case MT.UTF8_STRING:\n        this.push('(');\n        break;\n    }\n    if (tag === SYMS.STREAM) {\n      this.push('_ ');\n    }\n  }\n\n  /** @private */\n  _on_stop(mt) {\n    switch (mt) {\n      case MT.TAG:\n        this.push(')');\n        break;\n      case MT.ARRAY:\n        this.push(']');\n        break;\n      case MT.MAP:\n        this.push('}');\n        break;\n      case MT.BYTE_STRING:\n      case MT.UTF8_STRING:\n        this.push(')');\n        break;\n    }\n  }\n\n  /** @private */\n  _on_data() {\n    this.push(this.separator);\n  }\n}\n\nmodule.exports = Diagnose;\n","'use strict';\n\nconst {MT, SIMPLE, SYMS} = require('./constants');\n\n/**\n * A CBOR Simple Value that does not map onto a known constant.\n */\nclass Simple {\n  /**\n   * Creates an instance of Simple.\n   *\n   * @param {number} value The simple value's integer value.\n   */\n  constructor(value) {\n    if (typeof value !== 'number') {\n      throw new Error(`Invalid Simple type: ${typeof value}`);\n    }\n    if ((value < 0) || (value > 255) || ((value | 0) !== value)) {\n      throw new Error(`value must be a small positive integer: ${value}`);\n    }\n    this.value = value;\n  }\n\n  /**\n   * Debug string for simple value.\n   *\n   * @returns {string} Formated string of `simple(value)`.\n   */\n  toString() {\n    return `simple(${this.value})`;\n  }\n\n  /**\n   * Debug string for simple value.\n   *\n   * @param {number} _depth How deep are we?\n   * @param {object} _opts Options.\n   * @returns {string} Formatted string of `simple(value)`.\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](_depth, _opts) {\n    return `simple(${this.value})`;\n  }\n\n  /**\n   * Push the simple value onto the CBOR stream.\n   *\n   * @param {object} gen The generator to push onto.\n   * @returns {boolean} True on success.\n   */\n  encodeCBOR(gen) {\n    return gen._pushInt(this.value, MT.SIMPLE_FLOAT);\n  }\n\n  /**\n   * Is the given object a Simple?\n   *\n   * @param {any} obj Object to test.\n   * @returns {boolean} Is it Simple?\n   */\n  static isSimple(obj) {\n    return obj instanceof Simple;\n  }\n\n  /**\n   * Decode from the CBOR additional information into a JavaScript value.\n   * If the CBOR item has no parent, return a \"safe\" symbol instead of\n   * `null` or `undefined`, so that the value can be passed through a\n   * stream in object mode.\n   *\n   * @param {number} val The CBOR additional info to convert.\n   * @param {boolean} [has_parent=true] Does the CBOR item have a parent?\n   * @param {boolean} [parent_indefinite=false] Is the parent element\n   *   indefinitely encoded?\n   * @returns {(null|undefined|boolean|symbol|Simple)} The decoded value.\n   * @throws {Error} Invalid BREAK.\n   */\n  static decode(val, has_parent = true, parent_indefinite = false) {\n    switch (val) {\n      case SIMPLE.FALSE:\n        return false;\n      case SIMPLE.TRUE:\n        return true;\n      case SIMPLE.NULL:\n        if (has_parent) {\n          return null;\n        }\n        return SYMS.NULL;\n      case SIMPLE.UNDEFINED:\n        if (has_parent) {\n          return undefined;\n        }\n        return SYMS.UNDEFINED;\n      case -1:\n        if (!has_parent || !parent_indefinite) {\n          throw new Error('Invalid BREAK');\n        }\n        return SYMS.BREAK;\n      default:\n        return new Simple(val);\n    }\n  }\n}\n\nmodule.exports = Simple;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"./crypto\");\nconst squareSize = 10;\nconst boardTopx = 0;\nconst boardTopy = 0;\nconst createFrom256 = (hex) => hex.match(/.{1,4}/g)?.map((line) => parseInt(line, 16).toString(2).padStart(16, \"0\")) || [];\nconst createFromFingerprint = (fp) => createFrom256((0, crypto_1.hash)(\"sha256\", (0, crypto_1.fromHex)(fp.replaceAll(\" \", \"\"))).toString(\"hex\"));\nconst nextstep = (bin, memo) => {\n    const output = [];\n    for (let i = 0; i < 16; i++) {\n        let line = \"\";\n        for (let j = 0; j < 16; j++) {\n            let count = 0;\n            for (let k = i - 1; k < i + 2; k++) {\n                for (let l = j - 1; l < j + 2; l++) {\n                    if (k > -1 && k < 16 && l > -1 && l < 16) {\n                        if ((k != i || l != j) && bin[k][l] == \"1\")\n                            count++;\n                    }\n                }\n            }\n            let live = false;\n            if (count == 3)\n                live = true;\n            else if (count == 2 && bin[i][j] == \"1\")\n                live = true;\n            line += live ? \"1\" : \"O\";\n            if (memo && live) {\n                memo[i][j]++;\n            }\n        }\n        output.push(line);\n    }\n    return output;\n};\nconst run = (hex, max) => {\n    const result = createFrom256(hex)?.map((line) => line.split(\"\").map((c) => parseInt(c)));\n    let step = createFrom256(hex);\n    for (let a = 0; a < max; a++) {\n        step = nextstep(step, result);\n    }\n    return result;\n};\nconst renderStep = (context, step) => {\n    for (let i = 0; i < 16; i++) {\n        for (let j = 0; j < 16; j++) {\n            context.fillStyle = step[i][j] == 1 ? \"black\" : \"white\";\n            let xOffset = boardTopx + j * squareSize;\n            let yOffset = boardTopy + i * squareSize;\n            context.fillRect(xOffset, yOffset, squareSize, squareSize);\n            context.fillRect(150 - xOffset, yOffset, squareSize, squareSize);\n            context.fillRect(xOffset, 150 - yOffset, squareSize, squareSize);\n            context.fillRect(150 - xOffset, 150 - yOffset, squareSize, squareSize);\n        }\n    }\n};\nconst heatMapColorforValue = (value, offset = 1) => {\n    var h = (1.0 - value) * 240 + offset;\n    //return `rgba(0,0,0,${value})`\n    return \"hsl(\" + h + \", 100%, 50%)\";\n};\nconst renderMemo = (data, mapcolors = 2, context) => {\n    let min = 1000;\n    let max = 0;\n    const memo = JSON.parse(JSON.stringify(data));\n    for (let i = 0; i < 8; i++) {\n        for (let j = 0; j < 8; j++) {\n            memo[i][j] =\n                memo[15 - i][j] =\n                    memo[i][15 - j] =\n                        memo[15 - i][15 - j] =\n                            memo[i][j] + memo[15 - i][j] + memo[i][15 - j] + memo[15 - i][15 - j];\n            const val = memo[i][j];\n            if (val < min)\n                min = val;\n            if (val > max)\n                max = val;\n        }\n    }\n    for (let i = 0; i < 16; i++) {\n        for (let j = 0; j < 16; j++) {\n            context.fillStyle = heatMapColorforValue(Math.floor(((memo[i][j] - min) * mapcolors) / max) / mapcolors, max * max);\n            let xOffset = boardTopx + j * squareSize;\n            let yOffset = boardTopy + i * squareSize;\n            context.fillRect(xOffset, yOffset, squareSize, squareSize);\n        }\n    }\n};\nexports.default = {\n    renderFingerprint: (fp, canvas, steps = 32) => {\n        let step = createFromFingerprint(fp.replaceAll(\" \", \"\"));\n        let memo = step?.map((line) => line.split(\"\").map((c) => parseInt(c)));\n        const context = canvas.getContext(\"2d\");\n        if (!context || !memo)\n            return;\n        for (let t = 0; t < steps; t++) {\n            step = nextstep(step, memo);\n        }\n        renderMemo(memo, 3, context);\n        return canvas;\n    },\n    animateFingerprint: async (fp, canvas, steps = 32, speed = 500) => {\n        let step = createFromFingerprint(fp.replaceAll(\" \", \"\"));\n        let memo = step?.map((line) => line.split(\"\").map((c) => parseInt(c)));\n        const context = canvas.getContext(\"2d\");\n        if (!context || !memo)\n            return;\n        for (let t = 0; t < steps; t++) {\n            step = nextstep(step, memo);\n            renderMemo(memo, 3, context);\n            await new Promise((resolve) => setTimeout(resolve, speed));\n        }\n        renderMemo(memo, 3, context);\n        return canvas;\n    },\n};\n","module.exports = require('events').EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();","'use strict';\n\nconst stream = require('stream');\nconst utils = require('./utils');\nconst Decoder = require('./decoder');\nconst NoFilter = require('nofilter');\nconst {MT, NUMBYTES, SYMS} = require('./constants');\nconst {Buffer} = require('buffer');\n\nfunction plural(c) {\n  if (c > 1) {\n    return 's';\n  }\n  return '';\n}\n\n/**\n * @typedef CommentOptions\n * @property {number} [max_depth=10] How many times to indent\n *   the dashes.\n * @property {number} [depth=1] Initial indentation depth.\n * @property {boolean} [no_summary=false] If true, omit the summary\n *   of the full bytes read at the end.\n * @property {object} [tags] Mapping from tag number to function(v),\n *   where v is the decoded value that comes after the tag, and where the\n *   function returns the correctly-created value for that tag.\n * @property {boolean} [preferWeb=false] If true, prefer Uint8Arrays to\n *   be generated instead of node Buffers.  This might turn on some more\n *   changes in the future, so forward-compatibility is not guaranteed yet.\n * @property {BufferEncoding} [encoding='hex'] Encoding to use for input, if it\n *   is a string.\n */\n/**\n * @callback commentCallback\n * @param {Error} [error] If one was generated.\n * @param {string} [commented] The comment string.\n * @returns {void}\n */\n/**\n * Normalize inputs to the static functions.\n *\n * @param {CommentOptions|commentCallback|string|number} opts Encoding,\n *   max_depth, or callback.\n * @param {commentCallback} [cb] Called on completion.\n * @returns {{options: CommentOptions, cb: commentCallback}} Normalized value.\n * @throws {TypeError} Unknown option type.\n * @private\n */\nfunction normalizeOptions(opts, cb) {\n  switch (typeof opts) {\n    case 'function':\n      return {options: {}, cb: /** @type {commentCallback} */ (opts)};\n    case 'string':\n      return {options: {encoding: /** @type {BufferEncoding} */ (opts)}, cb};\n    case 'number':\n      return {options: {max_depth: opts}, cb};\n    case 'object':\n      return {options: opts || {}, cb};\n    default:\n      throw new TypeError('Unknown option type');\n  }\n}\n\n/**\n * Generate the expanded format of RFC 8949, section 3.2.2.\n *\n * @extends stream.Transform\n */\nclass Commented extends stream.Transform {\n  /**\n   * Create a CBOR commenter.\n   *\n   * @param {CommentOptions} [options={}] Stream options.\n   */\n  constructor(options = {}) {\n    const {\n      depth = 1,\n      max_depth = 10,\n      no_summary = false,\n      // Decoder options\n      tags = {},\n      preferWeb,\n      encoding,\n      // Stream.Transform options\n      ...superOpts\n    } = options;\n\n    super({\n      ...superOpts,\n      readableObjectMode: false,\n      writableObjectMode: false,\n    });\n\n    this.depth = depth;\n    this.max_depth = max_depth;\n    this.all = new NoFilter();\n\n    if (!tags[24]) {\n      tags[24] = this._tag_24.bind(this);\n    }\n    this.parser = new Decoder({\n      tags,\n      max_depth,\n      preferWeb,\n      encoding,\n    });\n    this.parser.on('value', this._on_value.bind(this));\n    this.parser.on('start', this._on_start.bind(this));\n    this.parser.on('start-string', this._on_start_string.bind(this));\n    this.parser.on('stop', this._on_stop.bind(this));\n    this.parser.on('more-bytes', this._on_more.bind(this));\n    this.parser.on('error', this._on_error.bind(this));\n    if (!no_summary) {\n      this.parser.on('data', this._on_data.bind(this));\n    }\n    this.parser.bs.on('read', this._on_read.bind(this));\n  }\n\n  /**\n   * @param {Buffer} v Descend into embedded CBOR.\n   * @private\n   */\n  _tag_24(v) {\n    const c = new Commented({depth: this.depth + 1, no_summary: true});\n\n    c.on('data', b => this.push(b));\n    c.on('error', er => this.emit('error', er));\n    c.end(v);\n  }\n\n  /**\n   * Transforming.\n   *\n   * @param {any} fresh Buffer to transcode.\n   * @param {BufferEncoding} encoding Name of encoding.\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _transform(fresh, encoding, cb) {\n    this.parser.write(fresh, encoding, cb);\n  }\n\n  /**\n   * Flushing.\n   *\n   * @param {stream.TransformCallback} cb Callback when done.\n   * @ignore\n   */\n  _flush(cb) {\n    // TODO: find the test that covers this, and look at the return value\n    return this.parser._flush(cb);\n  }\n\n  /**\n   * Comment on an input Buffer or string, creating a string passed to the\n   * callback.  If callback not specified, a promise is returned.\n   *\n   * @param {string|Buffer|ArrayBuffer|Uint8Array|Uint8ClampedArray\n   *   |DataView|stream.Readable} input Something to parse.\n   * @param {CommentOptions|commentCallback|string|number} [options={}]\n   *   Encoding, max_depth, or callback.\n   * @param {commentCallback} [cb] If specified, called on completion.\n   * @returns {Promise} If cb not specified.\n   * @throws {Error} Input required.\n   */\n  static comment(input, options = {}, cb = null) {\n    if (input == null) {\n      throw new Error('input required');\n    }\n    ({options, cb} = normalizeOptions(options, cb));\n    const bs = new NoFilter();\n    const {encoding = 'hex', ...opts} = options;\n    const d = new Commented(opts);\n    let p = null;\n\n    if (typeof cb === 'function') {\n      d.on('end', () => {\n        cb(null, bs.toString('utf8'));\n      });\n      d.on('error', cb);\n    } else {\n      p = new Promise((resolve, reject) => {\n        d.on('end', () => {\n          resolve(bs.toString('utf8'));\n        });\n        d.on('error', reject);\n      });\n    }\n    d.pipe(bs);\n    utils.guessEncoding(input, encoding).pipe(d);\n    return p;\n  }\n\n  /**\n   * @ignore\n   */\n  _on_error(er) {\n    this.push('ERROR: ');\n    this.push(er.toString());\n    this.push('\\n');\n  }\n\n  /**\n   * @ignore\n   */\n  _on_read(buf) {\n    this.all.write(buf);\n    const hex = buf.toString('hex');\n\n    this.push(new Array(this.depth + 1).join('  '));\n    this.push(hex);\n\n    let ind = ((this.max_depth - this.depth) * 2) - hex.length;\n    if (ind < 1) {\n      ind = 1;\n    }\n    this.push(new Array(ind + 1).join(' '));\n    this.push('-- ');\n  }\n\n  /**\n   * @ignore\n   */\n  _on_more(mt, len, _parent_mt, _pos) {\n    let desc = '';\n\n    this.depth++;\n    switch (mt) {\n      case MT.POS_INT:\n        desc = 'Positive number,';\n        break;\n      case MT.NEG_INT:\n        desc = 'Negative number,';\n        break;\n      case MT.ARRAY:\n        desc = 'Array, length';\n        break;\n      case MT.MAP:\n        desc = 'Map, count';\n        break;\n      case MT.BYTE_STRING:\n        desc = 'Bytes, length';\n        break;\n      case MT.UTF8_STRING:\n        desc = 'String, length';\n        break;\n      case MT.SIMPLE_FLOAT:\n        if (len === 1) {\n          desc = 'Simple value,';\n        } else {\n          desc = 'Float,';\n        }\n        break;\n    }\n    this.push(`${desc} next ${len} byte${plural(len)}\\n`);\n  }\n\n  /**\n   * @ignore\n   */\n  _on_start_string(mt, len, _parent_mt, _pos) {\n    let desc = '';\n\n    this.depth++;\n    switch (mt) {\n      case MT.BYTE_STRING:\n        desc = `Bytes, length: ${len}`;\n        break;\n      case MT.UTF8_STRING:\n        desc = `String, length: ${len.toString()}`;\n        break;\n    }\n    this.push(`${desc}\\n`);\n  }\n\n  /**\n   * @ignore\n   */\n  _on_start(mt, tag, parent_mt, pos) {\n    this.depth++;\n    switch (parent_mt) {\n      case MT.ARRAY:\n        this.push(`[${pos}], `);\n        break;\n      case MT.MAP:\n        if (pos % 2) {\n          this.push(`{Val:${Math.floor(pos / 2)}}, `);\n        } else {\n          this.push(`{Key:${Math.floor(pos / 2)}}, `);\n        }\n        break;\n    }\n    switch (mt) {\n      case MT.TAG:\n        this.push(`Tag #${tag}`);\n        if (tag === 24) {\n          this.push(' Encoded CBOR data item');\n        }\n        break;\n      case MT.ARRAY:\n        if (tag === SYMS.STREAM) {\n          this.push('Array (streaming)');\n        } else {\n          this.push(`Array, ${tag} item${plural(tag)}`);\n        }\n        break;\n      case MT.MAP:\n        if (tag === SYMS.STREAM) {\n          this.push('Map (streaming)');\n        } else {\n          this.push(`Map, ${tag} pair${plural(tag)}`);\n        }\n        break;\n      case MT.BYTE_STRING:\n        this.push('Bytes (streaming)');\n        break;\n      case MT.UTF8_STRING:\n        this.push('String (streaming)');\n        break;\n    }\n    this.push('\\n');\n  }\n\n  /**\n   * @ignore\n   */\n  _on_stop(_mt) {\n    this.depth--;\n  }\n\n  /**\n   * @private\n   */\n  _on_value(val, parent_mt, pos, ai) {\n    if (val !== SYMS.BREAK) {\n      switch (parent_mt) {\n        case MT.ARRAY:\n          this.push(`[${pos}], `);\n          break;\n        case MT.MAP:\n          if (pos % 2) {\n            this.push(`{Val:${Math.floor(pos / 2)}}, `);\n          } else {\n            this.push(`{Key:${Math.floor(pos / 2)}}, `);\n          }\n          break;\n      }\n    }\n    const str = utils.cborValueToString(val, -Infinity);\n\n    if ((typeof val === 'string') ||\n        (Buffer.isBuffer(val))) {\n      if (val.length > 0) {\n        this.push(str);\n        this.push('\\n');\n      }\n      this.depth--;\n    } else {\n      this.push(str);\n      this.push('\\n');\n    }\n\n    switch (ai) {\n      case NUMBYTES.ONE:\n      case NUMBYTES.TWO:\n      case NUMBYTES.FOUR:\n      case NUMBYTES.EIGHT:\n        this.depth--;\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _on_data() {\n    this.push('0x');\n    this.push(this.all.read().toString('hex'));\n    this.push('\\n');\n  }\n}\n\nmodule.exports = Commented;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3201);\n"],"names":["root","factory","exports","module","define","amd","a","i","this","Object","defineProperty","value","wrapXOFConstructorWithOpts","wrapConstructorWithOpts","wrapConstructor","Hash","nextTick","swap32IfBE","byteSwapIfBE","swap8IfBE","isLE","isBytes","anumber","abytes","ahash","h","create","Error","outputLen","blockLen","aexists","instance","checkFinished","destroyed","finished","aoutput","out","min","length","u8","arr","Uint8Array","buffer","byteOffset","byteLength","u32","Uint32Array","Math","floor","clean","arrays","fill","createView","DataView","rotr","word","shift","rotl","byteSwap","byteSwap32","bytesToHex","bytes","hasHexBuiltin","toHex","hex","hexes","hexToBytes","fromHex","hl","al","array","ai","hi","n1","asciiToBase16","charCodeAt","n2","undefined","char","asyncLoop","async","iters","tick","cb","ts","Date","now","diff","utf8ToBytes","bytesToUtf8","TextDecoder","decode","toBytes","kdfInputToBytes","data","concatBytes","sum","res","pad","set","checkOpts","defaults","opts","toString","call","assign","createHasher","createOptHasher","createXOFer","randomBytes","bytesLength","crypto_1","crypto","getRandomValues","from","ArrayBuffer","isView","constructor","name","n","Number","isSafeInteger","b","lengths","includes","u","Array","_","padStart","asciis","_0","_9","A","F","f","ch","str","TextEncoder","encode","hashCons","hashC","msg","update","digest","tmp","__importDefault","mod","__esModule","cbor_1","tweetnacl_1","SoftCredentials_1","msgpack_1","Fido2Manager_1","buffer_1","pqCrypto_1","lookup","usb","nfc","ble","internal","hybrid","getAuthTypeFromCkey","ckey","type","default","extendedResults","get","getSignerFromCkey","k","publicKey","Buffer","concat","PQ_COSE_ALG","DILITHIUM2","Fido2PRFManager","super","prfsalt","createFromAttestation","attestation","f2m","getCOSEPublicKey","authType","fid","id","response","transports","getTransports","_transports","reduceRight","memo","fromTransports","signer","getCypher","cypher","secretKey","getSecret","v","version","t","c","e","fromSecret","secret","capability","cleanSecureData","secureErase","challenge","userVerification","allowCredentials","num","keys","filter","extensions","prf","eval","first","result","webAuthn","getClientExtensionResults","results","box","keyPair","fromSecretKey","createRevocationCertificate","eos","_require$codes","ERR_MISSING_ARGS","ERR_STREAM_DESTROYED","noop","err","fn","pipe","to","_len","arguments","streams","_key","error","callback","pop","popCallback","isArray","destroys","map","stream","reading","writing","called","apply","once","closed","on","readable","writable","setHeader","abort","isRequest","destroy","destroyer","forEach","reduce","XOF256","XOF128","genCrystals","sha3_1","utils_ts_1","bitReversal","bits","revrsd","slice","split","reverse","join","parseInt","newPoly","N","Q","ROOT_OF_UNITY","brvBits","isKyber","modulo","nttZetas","p","BigInt","getZettas","LEN1","LEN2","NTT","r","len","start","zeta","j","smod","bitsCoder","d","mask","getMask","bytesLen","poly","buf","bufLen","pos","createXofShake","shake","seed","_seed","seedLen","calls","xofs","stats","x","y","xofInto","shake128","shake256","negateCt","normalizeZ","property","points","getz","pz","ez","toInv","modular_ts_1","FpInvertBatch","Fp","toAffine","fromAffine","wNAF","constTimeNegate","hasPrecomputes","elm","getW","unsafeLadder","ZERO","_0n","_1n","add","double","precomputeWindow","W","windows","windowSize","calcWOpts","base","window","push","precomputes","BASE","wo","nextN","offset","isZero","isNeg","isNegF","offsetF","calcOffsets","assert0","wNAFUnsafe","acc","item","negate","getPrecomputes","P","transform","comp","pointPrecomputes","wNAFCached","wNAFCachedUnsafe","prev","setWindowSize","validateW","pointWindowSizes","delete","mulEndoUnsafe","point","k1","k2","p1","p2","pippenger","fieldN","scalars","validateMSMPoints","validateMSMScalars","plength","slength","zero","wbits","bitLen","MASK","bitMask","buckets","BITS","scalar","resI","sumI","precomputeMSMUnsafe","tableSize","chunks","ceil","tables","shiftBy","curr","validateBasic","curve","validateField","validateObject","Gx","Gy","nBitLength","nByteLength","freeze","nLength","ORDER","_createCurveFields","CURVE","curveOpts","val","createField","Fn","params","isValid","condition","neg","scalarBits","maxNumber","wOpts","offsetStart","abs","field","s","WeakMap","order","Field","MT","POS_INT","NEG_INT","BYTE_STRING","UTF8_STRING","ARRAY","MAP","TAG","SIMPLE_FLOAT","DATE_STRING","DATE_EPOCH","POS_BIGINT","NEG_BIGINT","DECIMAL_FRAC","BIGFLOAT","BASE64URL_EXPECTED","BASE64_EXPECTED","BASE16_EXPECTED","CBOR","URI","BASE64URL","BASE64","REGEXP","MIME","SET","NUMBYTES","ONE","TWO","FOUR","EIGHT","INDEFINITE","SIMPLE","FALSE","TRUE","NULL","UNDEFINED","SYMS","Symbol","for","PARENT","BREAK","STREAM","SHIFT32","BI","MINUS_ONE","NEG_MAX","MAX_SAFE_INTEGER","MAXINT32","MAXINT64","Stream","EE","inherits","Readable","Writable","Duplex","Transform","PassThrough","pipeline","prototype","dest","options","source","ondata","chunk","write","pause","ondrain","resume","_isStdio","end","onend","onclose","didOnEnd","onerror","er","cleanup","listenerCount","removeListener","emit","constants","utils","INTERNAL_JSON","setBuffersToJSON","obj","isBufferish","toJSON","Tagged","tag","values","b64this","base64","b64urlThis","base64url","hexThis","TAGS","bufferToBigInt","URL","match","last","indexOf","m","groups","padding","RegExp","Set","TYPED_ARRAY_TAGS","Uint16Array","Uint8ClampedArray","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array","toTypedArray","tagged","TypeError","TypedClass","sz","isBigEndian","ab","size","dv","getter","setter","getUint16","setUint16","getUint32","setUint32","getBigUint64","setBigUint64","swapEndian","BigUint64Array","BigInt64Array","current_TAGS","ret","JSON","stringify","encodeCBOR","gen","_pushTag","pushAny","convert","converters","message","reset","DER","DERErr","_legacyHelperEquat","_legacyHelperNormPriv","weierstrassN","weierstrassPoints","_weierstrass_legacy_opts_to_new","Point","weierstrassEquation","normPrivateKeyToScalar","allowedPrivateKeyLengths","wrapPrivateKey","ProjectivePoint","isWithinCurveOrder","inRange","_weierstrass_new_output_to_legacy","ecdsa","weierstrass","ecdsaOpts","hash","hmac","lowS","bits2int","bits2int_modN","_ecdsa_legacy_opts_to_new","_ecdsa_new_output_to_legacy","SWUFpSqrtRatio","mapToCurveSimpleSWU","B","Z","sqrtRatio","isOdd","tv1","tv2","tv3","tv4","tv5","tv6","sqr","mul","cmov","eql","e1","tv4_inv","hmac_js_1","curve_ts_1","validateSigVerOpts","abool","prehash","Err","_tlv","E","dataLen","numberToHexUnpadded","lenLen","lengthBytes","subarray","l","_int","bytesToNumberBE","toSig","int","tlv","ensureBytes","seqBytes","seqLeftBytes","rBytes","rLeftBytes","sBytes","sLeftBytes","hexFromSig","sig","seq","_2n","_3n","_4n","x2","x3","BYTES","expected","key","padded","fromBytes","isValidNot0","cofactor","CURVE_ORDER","_validateObject","allowInfinityPoint","clearCofactor","isTorsionFree","endo","is0","beta","splitScalar","assertCompressionIsSupported","_c","isCompressed","bx","hasEvenY","pprefix","of","L","LC","LU","head","tail","isValidXY","y2","sqrt","sqrtError","left","right","_4a3","pow","_27b2","acoord","title","banZero","aprjpoint","other","toAffineMemo","memoized","iz","px","py","z","inv","ax","ay","zz","assertValidMemo","finishEndo","endoBeta","k1p","k2p","k1neg","k2neg","assertValidity","fromPrivateKey","privateKey","multiply","msm","precompute","isLazy","wnaf","_setWindowSize","equals","X1","Y1","Z1","X2","Y2","Z2","U1","U2","b3","X3","Y3","Z3","t0","t1","t2","t3","sub","t4","t5","subtract","fake","k1f","k2f","multiplyUnsafe","sc","multiplyAndAddUnsafe","invertedZ","toRawBytes","randomBytes_","hmac_","msgs","fnBits","isBiggerThanHalfOrder","number","aValidRS","Signature","recovery","fromCompact","fromDER","addRecoveryBit","recoverPublicKey","msgHash","FIELD_ORDER","rec","radj","R","ir","u1","u2","hasHighS","normalizeS","format","toDERRawBytes","toDERHex","toCompactRawBytes","toCompactHex","isValidPrivateKey","randomPrivateKey","mapHashToField","getMinHashLength","isProbPub","delta","ORDER_MASK","int2octets","aInRange","defaultSigOpts","defaultVerOpts","getPublicKey","getSharedSecret","privateA","publicB","sign","privKey","k2sig","some","extraEntropy","ent","h1int","seedArgs","kBytes","ik","q","normS","prepSig","createHmacDrbg","drbg","verify","signature","sg","isHex","isObj","_sig","derError","is","o","c1","_2n_pow_c1_1","_2n_pow_c1","c2","c3","c4","c5","c6","c7","isQR","tvv5","y1","Commented","Diagnose","Decoder","Encoder","Simple","Map","SharedValueEncoder","comment","decodeAll","decodeFirst","decodeAllSync","decodeFirstSync","diagnose","encodeCanonical","encodeOne","encodeAsync","leveldb","config","g","localStorage","String","toLowerCase","warned","console","trace","warn","encodeToCurve","hashToCurve","secp256r1","p256","nist_ts_1","p256_hasher","DearmorAndDesigncryptStream","SigncryptAndArmorStream","dearmorAndDesigncrypt","signcryptAndArmor","verifyDetachedArmored","signDetachedAndArmor","DearmorAndVerifyStream","SignAndArmorStream","verifyArmored","signAndArmor","DearmorAndDecryptStream","EncryptAndArmorStream","dearmorAndDecrypt","encryptAndArmor","SymmetricKeyRecipient","DesigncryptStream","designcrypt","SigncryptStream","signcrypt","verifyDetached","signDetached","VerifyStream","SignStream","DecryptStream","decrypt","EncryptStream","encrypt","MessageType","DearmorStream","dearmor","ArmorStream","armor","armor_1","require","enumerable","message_header_1","encryption_1","signing_1","signcryption_1","recipient_1","with_armor_1","NoFilter","BinaryParseStream","objectMode","bs","__restart","_transform","fresh","_encoding","__needed","read","__parser","next","__fresh","done","Infinity","_parse","_flush","KeyManager_1","sha256","PQManager","create_PQ_fromEntropy","entropy","swapIndex","km","level","proof","generateDilithiumKeyPair","seed2","generate_PQ","instantiate","fromId","signDilithium","userVerificationIgnored","verifyDilithium","p521_hasher","secp521r1","p521","p384_hasher","secp384r1","p384","sha2_js_1","_shortw_utils_ts_1","hash_to_curve_ts_1","weierstrass_ts_1","p256_CURVE","p384_CURVE","p521_CURVE","Fp256","Fp384","Fp521","createSWU","createCurve","DST","encodeDST","expand","sha384","sha512","ml_dsa87","ml_dsa65","ml_dsa44","PARAMS","_crystals_ts_1","GAMMA2_1","GAMMA2_2","K","D","GAMMA1","GAMMA2","TAU","ETA","OMEGA","polyCoder","compress","polyAdd","polySub","polyShiftl","polyChknorm","MultiplyNTTs","RejNTTPoly","xof","getDilithium","CRH_BYTES","TR_BYTES","C_TILDE_BYTES","BETA","decompose","rPlus","r0","r1","HighBits","LowBits","UseHint","Power2Round","hintCoder","ETACoder","T0Coder","T1Coder","ZCoder","W1Coder","W1Vec","vecCoder","publicCoder","splitCoder","secretCoder","sigCoder","CoefFromHalfByte","RejBoundedPoly","d1","d2","SampleInBall","pre","masks","maskPos","maskBit","polyPowerRound","res0","res1","polyUseHint","polyMakeHint","cnt","seedCoder","signRandBytes","keygen","seedDst","randSeed","rho","rhoPrime","K_","dkLen","xofPrime","s1","s2","s1Hat","aij","tr","cleanBytes","random","externalMu","_K","pv","mu","rnd","rhoprime","x256","main_loop","kappa","w","wi","w1","cTilde","cHat","cs1","cs2","ct0","hint","zNtt","wTick1","ct12d","Az","wApprox","equalBytes","ctx","EMPTY","M","getMessage","hashName","getMessagePrehash","sharedTextEncoder","utf8DecodeJs","inputOffset","units","byte1","byte2","byte3","unit","fromCharCode","sharedTextDecoder","ExtData","DecodeError","proto","setPrototypeOf","configurable","UINT32_MAX","setInt64","view","high","low","getInt64","getInt32","EXT_TIMESTAMP","TIMESTAMP32_MAX_SEC","TIMESTAMP64_MAX_SEC","encodeTimeSpecToTimestamp","sec","nsec","rv","secHigh","secLow","encodeDateToTimeSpec","date","msec","getTime","nsecInSec","encodeTimestampExtension","object","decodeTimestampToTimeSpec","nsec30AndSecHigh2","decodeTimestampExtension","timeSpec","timestampExtension","ExtensionCodec","builtInEncoders","builtInDecoders","encoders","decoders","register","index","tryToEncode","context","encodeExt","decodeExt","ensureUint8Array","SharedArrayBuffer","isArrayBufferLike","defaultCodec","entered","extensionCodec","useBigInt64","maxDepth","initialBufferSize","sortKeys","forceFloat32","ignoreUndefined","forceIntegerToFloat","clone","reinitializeState","encodeSharedRef","doEncode","depth","encodeNil","encodeBoolean","encodeNumberAsFloat","encodeNumber","encodeString","encodeBigInt64","encodeObject","ensureBufferSizeToWrite","sizeToWrite","requiredSize","resizeBuffer","newSize","newBuffer","newBytes","newView","writeU8","writeU16","writeU32","writeU64","writeI8","writeI16","writeI32","writeI64","writeF32","writeF64","writeBigUint64","writeBigInt64","writeStringHeader","strLength","extra","utf8Count","output","outputOffset","encodeInto","utf8EncodeTE","utf8EncodeJs","ext","encodeExtension","encodeArray","encodeBinary","encodeMap","writeU8a","countWithoutUndefined","count","sort","setUint8","setInt8","setInt16","setInt32","setFloat32","setFloat64","setUint64","setBigInt64","prettyByte","byte","STATE_ARRAY","STATE_MAP_KEY","STATE_MAP_VALUE","mapKeyConverter","StackPool","stack","stackHeadPosition","top","pushArrayState","state","getUninitializedStateFromPool","position","pushMapState","readCount","partialState","release","EMPTY_VIEW","EMPTY_BYTES","getInt8","RangeError","MORE_DATA","sharedCachedKeyDecoder","maxKeyLength","maxLengthPerKey","hit","miss","caches","canBeCached","find","records","FIND_CHUNK","record","recordBytes","store","cachedValue","slicedCopyOfBytes","totalPos","headByte","rawStrings","maxStrLength","maxBinLength","maxArrayLength","maxMapLength","maxExtLength","keyDecoder","setBuffer","appendBuffer","hasRemaining","remainingData","newData","createExtraByteError","posToShow","doDecodeSync","decodeMulti","decodeAsync","decoded","decodeArrayStream","decodeMultiAsync","decodeStream","isArrayHeaderRequired","arrayItemsLeft","readArraySize","complete","DECODE","readHeadByte","decodeString","readF32","readF64","readU8","readU16","readU32","readU64AsBigInt","readU64","readI8","readI16","readI32","readI64AsBigInt","readI64","lookU8","lookU16","lookU32","decodeBinary","decodeExtension","headerOffset","stateIsMapKey","decodeUtf8String","stringBytes","utf8DecodeTD","utf8Decode","headOffset","extType","getUint8","getInt16","getBigInt64","getFloat32","getFloat64","ensureAsyncIterable","streamLike","asyncIterator","reader","getReader","releaseLock","asyncIterableFromStream","decodeMultiStream","expand_message_xmd","expand_message_xof","hash_to_field","isogenyMap","coeff","xn","xd","yn","yd","xd_inv","yd_inv","mapToCurve","clear","initial","dst","u0","os2ip","i2osp","anum","strxor","lenInBytes","H","b_in_bytes","r_in_bytes","ell","DST_prime","Z_pad","l_i_b_str","b_0","args","_DST","isHash","log2p","len_in_bytes","prb","elm_offset","tv","ERR_STREAM_PREMATURE_CLOSE","onlegacyfinish","onfinish","writableEnded","_writableState","readableEnded","_readableState","endEmitted","ended","onrequest","req","MemoryChannel","pipeChannels","channel1","channel2","running","log","receive","send","pipe1to2","pipe2to1","Promise","all","close","unpipeChannels","StreamChannel","channel","getWriteStream","stream_1","encoding","upload","resolve","writeStream","getReadStream","temp","onData","uploadData","download","readStream","downloadData","convertWebWritableStreamToNodeWritable","webWritableStream","writer","getWriter","final","abortError","convertWebReadableStreamToNodeReadable","webReadableStream","cryptoChannel_1","messageQueue","waitingResolvers","connected","connectedCallbacks","setChannel","chan","otherend","createBidirectionnal","input","onConnected","createEncryptedBidirectionnal","generateKey","encryptChannel","getConnectionString","fromConnectionString","string","setLogger","logger","setInjector","injector","processedData","deliverMessage","resolver","alloc","ObjectRecorder","valueSharing","_pushObject","shared","check","FIRST","NEVER","_pushIntNum","stopRecording","stop","clearRecording","objs","enc","removeAllListeners","_encodeAll","_objs","reject","bufs","edwards","eddsa","twistedEdwards","eddsaOpts","uvRatio","adjustScalarBytes","domain","_eddsa_legacy_opts_to_new","ExtendedPoint","_eddsa_new_output_to_legacy","_8n","VERIFY_DEFAULT","zip215","modP","div","isEdValidXY","aextpoint","ex","ey","X","Y","et","T","Z4","aX2","X1Z2","X2Z1","Y1Z2","Y2Z1","C","x1y1","G","T3","T1","T2","isSmallOrder","normed","lastByte","bytesToNumberLE","max","isXOdd","isLastByteOdd","fromPrivateScalar","numberToBytesLE","cHash","phflag","modN","modN_LE","getExtendedPublicKey","prefix","hashed","getPrivateScalar","pointBytes","hashDomainToScalar","verifyOpts","SB","ownKeys","__createBinding","desc","getOwnPropertyDescriptor","__setModuleDefault","__importStar","getOwnPropertyNames","ar","hasOwnProperty","CryptoChannel","GameOfLifeIcon","KeyManager","IdManager","LocalStorage","MemoryStorage","Challenger","VaultysId","Challenger_1","IdManager_1","VaultysId_1","MemoryChannel_1","MemoryStorage_1","GameOfLifeIcon_1","dispose","deserialize","serialize","replacer","reviver","startsWith","parse","save","storagify","setItem","removeItem","fromString","_raw","list","listSubstores","deleteSubstore","renameSubstore","oldname","newname","substore","HALF","FLOAT","DOUBLE","BUF_NAN","BUF_INF_NEG","BUF_INF_POS","BUF_NEG_ZERO","SEMANTIC_TYPES","current_SEMANTIC_TYPES","canonical","encodeUndefined","disallowUndefinedKeys","dateType","collapseBigIntegers","detectLoops","omitUndefinedProperties","genTypes","superOpts","readableObjectMode","writableObjectMode","parseDateType","WeakSet","semanticTypes","addSemanticType","entries","_pushUInt8","allocUnsafe","writeUInt8","_pushUInt16BE","writeUInt16BE","_pushUInt32BE","writeUInt32BE","_pushFloatBE","writeFloatBE","_pushDoubleBE","writeDoubleBE","_pushNaN","_pushInfinity","half","_pushFloat","b2","writeHalf","fround","_pushInt","mt","orig","_pushNumber","isNaN","isFinite","round","_pushString","_pushBoolean","_pushUndefined","bufferishToBuffer","_pushNull","_obj","_pushJSBigint","_pushBuffer","indefinite","skipTypes","has","converter","cbor_keys","a_cbor","b_cbor","compare","ck","len2","highWaterMark","readableHighWaterMark","fun","typeName","old","pushArray","removeLoopDetectors","_pushDate","toISOString","_pushNoFilter","_pushRegexp","_pushSet","_pushURL","_pushBoxed","valueOf","_pushMap","_k","Boolean","_pushTypedArray","typ","BYTES_PER_ELEMENT","_pushArrayBuffer","encodeIndefinite","chunkSize","objType","endIndex","ERROR","UNINITIALISED","writeString","writeBuffer","nameHeader","lengthHeader","writeInt","lo","unpacked","timestamp","protocol","service","pk2","pk1","sign1","sign2","nonce","id2","serializeUnsigned","verifyChallenge","id1","metadata","picked","encode_v0","isLive","liveliness","time","vaultysId","verifyCertificate","certificate","fromCertificate","deser","challenger","toVersion","mykey","hisKey","setChallenge","challengeString","serialized","getUnsignedChallenge","signChallenge","getContext","createChallenge","getCertificate","encoded","getContactDid","did","getContactId","isComplete","hasFailed","init","tempchallenge","deserializeCertificate","serializeCertificate_v0","serializeCertificate","HMAC","iHash","oHash","digestInto","_cloneInto","getPrototypeOf","toBig","shrSL","shrSH","rotrSL","rotrSH","rotrBL","rotrBH","rotr32L","rotr32H","rotlSL","rotlSH","rotlBL","rotlBH","add5L","add5H","add4L","add4H","add3L","add3H","fromBig","U32_MASK64","_32n","le","lst","Ah","Al","_l","_h","Bh","Bl","Cl","Ch","Dl","Dh","El","Eh","u64","sha512_224","sha512_256","sha224","SHA512_256","SHA512_224","SHA384","SHA512","SHA224","SHA256","_md_ts_1","SHA256_K","SHA256_W","HashMD","SHA256_IV","process","W15","W2","s0","Chi","Maj","roundClean","SHA224_IV","K512","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512_IV","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","SHA384_IV","T224_IV","T256_IV","PQ_COSE_KEY_PARAMS","PQ_COSE_KEY_TYPE","ml_dsa_js_1","createDilithiumCoseKey","coseKey","DILITHIUM","DILITHIUM_MODE","DILITHIUM_PK","getDilithiumKeyInfo","publicKeySize","secretKeySize","signatureSize","DILITHIUM3","DILITHIUM5","DILITHIUM_SK","isEncoding","StringDecoder","nb","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","self","utf8CheckExtraBytes","copy","total","utf8CheckIncomplete","ReadableState","debug","EElistenerCount","emitter","listeners","OurUint8Array","debugUtil","debuglog","createReadableStreamAsyncIterator","BufferList","destroyImpl","getHighWaterMark","ERR_INVALID_ARG_TYPE","ERR_STREAM_PUSH_AFTER_EOF","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","errorOrDestroy","kProxyEvents","isDuplex","pipes","pipesCount","flowing","sync","needReadable","emittedReadable","readableListening","resumeScheduled","paused","emitClose","autoDestroy","defaultEncoding","awaitDrain","readingMore","decoder","_read","_destroy","readableAddChunk","addToFront","skipChunkCheck","emitReadable","emitReadable_","onEofChunk","isBuffer","chunkInvalid","_uint8ArrayToBuffer","addChunk","maybeReadMore","unshift","_undestroy","undestroy","isPaused","setEncoding","content","MAX_HWM","howMuchToRead","computeNewHighWaterMark","flow","maybeReadMore_","updateReadableListening","nReadingNextTick","resume_","fromList","consume","endReadable","endReadableNT","wState","xs","nOrig","doRead","pipeOpts","src","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","cleanedUp","needDrain","pipeOnDrain","event","prependListener","_events","dests","splice","ev","addListener","wrap","_this","method","bind","_fromList","iterable","nacl","gf","randombytes","gf0","gf1","_121665","D2","I","ts64","vn","xi","yi","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","inp","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x1","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","mpos","crypto_stream_salsa20","crypto_stream","sn","crypto_stream_xor","poly1305","t6","t7","leftover","fin","crypto_onetimeauth","outpos","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","set25519","car25519","sel25519","pack25519","neq25519","par25519","unpack25519","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","S","inv25519","pow2523","crypto_scalarmult","x32","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","blocks","d0","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r2","r3","r4","r5","r6","r7","r8","r9","mac","macpos","want","crypto_box_afternm","crypto_box_open_afternm","crypto_hashblocks_hl","hh","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","crypto_hash","cswap","pack","tx","ty","zi","scalarmult","scalarbase","crypto_sign_keypair","pk","sk","seeded","modL","carry","crypto_sign","sm","smlen","crypto_sign_open","chk","den","den2","den4","den6","unpackneg","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","checkLengths","checkArrayTypes","lowlevel","crypto_box","crypto_box_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_secretbox_BOXZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","secretbox","open","keyLength","nonceLength","overheadLength","scalarMult","scalarLength","groupElementLength","before","checkBoxLengths","after","publicKeyLength","secretKeyLength","sharedKeyLength","signedMsg","mlen","detached","fromSeed","seedLength","signatureLength","hashLength","setPRNG","msCrypto","emitErrorAndCloseNT","emitErrorNT","emitCloseNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finalCalled","prefinished","rState","ieee754","customInspectSymbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","arg","encodingOrOffset","actual","arrayView","isInstance","fromArrayBuffer","fromArrayLike","fromArrayView","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","foo","typedArraySupport","poolSize","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","toLocaleString","inspect","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","_arr","hexSliceLookupTable","checkOffset","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeDoubleLE","targetStart","copyWithin","code","errors","sym","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_BUFFER_OUT_OF_BOUNDS","received","isInteger","INVALID_BASE64_RE","leadSurrogate","toByteArray","base64clean","alphabet","table","i16","BufferBigIntNotDefined","ERR_MULTIPLE_CALLBACK","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","_transformState","transforming","writecb","writechunk","rs","needTransform","writeencoding","flush","prefinish","_write","err2","Fido2PRFManager_1","webauthn_1","PQManager_1","keyManager","cleanId","pqm","fromEntropy","pqc","cleanedEntropy","create_Id25519_fromEntropy","createWebauthn","passkey","onPRFEnabled","createPublicKeyCredentialCreationOptions","getWebAuthnProvider","fido2FromAttestation","createPQC","createPublicKeyCredentialOptionsPQC","verifyPackedAttestation","enabled","machineFromEntropy","organizationFromEntropy","personFromEntropy","secretBuffer","generatePerson","generate_Id25519","generateOrganization","generateMachine","relationshipCertificate","fingerprint","toUpperCase","didDocument","authentication","controller","publicKeyMultibase","keyAgreement","encType","isHardware","isMachine","isPerson","getOTPHmac","timelock","otp","getSecretHash","getOTP","toHash","performDiffieHellman","otherVaultysId","diffieHellman","vaultysId1","vaultysId2","dhiesEncrypt","recipientId","dhiesDecrypt","encryptedMessage","senderId","plaintext","recipientIds","safari","test","navigator","userAgent","rp","user","displayName","authenticatorSelection","authenticatorAttachment","residentKey","hints","pubKeyCredParams","alg","DHIES","saltpack_1","ed25519_1","ed25519","recipientPublicKey","messageBuffer","ephemeralKey","dh","sharedSecret","kdfOutput","kdf","encryptionKey","macKey","ciphertext","dataToAuthenticate","computeMAC","senderPublicKey","computedMac","constantTimeEqual","ephemeralPublicKey","staticPublicKey","encryptionKeyMaterial","macKeyMaterial","proofKey","swapIndexBuffer","serializeID_v0","publicKeys","senderKey","getSigner","otherKeyManager","otherKey","derivedKey","keyManager1","keyManager2","recipientKM","senderKM","Fido2Manager","id_v0","credentials","CredentialUserInteractionRequest","publicKeyResponse","clientDataJSON","authenticatorData","signatureBuffer","userHandle","extractChallenge","simpleVerify","verifyCredentials","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","encodeChunk","keccak_512","keccak_384","keccak_256","keccak_224","sha3_512","sha3_384","sha3_256","sha3_224","Keccak","keccakP","_u64_ts_1","_7n","_256n","_0x71n","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","IOTAS","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","rounds","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","suffix","enableXOF","posOut","state32","keccak","take","writeInto","bufferOut","genShake","getHash","curveDef","defHash","objectKeys","allowHalfOpen","onEndNT","getBuffer","recording","encoder","CborMap","_encode","_decode","kv","iterator","thisArg","COUNT","MAJOR","NOT_FOUND","parentArray","parent","parentBufferStream","UnexpectedDataError","normalizeOptions","tags","max_depth","preferMap","preferWeb","required","preventDuplicateKeys","_onRead","valueBytes","nullcheck","guessEncoding","parser","unused","nextByte","then","vals","octet","parent_major","parent_length","numbytes","parseCBORint","utf8","hasParent","parseCBORfloat","again","pm","allstrings","p256_1","p384_1","p521_1","COSEKTY","COSECRV","COSEALGHASH","parseAuthData","rpIdHash","flagsBuf","flagsInt","flags","up","uv","at","ed","counterBuf","counter","aaguid","credID","COSEPublicKey","credIDLenBuf","credIDLen","verifyECDSA","verifyEdDSA","SoftCredentials","signCount","rawId","createRequest","origin","credential","rpId","supportsDilithium","param","algorithm","dilithiumPk","dilithiumSk","isDILITHIUM","clientData","rawIdLength","attestationObject","authData","fmt","attStmt","getAuthenticatorData","getPublicKeyAlgorithm","pubKey","ato","attestationBuffer","attestationStruct","authDataStruct","clientDataHashBuf","dataBuffer","signatureIsValid","ecdaaKeyId","pubKeyCose","hashAlg","ec","assertion","userVerifiation","ass","att","keyType","padEnd","clientDataHash","fromUTF8","toSign","NodeWebAuthn","BrowserWebAuthn","createCredentialRequest","isAvailable","PublicKeyCredential","hash_to_ristretto255","hashToRistretto255","RistrettoPoint","ed25519_hasher","edwardsToMontgomery","x25519","ed25519ph","ed25519ctx","ED25519_TORSION_SUBGROUP","edwardsToMontgomeryPub","edwardsToMontgomeryPriv","edwardsPriv","ed25519Defaults","utils_js_1","edwards_ts_1","montgomery_ts_1","_5n","ed25519_CURVE","ed25519_pow_2_252_3","_10n","_20n","_40n","_80n","pow2","b20","b40","b80","b160","b240","b250","pow_p_5_8","ED25519_SQRT_M1","v3","vx2","root1","root2","useRoot1","useRoot2","noRoot","isNegativeLE","ed25519_domain","edwardsPub","bpub","montgomery","powPminus2","ELL2_C1","ELL2_C2","ELL2_C3","ELL2_C1_EDWARDS","FpSqrtEven","aristp","RistPoint","xMn","xMd","yMn","yMd","ELL2_C4","ELL2_J","x1n","gxd","gx1","y11","y12","x2n","y21","y22","gx2","e2","e3","e4","map_to_curve_elligator2_curve25519","map_to_curve_elligator2_edwards25519","SQRT_M1","SQRT_AD_MINUS_ONE","INVSQRT_A_MINUS_D","ONE_MINUS_D_SQ","D_MINUS_ONE_SQ","invertSqrt","MAX_255B","bytes255ToNumberLE","calcElligatorRistrettoMap","Ns","Ns_D_is_sq","s_","Nt","W0","W1","W3","ep","ap","R1","R2","emsg","u1_2","u2_2","Dx","Dy","u2sq","invsqrt","D1","zInv","_x","_y","one","two","uniform_bytes","ctor","superCtor","super_","TempCtor","getLength","vecLen","utils_1","HASHES","oid","sha2_1","notImplemented","hexToNumber","numberToBytesBE","numberToVarBytesBE","expectedLength","bitGet","bitSet","hashLen","qByteLen","hmacFn","u8n","u8of","reseed","sl","pred","validators","optValidators","checkField","fieldName","isOptional","checkVal","validatorFns","fields","optFields","expectedType","isOpt","current","computed","utils_js_2","isPosBig","bigint","function","boolean","stringOrUint8Array","copyProps","SafeBuffer","ENCRYPTION_HEADER","PRF_NONCE_LENGTH","getSignatureType","instanciateContact","instanciateApp","serverId","protocol_version","acceptEncryptFile","acceptDecryptFile","setProtocolVersion","fromStore","merge","otherStore","master","master_store","slave_store","me","contact","signIn","creds","extractedChallenge","contacts","apps","app","getContact","getApp","setContactMetadata","getContactMetadata","getContactMetadatas","verifyRelationshipCertificate","firstname","phone","email","signFile","file","arrayBuffer","payload","verifyFile","fileSignature","contactId","url","searchParams","search","decryptFile","toDecrypt","header","prfNonceBytes","nonceBytes","requestPRF","decrypted","encryptFile","toEncrypt","getSignatures","migrate","newContact","oldDid","site","newSite","startSRP","acceptSRP","requestDecrypt","new_encrypted","acceptDecrypt","accept","encrypted","requestDecryptFile","requestEncryptFile","result_contact","acceptPRF","appid","endsWith","requestSignFile","acceptSignFile","listCertificates","wot","raw","cert","chal","saveApp","appstore","saveContact","contactstore","askContact","acceptContact","CorkedRequest","entry","corkReq","pendingcb","onCorkedFinish","corkedRequestsFree","WritableState","realHasInstance","internalUtil","deprecate","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","nop","noDecode","decodeStrings","corked","bufferProcessing","onwrite","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","bufferedRequestCount","writev","_writev","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","hasInstance","Function","writeAfterEnd","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","td","fatal","ignoreBOM","inputEncoding","inpE","watchPipe","readError","om","isNoFilter","nf1","nf2","tot","nf","allBufs","allObjs","_bufArray","readFull","onReadable","onFinish","onError","writableFinished","finally","promise","buf1","buf2","stylize","writeBigInt","readUBigInt","readBigInt","power","FpPow","invert","tonelliShanks","FpSqrt","FIELD_FIELDS","FpDiv","lhs","rhs","FpLegendre","FpIsSquare","FpSqrtOdd","hashToPrivateScalar","groupOrder","minLen","getFieldBytesLength","fieldOrder","fieldLen","reduced","sqrt3mod4","p1div4","sqrt5mod8","p5div8","nv","_Fp","cc","Q1div2","t_tmp","exponent","nums","passZero","inverted","multipliedAcc","invertedAcc","p1mod2","powered","yes","no","_nBitLength","bitLenOrOpts","_nbitLength","_sqrt","_opts","sqrtP","sqrN","addN","subN","mulN","invertBatch","bitLength","_u32_max","padOffset","dataView","oview","outLen","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","ERR_INVALID_OPT_VALUE","duplexKey","hwm","highWaterMarkFrom","fromBase64","toUTF8","toBase64","hmac_1","getAlgorithm","cleanAlg","replaceAll","bufferLike","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","browser","env","argv","versions","off","prependOnceListener","binding","cwd","chdir","umask","keyUint8Array","fullMessage","messageWithNonce","messageWithNonceAsUint8Array","sendHandler","that","receiveHandler","Proxy","checksUTF8","s16","exp","mant","parseHalf","bin","arrayEqual","every","elem","cborValueToString","float_bytes","description","B64URL_SWAPS","codes","createErrorType","NodeError","_Base","subClass","superClass","arg1","arg2","arg3","__proto__","oneOf","thing","determiner","this_len","substring","rand","is25519","montgomeryBits","Gu","a24","minScalar","maxAdded","maxScalar","GuBytes","encodeU","pu","x_1","x_2","z_2","x_3","z_3","k_t","AA","BB","DA","CB","dacb","da_cb","z2","montgomeryLadder","_u","decodeU","decodeScalar","scalarMultBase","dummy","_Object$setPrototypeO","_defineProperty","prim","_toPrimitive","_toPropertyKey","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","readAndResolve","iter","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","lastPromise","wrapForNext","_this2","_Object$create","separator","stream_errors","_on_more","_on_value","_on_start","_on_stop","_on_data","_on_error","_parent_mt","_pos","_fore","parent_mt","fb","_depth","isSimple","has_parent","parent_indefinite","createFromFingerprint","fp","createFrom256","line","nextstep","live","heatMapColorforValue","renderMemo","mapcolors","fillStyle","xOffset","yOffset","fillRect","renderFingerprint","canvas","steps","step","animateFingerprint","speed","globalThis","ReflectOwnKeys","Reflect","ReflectApply","receiver","getOwnPropertySymbols","NumberIsNaN","EventEmitter","errorListener","eventTargetAgnosticAddListener","handler","addErrorHandlerIfEventEmitter","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","_addListener","prepend","events","existing","warning","newListener","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","addEventListener","wrapListener","removeEventListener","setMaxListeners","getMaxListeners","doError","originalListener","spliceOne","rawListeners","eventNames","enumerableOnly","symbols","_objectSpread","getOwnPropertyDescriptors","defineProperties","_defineProperties","props","descriptor","custom","Constructor","_classCallCheck","protoProps","hasStrings","_getString","_getBuffer","customInspect","plural","no_summary","_tag_24","_on_start_string","_on_read","ind","_mt","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","prop","toStringTag"],"sourceRoot":""}